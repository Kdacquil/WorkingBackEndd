import{a as H,b as Ce,c as ep,d as N,e as rE,f as Mc,g as iE,h as oE,i as sE,j as tp,k as aE,l as ba,m as np,n as Nc,o as uE,p as cE,q as rp,r as Fe,s as yi,t as bn,u as Pc,v as Sa,w as lE,x as dE,y as Sr,z as Tt}from"./chunk-U3NIYLHF.js";function hE(n,e){return Object.is(n,e)}var nt=null,kc=!1,Oc=1,Yn=Symbol("SIGNAL");function me(n){let e=nt;return nt=n,e}function fE(){return nt}var xa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sp(n){if(kc)throw new Error("");if(nt===null)return;nt.consumerOnSignalRead(n);let e=nt.nextProducerIndex++;if(jc(nt),e<nt.producerNode.length&&nt.producerNode[e]!==n&&Aa(nt)){let t=nt.producerNode[e];Vc(t,nt.producerIndexOfThis[e])}nt.producerNode[e]!==n&&(nt.producerNode[e]=n,nt.producerIndexOfThis[e]=Aa(nt)?yE(n,nt,e):0),nt.producerLastReadVersion[e]=n.version}function aM(){Oc++}function pE(n){if(!(Aa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Oc)){if(!n.producerMustRecompute(n)&&!up(n)){n.dirty=!1,n.lastCleanEpoch=Oc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Oc}}function gE(n){if(n.liveConsumerNode===void 0)return;let e=kc;kc=!0;try{for(let t of n.liveConsumerNode)t.dirty||uM(t)}finally{kc=e}}function mE(){return nt?.consumerAllowSignalWrites!==!1}function uM(n){n.dirty=!0,gE(n),n.consumerMarkedDirty?.(n)}function Lc(n){return n&&(n.nextProducerIndex=0),me(n)}function ap(n,e){if(me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function up(n){jc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(pE(t),r!==t.version))return!0}return!1}function cp(n){if(jc(n),Aa(n))for(let e=0;e<n.producerNode.length;e++)Vc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yE(n,e,t){if(vE(n),n.liveConsumerNode.length===0&&_E(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=yE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vc(n,e){if(vE(n),n.liveConsumerNode.length===1&&_E(n))for(let r=0;r<n.producerNode.length;r++)Vc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jc(i),i.producerIndexOfThis[r]=e}}function Aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function _E(n){return n.producerNode!==void 0}function wE(n){let e=Object.create(cM);e.computation=n;let t=()=>{if(pE(e),sp(e),e.value===Fc)throw e.error;return e.value};return t[Yn]=e,t}var ip=Symbol("UNSET"),op=Symbol("COMPUTING"),Fc=Symbol("ERRORED"),cM=Ce(H({},xa),{value:ip,dirty:!0,error:null,equal:hE,producerMustRecompute(n){return n.value===ip||n.value===op},producerRecomputeValue(n){if(n.value===op)throw new Error("Detected cycle in computations.");let e=n.value;n.value=op;let t=Lc(n),r;try{r=n.computation()}catch(i){r=Fc,n.error=i}finally{ap(n,t)}if(e!==ip&&e!==Fc&&r!==Fc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function lM(){throw new Error}var IE=lM;function EE(){IE()}function DE(n){IE=n}var dM=null;function TE(n){let e=Object.create(bE);e.value=n;let t=()=>(sp(e),e.value);return t[Yn]=e,t}function lp(n,e){mE()||EE(),n.equal(n.value,e)||(n.value=e,hM(n))}function CE(n,e){mE()||EE(),lp(n,e(n.value))}var bE=Ce(H({},xa),{equal:hE,value:void 0});function hM(n){n.version++,aM(),gE(n),dM?.()}function ne(n){return typeof n=="function"}function So(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Bc=So(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof Bc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{SE(o)}catch(s){e=e??[],s instanceof Bc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Bc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)SE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vi(t,e)}remove(e){let{_finalizers:t}=this;t&&vi(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var dp=Be.EMPTY;function Uc(n){return n instanceof Be||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function SE(n){ne(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ao={setTimeout(n,e,...t){let{delegate:r}=Ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $c(n){Ao.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function Ra(){}var AE=hp("C",void 0,void 0);function xE(n){return hp("E",void 0,n)}function RE(n){return hp("N",n,void 0)}function hp(n,e,t){return{kind:n,value:e,error:t}}var _i=null;function xo(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!_i;if(e&&(_i={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=_i;if(_i=null,t)throw r}}else n()}function ME(n){dn.useDeprecatedSynchronousErrorHandling&&_i&&(_i.errorThrown=!0,_i.error=n)}var wi=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uc(e)&&e.add(this)):this.destination=gM}static create(e,t,r){return new Zn(e,t,r)}next(e){this.isStopped?pp(RE(e),this):this._next(e)}error(e){this.isStopped?pp(xE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pp(AE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fM=Function.prototype.bind;function fp(n,e){return fM.call(n,e)}var gp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hc(r)}else Hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hc(t)}}},Zn=class extends wi{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fp(e.next,o),error:e.error&&fp(e.error,o),complete:e.complete&&fp(e.complete,o)}):i=e}this.destination=new gp(i)}};function Hc(n){dn.useDeprecatedSynchronousErrorHandling?ME(n):$c(n)}function pM(n){throw n}function pp(n,e){let{onStoppedNotification:t}=dn;t&&Ao.setTimeout(()=>t(n,e))}var gM={closed:!0,next:Ra,error:pM,complete:Ra};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ct(n){return n}function mp(...n){return yp(n)}function yp(n){return n.length===0?Ct:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=yM(t)?t:new Zn(t,r,i);return xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=NE(r),new r((i,o)=>{let s=new Zn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ro](){return this}pipe(...t){return yp(t)(this)}toPromise(t){return t=NE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function NE(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function mM(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function yM(n){return n&&n instanceof wi||mM(n)&&Uc(n)}function vp(n){return ne(n?.lift)}function ie(n){return e=>{if(vp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new _p(n,e,t,r,i)}var _p=class extends wi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mo(){return ie((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var No=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return Mo()(this)}};var PE=So(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new qc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new PE}next(t){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?dp:(this.currentObservers=null,o.push(t),new Be(()=>{this.currentObservers=null,vi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new qc(e,t),n})(),qc=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dp}};var ct=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ma={now(){return(Ma.delegate||Date).now()},delegate:void 0};var zc=class extends Ue{constructor(e=1/0,t=1/0,r=Ma){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Gc=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var Na={setInterval(n,e,...t){let{delegate:r}=Na;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Na;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Po=class extends Gc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Na.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Na.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ko=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ko.now=Ma.now;var Oo=class extends ko{constructor(e,t=ko.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ii=new Oo(Po);var Wc=class extends Po{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kc=class extends Oo{};var wp=new Kc(Wc);var bt=new de(n=>n.complete());function kE(n){return n&&ne(n.schedule)}function Ip(n){return n[n.length-1]}function Qc(n){return ne(Ip(n))?n.pop():void 0}function Sn(n){return kE(Ip(n))?n.pop():void 0}function OE(n,e){return typeof Ip(n)=="number"?n.pop():e}var Yc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Zc(n){return ne(n?.then)}function Jc(n){return ne(n[Ro])}function Xc(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function el(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tl=vM();function nl(n){return ne(n?.[tl])}function rl(n){return iE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Mc(t.read());if(i)return yield Mc(void 0);yield yield Mc(r)}}finally{t.releaseLock()}})}function il(n){return ne(n?.getReader)}function Pe(n){if(n instanceof de)return n;if(n!=null){if(Jc(n))return _M(n);if(Yc(n))return wM(n);if(Zc(n))return IM(n);if(Xc(n))return FE(n);if(nl(n))return EM(n);if(il(n))return DM(n)}throw el(n)}function _M(n){return new de(e=>{let t=n[Ro]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wM(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function IM(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$c)})}function EM(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function FE(n){return new de(e=>{TM(n,e).catch(t=>e.error(t))})}function DM(n){return FE(rl(n))}function TM(n,e){var t,r,i,o;return rE(this,void 0,void 0,function*(){try{for(t=oE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function $t(n,e=0){return ie((t,r)=>{t.subscribe(oe(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function hn(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LE(n,e){return Pe(n).pipe(hn(e),$t(e))}function VE(n,e){return Pe(n).pipe(hn(e),$t(e))}function jE(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function BE(n,e){return new de(t=>{let r;return Ot(t,e,()=>{r=n[tl](),Ot(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function ol(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function UE(n,e){return ol(rl(n),e)}function $E(n,e){if(n!=null){if(Jc(n))return LE(n,e);if(Yc(n))return jE(n,e);if(Zc(n))return VE(n,e);if(Xc(n))return ol(n,e);if(nl(n))return BE(n,e);if(il(n))return UE(n,e)}throw el(n)}function we(n,e){return e?$E(n,e):Pe(n)}function J(...n){let e=Sn(n);return we(n,e)}function Fo(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function Ep(n){return!!n&&(n instanceof de||ne(n.lift)&&ne(n.subscribe))}var Jn=So(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:CM}=Array;function bM(n,e){return CM(e)?n(...e):n(e)}function sl(n){return ee(e=>bM(n,e))}var{isArray:SM}=Array,{getPrototypeOf:AM,prototype:xM,keys:RM}=Object;function al(n){if(n.length===1){let e=n[0];if(SM(e))return{args:e,keys:null};if(MM(e)){let t=RM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function MM(n){return n&&typeof n=="object"&&AM(n)===xM}function ul(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pa(...n){let e=Sn(n),t=Qc(n),{args:r,keys:i}=al(n);if(r.length===0)return we([],e);let o=new de(NM(r,e,i?s=>ul(i,s):Ct));return t?o.pipe(sl(t)):o}function NM(n,e,t=Ct){return r=>{HE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)HE(e,()=>{let l=we(n[u],e),d=!1;l.subscribe(oe(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function HE(n,e,t){n?Ot(t,n,e):e()}function qE(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=A=>l<r?D(A):u.push(A),D=A=>{o&&e.next(A),l++;let x=!1;Pe(t(A,d++)).subscribe(oe(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let F=u.shift();s?Ot(e,s,()=>D(F)):D(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(oe(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Ye(n,e,t=1/0){return ne(e)?Ye((r,i)=>ee((o,s)=>e(r,o,i,s))(Pe(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>qE(r,i,n,t)))}function Ar(n=1/0){return Ye(Ct,n)}function zE(){return Ar(1)}function Lo(...n){return zE()(we(n,Sn(n)))}function cl(n){return new de(e=>{Pe(n()).subscribe(e)})}function PM(...n){let e=Qc(n),{args:t,keys:r}=al(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Pe(t[d]).subscribe(oe(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?ul(r,a):a),o.complete())}))}});return e?i.pipe(sl(e)):i}function Dp(...n){let e=Sn(n),t=OE(n,1/0),r=n;return r.length?r.length===1?Pe(r[0]):Ar(t)(we(r,e)):bt}function lt(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function xr(n){return ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Pe(n(s,xr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function GE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ei(n,e){return ne(e)?Ye(n,e,1):Ye(n,1)}function kM(n,e=Ii){return ie((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Rr(n){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xn(n){return n<=0?()=>bt:ie((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Tp(n){return ee(()=>n)}function Cp(n,e=Ct){return n=n??OM,ie((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function OM(n,e){return n===e}function ll(n=FM){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function FM(){return new Jn}function ka(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Ct,Xn(1),t?Rr(e):ll(()=>new Jn))}function Vo(n){return n<=0?()=>bt:ie((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Ct,Vo(1),t?Rr(e):ll(()=>new Jn))}function Oa(){return ie((n,e)=>{let t,r=!1;n.subscribe(oe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Di(n,e){return ie(GE(n,e,arguments.length>=2,!0))}function WE(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},D=()=>{let A=s;y(),A?.unsubscribe()};return ie((A,x)=>{l++,!f&&!d&&g();let F=u=u??e();x.add(()=>{l--,l===0&&!f&&!d&&(a=Sp(D,i))}),F.subscribe(x),!s&&l>0&&(s=new Zn({next:$=>F.next($),error:$=>{f=!0,g(),a=Sp(y,t,$),F.error($)},complete:()=>{d=!0,g(),a=Sp(y,r),F.complete()}}),Pe(A).subscribe(s))})(o)}}function Sp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Zn({next:()=>{r.unsubscribe(),n()}});return Pe(e(...t)).subscribe(r)}function dl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,WE({connector:()=>new zc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ti(...n){let e=Sn(n);return ie((t,r)=>{(e?Lo(n,t,e):Lo(n,t)).subscribe(r)})}function $e(n,e){return ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,d=o++;Pe(n(u,d)).subscribe(i=oe(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hl(n,e){return ne(e)?$e(()=>n,e):$e(()=>n)}function Ap(n){return ie((e,t)=>{Pe(n).subscribe(oe(t,()=>t.complete(),Ra)),!t.closed&&e.subscribe(t)})}function rt(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ct}var kD="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(Lg(e,t)),this.code=e}};function Lg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function za(n){return{toString:n}.toString()}var fl="__parameters__";function LM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function OD(n,e,t){return za(()=>{let r=LM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(fl)?u[fl]:Object.defineProperty(u,fl,{value:[]})[fl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var St=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function VM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(xt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function KE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var jM=Se({__forward_ref__:Se});function FD(n){return n.__forward_ref__=FD,n.toString=function(){return xt(this())},n}function At(n){return LD(n)?n():n}function LD(n){return typeof n=="function"&&n.hasOwnProperty(jM)&&n.__forward_ref__===FD}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jl(n){return QE(n,jD)||QE(n,BD)}function VD(n){return Jl(n)!==null}function QE(n,e){return n.hasOwnProperty(e)?n[e]:null}function BM(n){let e=n&&(n[jD]||n[BD]);return e||null}function YE(n){return n&&(n.hasOwnProperty(ZE)||n.hasOwnProperty(UM))?n[ZE]:null}var jD=Se({\u0275prov:Se}),ZE=Se({\u0275inj:Se}),BD=Se({ngInjectableDef:Se}),UM=Se({ngInjectorDef:Se}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UD(n){return n&&!!n.\u0275providers}var $M=Se({\u0275cmp:Se}),HM=Se({\u0275dir:Se}),qM=Se({\u0275pipe:Se}),zM=Se({\u0275mod:Se}),Tl=Se({\u0275fac:Se}),La=Se({__NG_ELEMENT_ID__:Se}),JE=Se({__NG_ENV_ID__:Se});function zo(n){return typeof n=="string"?n:n==null?"":String(n)}function GM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zo(n)}function WM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function Vg(n,e){throw new Y(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Hp;function $D(){return Hp}function Ft(n){let e=Hp;return Hp=n,e}function HD(n,e,t){let r=Jl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;Vg(n,"Injector")}var KM={},ja=KM,qp="__NG_DI_FLAG__",Cl="ngTempTokenPath",QM="ngTokenPath",YM=/\n/gm,ZM="\u0275",XE="__source",Ho;function JM(){return Ho}function Mr(n){let e=Ho;return Ho=n,e}function XM(n,e=le.Default){if(Ho===void 0)throw new Y(-203,!1);return Ho===null?HD(n,void 0,e):Ho.get(n,e&le.Optional?null:void 0,e)}function L(n,e=le.Default){return($D()||XM)(At(n),e)}function j(n,e=le.Default){return L(n,Xl(e))}function Xl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zp(n){let e=[];for(let t=0;t<n.length;t++){let r=At(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=eN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function qD(n,e){return n[qp]=e,n.prototype[qp]=e,n}function eN(n){return n[qp]}function tN(n,e,t,r){let i=n[Cl];throw e[XE]&&i.unshift(e[XE]),n.message=nN(`
`+n.message,i,t,r),n[QM]=i,n[Cl]=null,n}function nN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ZM?n.slice(2):n;let i=xt(e);if(Array.isArray(e))i=e.map(xt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):xt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(YM,`
  `)}`}var ns=qD(OD("Optional"),8);var jg=qD(OD("SkipSelf"),4);function Si(n,e){let t=n.hasOwnProperty(Tl);return t?n[Tl]:null}function rN(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function iN(n){return n.flat(Number.POSITIVE_INFINITY)}function Bg(n,e){n.forEach(t=>Array.isArray(t)?Bg(t,e):e(t))}function zD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sN(n,e,t){let r=Ga(n,e);return r>=0?n[r|1]=t:(r=~r,oN(n,r,e,t)),r}function xp(n,e){let t=Ga(n,e);if(t>=0)return n[t|1]}function Ga(n,e){return aN(n,e,1)}function aN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Go={},Xt=[],Wo=new z(""),GD=new z("",-1),WD=new z(""),Sl=class{get(e,t=ja){if(t===ja){let r=new Error(`NullInjectorError: No provider for ${xt(e)}!`);throw r.name="NullInjectorError",r}return t}},KD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(KD||{}),Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),kr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(kr||{});function uN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Gp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];cN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function QD(n){return n===3||n===4||n===6}function cN(n){return n.charCodeAt(0)===64}function Ba(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?eD(n,t,i,null,e[++r]):eD(n,t,i,null,null))}}return n}function eD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var YD="ng-template";function lN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&uN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ug(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ug(n){return n.type===4&&n.value!==YD}function dN(n,e,t){let r=n.type===4&&!t?YD:n.value;return e===r}function hN(n,e,t){let r=4,i=n.attrs,o=i!==null?gN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!fn(r)&&!fn(u))return!1;if(s&&fn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dN(n,u,t)||u===""&&e.length===1){if(fn(r))return!1;s=!0}}else if(r&8){if(i===null||!lN(n,i,u,t)){if(fn(r))return!1;s=!0}}else{let l=e[++a],d=fN(u,i,Ug(n),t);if(d===-1){if(fn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(fn(r))return!1;s=!0}}}}return fn(r)||s}function fn(n){return(n&1)===0}function fN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mN(e,n)}function pN(n,e,t=!1){for(let r=0;r<e.length;r++)if(hN(n,e[r],t))return!0;return!1}function gN(n){for(let e=0;e<n.length;e++){let t=n[e];if(QD(t))return e}return n.length}function mN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function tD(n,e){return n?":not("+e.trim()+")":e}function yN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fn(s)&&(e+=tD(o,i),i=""),r=s,o=o||!fn(r);t++}return i!==""&&(e+=tD(o,i)),e}function vN(n){return n.map(yN).join(",")}function _N(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fn(i))break;i=o}r++}return{attrs:e,classes:t}}function ZD(n){return za(()=>{let e=rT(n),t=Ce(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===KD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||Xt,_:null,schemas:n.schemas||null,tView:null,id:""});iT(t);let r=n.dependencies;return t.directiveDefs=rD(r,!1),t.pipeDefs=rD(r,!0),t.id=EN(t),t})}function wN(n){return Or(n)||XD(n)}function IN(n){return n!==null}function Gt(n){return za(()=>({type:n.type,bootstrap:n.bootstrap||Xt,declarations:n.declarations||Xt,imports:n.imports||Xt,exports:n.exports||Xt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nD(n,e){if(n==null)return Go;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==kr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ji(n){return za(()=>{let e=rT(n);return iT(e),e})}function JD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Or(n){return n[$M]||null}function XD(n){return n[HM]||null}function eT(n){return n[qM]||null}function tT(n){let e=Or(n)||XD(n)||eT(n);return e!==null?e.standalone:!1}function nT(n,e){let t=n[zM]||null;if(!t&&e===!0)throw new Error(`Type ${xt(n)} does not have '\u0275mod' property.`);return t}function rT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Go,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Xt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nD(n.inputs,e),outputs:nD(n.outputs),debugInfo:null}}function iT(n){n.features?.forEach(e=>e(n))}function rD(n,e){if(!n)return null;let t=e?eT:wN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IN)}function EN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function DN(...n){return{\u0275providers:oT(!0,n),\u0275fromNgModule:!0}}function oT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bg(e,s=>{let a=s;Wp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sT(i,o),t}function sT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$g(i,o=>{e(o,r)})}}function Wp(n,e,t,r){if(n=At(n),!n)return!1;let i=null,o=YE(n),s=!o&&Or(n);if(!o&&!s){let u=n.ngModule;if(o=YE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Wp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bg(o.imports,d=>{Wp(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&sT(l,e)}if(!a){let l=Si(i)||(()=>new i);e({provide:i,useFactory:l,deps:Xt},i),e({provide:WD,useValue:i,multi:!0},i),e({provide:Wo,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;$g(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $g(n,e){for(let t of n)UD(t)&&(t=t.\u0275providers),Array.isArray(t)?$g(t,e):e(t)}var TN=Se({provide:String,useValue:Se});function aT(n){return n!==null&&typeof n=="object"&&TN in n}function CN(n){return!!(n&&n.useExisting)}function bN(n){return!!(n&&n.useFactory)}function Ko(n){return typeof n=="function"}function SN(n){return!!n.useClass}var ed=new z(""),_l={},AN={},Rp;function Hg(){return Rp===void 0&&(Rp=new Sl),Rp}var qt=class{},Ua=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qp(e,s=>this.processProvider(s)),this.records.set(GD,jo(void 0,this)),i.has("environment")&&this.records.set(qt,jo(void 0,this));let o=this.records.get(ed);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WD,Xt,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Mr(this),r=Ft(void 0),i;try{return e()}finally{Mr(t),Ft(r)}}get(e,t=ja,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(JE))return e[JE](this);r=Xl(r);let i,o=Mr(this),s=Ft(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=PN(e)&&Jl(e);l&&this.injectableDefInScope(l)?u=jo(Kp(e),_l):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?Hg():this.parent;return t=r&le.Optional&&t===ja?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Cl]=a[Cl]||[]).unshift(xt(e)),o)throw a;return tN(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(s),Mr(o)}}resolveInjectorInitializers(){let e=me(null),t=Mr(this),r=Ft(void 0),i;try{let o=this.get(Wo,Xt,le.Self);for(let s of o)s()}finally{Mr(t),Ft(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=At(e);let t=Ko(e)?e:At(e&&e.provide),r=RN(e);if(!Ko(e)&&e.multi===!0){let i=this.records.get(t);i||(i=jo(void 0,_l,!0),i.factory=()=>zp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=me(null);try{return t.value===_l&&(t.value=AN,t.value=t.factory()),typeof t.value=="object"&&t.value&&NN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=At(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Kp(n){let e=Jl(n),t=e!==null?e.factory:Si(n);if(t!==null)return t;if(n instanceof z)throw new Y(204,!1);if(n instanceof Function)return xN(n);throw new Y(204,!1)}function xN(n){if(n.length>0)throw new Y(204,!1);let t=BM(n);return t!==null?()=>t.factory(n):()=>new n}function RN(n){if(aT(n))return jo(void 0,n.useValue);{let e=uT(n);return jo(e,_l)}}function uT(n,e,t){let r;if(Ko(n)){let i=At(n);return Si(i)||Kp(i)}else if(aT(n))r=()=>At(n.useValue);else if(bN(n))r=()=>n.useFactory(...zp(n.deps||[]));else if(CN(n))r=()=>L(At(n.useExisting));else{let i=At(n&&(n.useClass||n.provide));if(MN(n))r=()=>new i(...zp(n.deps));else return Si(i)||Kp(i)}return r}function jo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MN(n){return!!n.deps}function NN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PN(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Qp(n,e){for(let t of n)Array.isArray(t)?Qp(t,e):t&&UD(t)?Qp(t.\u0275providers,e):e(t)}function kn(n,e){n instanceof Ua&&n.assertNotDestroyed();let t,r=Mr(n),i=Ft(void 0);try{return e()}finally{Mr(r),Ft(i)}}function cT(){return $D()!==void 0||JM()!=null}function kN(n){if(!cT())throw new Y(-203,!1)}function ON(n){let e=St.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function FN(n){return typeof n=="function"}var rr=0,ae=1,te=2,vt=3,pn=4,yn=5,Al=6,xl=7,gn=8,Qo=9,Mn=10,it=11,$a=12,iD=13,rs=14,Nn=15,Ai=16,Bo=17,er=18,td=19,lT=20,Nr=21,Mp=22,en=23,mn=25,dT=1;var xi=7,Rl=8,Yo=9,Ht=10,Ml=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ml||{});function Pr(n){return Array.isArray(n)&&typeof n[dT]=="object"}function ir(n){return Array.isArray(n)&&n[dT]===!0}function hT(n){return(n.flags&4)!==0}function nd(n){return n.componentOffset>-1}function qg(n){return(n.flags&1)===1}function Fr(n){return!!n.template}function Yp(n){return(n[te]&512)!==0}var Zp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function fT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Wa(){return pT}function pT(n){return n.type.prototype.ngOnChanges&&(n.setInput=VN),LN}Wa.ngInherit=!0;function LN(){let n=mT(this),e=n?.current;if(e){let t=n.previous;if(t===Go)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VN(n,e,t,r,i){let o=this.declaredInputs[r],s=mT(n)||jN(n,{previous:Go,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Zp(l&&l.currentValue,t,u===Go),fT(n,e,i,t)}var gT="__ngSimpleChanges__";function mT(n){return n[gT]||null}function jN(n,e){return n[gT]=e}var oD=null;var An=function(n,e,t){oD?.(n,e,t)},BN="svg",UN="math";function Pn(n){for(;Array.isArray(n);)n=n[rr];return n}function yT(n,e){return Pn(e[n])}function nn(n,e){return Pn(e[n.index])}function vT(n,e){return n.data[e]}function _T(n,e){return n[e]}function jr(n,e){let t=e[n];return Pr(t)?t:t[rr]}function $N(n){return(n[te]&4)===4}function zg(n){return(n[te]&128)===128}function HN(n){return ir(n[vt])}function Nl(n,e){return e==null?null:n[e]}function wT(n){n[Bo]=0}function IT(n){n[te]&1024||(n[te]|=1024,zg(n)&&id(n))}function qN(n,e){for(;n>0;)e=e[rs],n--;return e}function rd(n){return!!(n[te]&9216||n[en]?.dirty)}function Jp(n){n[Mn].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),rd(n)&&id(n)}function id(n){n[Mn].changeDetectionScheduler?.notify(0);let e=Ri(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!zg(e)));)e=Ri(e)}function ET(n,e){if((n[te]&256)===256)throw new Y(911,!1);n[Nr]===null&&(n[Nr]=[]),n[Nr].push(e)}function zN(n,e){if(n[Nr]===null)return;let t=n[Nr].indexOf(e);t!==-1&&n[Nr].splice(t,1)}function Ri(n){let e=n[vt];return ir(e)?e[vt]:e}var ce={lFrame:PT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var DT=!1;function GN(){return ce.lFrame.elementDepthCount}function WN(){ce.lFrame.elementDepthCount++}function KN(){ce.lFrame.elementDepthCount--}function TT(){return ce.bindingsEnabled}function QN(){return ce.skipHydrationRootTNode!==null}function YN(n){return ce.skipHydrationRootTNode===n}function ZN(){ce.skipHydrationRootTNode=null}function _e(){return ce.lFrame.lView}function _t(){return ce.lFrame.tView}function TG(n){return ce.lFrame.contextLView=n,n[gn]}function CG(n){return ce.lFrame.contextLView=null,n}function Rt(){let n=CT();for(;n!==null&&n.type===64;)n=n.parent;return n}function CT(){return ce.lFrame.currentTNode}function JN(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ka(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function bT(){return ce.lFrame.isParent}function XN(){ce.lFrame.isParent=!1}function eP(){return ce.lFrame.contextLView}function ST(){return DT}function sD(n){DT=n}function AT(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function tP(){return ce.lFrame.bindingIndex}function nP(n){return ce.lFrame.bindingIndex=n}function od(){return ce.lFrame.bindingIndex++}function xT(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function rP(){return ce.lFrame.inI18n}function iP(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xp(e)}function oP(){return ce.lFrame.currentDirectiveIndex}function Xp(n){ce.lFrame.currentDirectiveIndex=n}function sP(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function RT(){return ce.lFrame.currentQueryIndex}function Gg(n){ce.lFrame.currentQueryIndex=n}function aP(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[yn]:null}function MT(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=aP(o),i===null||(o=o[rs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=NT();return r.currentTNode=e,r.lView=n,!0}function Wg(n){let e=NT(),t=n[ae];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NT(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?PT(n):e}function PT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function kT(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var OT=kT;function Kg(){let n=kT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uP(n){return(ce.lFrame.contextLView=qN(n,ce.lFrame.contextLView))[gn]}function Bi(){return ce.lFrame.selectedIndex}function Mi(n){ce.lFrame.selectedIndex=n}function Qg(){let n=ce.lFrame;return vT(n.tView,n.selectedIndex)}function cP(){return ce.lFrame.currentNamespace}var FT=!0;function Yg(){return FT}function Zg(n){FT=n}function lP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=pT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function wl(n,e,t){LT(n,e,3,t)}function Il(n,e,t,r){(n[te]&3)===t&&LT(n,e,t,r)}function Np(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function LT(n,e,t,r){let i=r!==void 0?n[Bo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Bo]+=65536),(a<o||o==-1)&&(dP(n,t,e,u),n[Bo]=(n[Bo]&4294901760)+u+2),u++}function aD(n,e){An(4,n,e);let t=me(null);try{e.call(n)}finally{me(t),An(5,n,e)}}function dP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[te]>>14<n[Bo]>>16&&(n[te]&3)===e&&(n[te]+=16384,aD(a,o)):aD(a,o)}var qo=-1,Ni=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function hP(n){return n instanceof Ni}function fP(n){return(n.flags&8)!==0}function pP(n){return(n.flags&16)!==0}var Pp={},eg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xl(r);let i=this.injector.get(e,Pp,r);return i!==Pp||t===Pp?i:this.parentInjector.get(e,t,r)}};function VT(n){return n!==qo}function Pl(n){return n&32767}function gP(n){return n>>16}function kl(n,e){let t=gP(n),r=e;for(;t>0;)r=r[rs],t--;return r}var tg=!0;function Ol(n){let e=tg;return tg=n,e}var mP=256,jT=mP-1,BT=5,yP=0,xn={};function vP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(La)&&(r=t[La]),r==null&&(r=t[La]=yP++);let i=r&jT,o=1<<i;e.data[n+(i>>BT)]|=o}function Fl(n,e){let t=UT(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,kp(r.data,n),kp(e,null),kp(r.blueprint,null));let i=Xg(n,e),o=n.injectorIndex;if(VT(i)){let s=Pl(i),a=kl(i,e),u=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function kp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function UT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=GT(i),r===null)return qo;if(t++,i=i[rs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return qo}function ng(n,e,t){vP(n,e,t)}function _P(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(QD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function $T(n,e,t){if(t&le.Optional||n!==void 0)return n;Vg(e,"NodeInjector")}function HT(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[Qo],o=Ft(void 0);try{return i?i.get(e,r,t&le.Optional):HD(e,r,t&le.Optional)}finally{Ft(o)}}return $T(r,e,t)}function qT(n,e,t,r=le.Default,i){if(n!==null){if(e[te]&2048&&!(r&le.Self)){let s=DP(n,e,t,r,xn);if(s!==xn)return s}let o=zT(n,e,t,r,xn);if(o!==xn)return o}return HT(e,t,r,i)}function zT(n,e,t,r,i){let o=IP(t);if(typeof o=="function"){if(!MT(e,n,r))return r&le.Host?$T(i,t,r):HT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Vg(t);else return s}finally{OT()}}else if(typeof o=="number"){let s=null,a=UT(n,e),u=qo,l=r&le.Host?e[Nn][yn]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?Xg(n,e):e[a+8],u===qo||!cD(r,!1)?a=-1:(s=e[ae],a=Pl(u),e=kl(u,e)));a!==-1;){let d=e[ae];if(uD(o,a,d.data)){let f=wP(a,e,t,s,r,l);if(f!==xn)return f}u=e[a+8],u!==qo&&cD(r,e[ae].data[a+8]===l)&&uD(o,a,e)?(s=d,a=Pl(u),e=kl(u,e)):a=-1}}return i}function wP(n,e,t,r,i,o){let s=e[ae],a=s.data[n+8],u=r==null?nd(a)&&tg:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,d=El(a,s,t,u,l);return d!==null?Pi(e,s,d,a):xn}function El(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Fr(y)&&y.type===t)return u}return null}function Pi(n,e,t,r){let i=n[t],o=e.data;if(hP(i)){let s=i;s.resolving&&WM(GM(o[t]));let a=Ol(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Ft(s.injectImpl):null,d=MT(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&lP(t,o[t],e)}finally{l!==null&&Ft(l),Ol(a),s.resolving=!1,OT()}}return i}function IP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(La)?n[La]:void 0;return typeof e=="number"?e>=0?e&jT:EP:e}function uD(n,e,t){let r=1<<n;return!!(t[e+(n>>BT)]&r)}function cD(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var bi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qT(this._tNode,this._lView,e,Xl(r),t)}};function EP(){return new bi(Rt(),_e())}function em(n){return za(()=>{let e=n.prototype.constructor,t=e[Tl]||rg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Tl]||rg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rg(n){return LD(n)?()=>{let e=rg(At(n));return e&&e()}:Si(n)}function DP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=zT(o,s,t,r|le.Self,xn);if(a!==xn)return a;let u=o.parent;if(!u){let l=s[lT];if(l){let d=l.get(t,xn,r);if(d!==xn)return d}u=GT(s),s=s[rs]}o=u}return i}function GT(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[yn]:null}function tm(n){return _P(Rt(),n)}function lD(n,e=null,t=null,r){let i=WT(n,e,t,r);return i.resolveInjectorInitializers(),i}function WT(n,e=null,t=null,r,i=new Set){let o=[t||Xt,DN(n)];return r=r||(typeof n=="object"?void 0:xt(n)),new Ua(o,e||Hg(),r||null,i)}var tn=class n{static{this.THROW_IF_NOT_FOUND=ja}static{this.NULL=new Sl}static create(e,t){if(Array.isArray(e))return lD({name:""},t,e,"");{let r=e.name??"";return lD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=K({token:n,providedIn:"any",factory:()=>L(GD)})}static{this.__NG_ELEMENT_ID__=-1}};var TP=new z("");TP.__NG_ELEMENT_ID__=n=>{let e=Rt();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new Y(204,!1)};var CP="ngOriginalError";function Op(n){return n[CP]}var KT=!0,nm=(()=>{class n{static{this.__NG_ELEMENT_ID__=bP}static{this.__NG_ENV_ID__=t=>t}}return n})(),ig=class extends nm{constructor(e){super(),this._lView=e}onDestroy(e){return ET(this._lView,e),()=>zN(this._lView,e)}};function bP(){return new ig(_e())}var is=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})();var og=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,cT()&&(this.destroyRef=j(nm,{optional:!0})??void 0,this.pendingTasks=j(is,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},yt=og;function Ll(...n){}function QT(n){let e,t;function r(){n=Ll;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function dD(n){return queueMicrotask(()=>n()),()=>{n=Ll}}var rm="isAngularZone",Vl=rm+"_ID",SP=0,fe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=KT}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,RP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,AP,Ll,Ll);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},AP={};function im(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){QT(()=>{n.callbackScheduled=!1,sg(n),n.isCheckStableRunning=!0,im(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),sg(n)}function RP(n){let e=()=>{xP(n)},t=SP++;n._inner=n._inner.fork({name:"angular",properties:{[rm]:!0,[Vl]:t,[Vl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(MP(u))return r.invokeTask(o,s,a,u);try{return hD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),fD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return hD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NP(u)&&e(),fD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,sg(n),im(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function sg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function hD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fD(n){n._nesting--,im(n)}var jl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function MP(n){return YT(n,"__ignore_ng_zone__")}function NP(n){return YT(n,"__scheduler_tick__")}function YT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function PP(n="zone.js",e){return n==="noop"?new jl:n==="zone.js"?new fe(e):n}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Op(e);for(;t&&Op(t);)t=Op(t);return t||null}},kP=new z("",{providedIn:"root",factory:()=>{let n=j(fe),e=j(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function OP(){return os(Rt(),_e())}function os(n,e){return new or(nn(n,e))}var or=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=OP}}return n})();function FP(n){return n instanceof or?n.nativeElement:n}function LP(){return this._results[Symbol.iterator]()}var ag=class n{get changes(){return this._changes??=new yt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=LP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=iN(e);(this._changesDetected=!rN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ZT(n){return(n.flags&128)===128}var JT=new Map,VP=0;function jP(){return VP++}function BP(n){JT.set(n[td],n)}function ug(n){JT.delete(n[td])}var pD="__ngContext__";function ki(n,e){Pr(e)?(n[pD]=e[td],BP(e)):n[pD]=e}function XT(n){return tC(n[$a])}function eC(n){return tC(n[pn])}function tC(n){for(;n!==null&&!ir(n);)n=n[pn];return n}var cg;function nC(n){cg=n}function UP(){if(cg!==void 0)return cg;if(typeof document<"u")return document;throw new Y(210,!1)}var sd=new z("",{providedIn:"root",factory:()=>$P}),$P="ng",om=new z(""),Lt=new z("",{providedIn:"platform",factory:()=>"unknown"});var sm=new z("",{providedIn:"root",factory:()=>UP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var HP="h",qP="b";var zP=()=>null;function am(n,e,t=!1){return zP(n,e,t)}var rC=!1,GP=new z("",{providedIn:"root",factory:()=>rC});var pl;function WP(){if(pl===void 0&&(pl=null,St.trustedTypes))try{pl=St.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pl}function gD(n){return WP()?.createScriptURL(n)||n}var Bl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kD})`}};function Qa(n){return n instanceof Bl?n.changingThisBreaksApplicationSecurity:n}function um(n,e){let t=KP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kD})`)}return t===e}function KP(n){return n instanceof Bl&&n.getTypeName()||null}var QP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function iC(n){return n=String(n),n.match(QP)?n:"unsafe:"+n}var ad=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ad||{});function YP(n){let e=sC();return e?e.sanitize(ad.URL,n)||"":um(n,"URL")?Qa(n):iC(zo(n))}function ZP(n){let e=sC();if(e)return gD(e.sanitize(ad.RESOURCE_URL,n)||"");if(um(n,"ResourceURL"))return gD(Qa(n));throw new Y(904,!1)}function JP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?ZP:YP}function oC(n,e,t){return JP(e,t)(n)}function sC(){let n=_e();return n&&n[Mn].sanitizer}function bG(n){return n.ownerDocument}function aC(n){return n instanceof Function?n():n}function XP(n){return(n??j(tn)).get(Lt)==="browser"}var nr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nr||{}),ek;function cm(n,e){return ek(n,e)}function Uo(n,e,t,r,i){if(r!=null){let o,s=!1;ir(r)?o=r:Pr(r)&&(s=!0,r=r[rr]);let a=Pn(r);n===0&&t!==null?i==null?hC(e,t,a):Ul(e,t,a,i||null,!0):n===1&&t!==null?Ul(e,t,a,i||null,!0):n===2?gk(e,a,s):n===3&&e.destroyNode(a),o!=null&&yk(e,n,o,t,i)}}function tk(n,e){return n.createText(e)}function nk(n,e,t){n.setValue(e,t)}function uC(n,e,t){return n.createElement(e,t)}function rk(n,e){cC(n,e),e[rr]=null,e[yn]=null}function ik(n,e,t,r,i,o){r[rr]=i,r[yn]=e,ud(n,r,t,1,i,o)}function cC(n,e){e[Mn].changeDetectionScheduler?.notify(9),ud(n,e,e[it],2,null,null)}function ok(n){let e=n[$a];if(!e)return Fp(n[ae],n);for(;e;){let t=null;if(Pr(e))t=e[$a];else{let r=e[Ht];r&&(t=r)}if(!t){for(;e&&!e[pn]&&e!==n;)Pr(e)&&Fp(e[ae],e),e=e[vt];e===null&&(e=n),Pr(e)&&Fp(e[ae],e),t=e&&e[pn]}e=t}}function sk(n,e,t,r){let i=Ht+r,o=t.length;r>0&&(t[i-1][pn]=e),r<o-Ht?(e[pn]=t[i],zD(t,Ht+r,e)):(t.push(e),e[pn]=null),e[vt]=t;let s=e[Ai];s!==null&&t!==s&&lC(s,e);let a=e[er];a!==null&&a.insertView(n),Jp(e),e[te]|=128}function lC(n,e){let t=n[Yo],r=e[vt];if(Pr(r))n[te]|=Ml.HasTransplantedViews;else{let i=r[vt][Nn];e[Nn]!==i&&(n[te]|=Ml.HasTransplantedViews)}t===null?n[Yo]=[e]:t.push(e)}function lm(n,e){let t=n[Yo],r=t.indexOf(e);t.splice(r,1)}function lg(n,e){if(n.length<=Ht)return;let t=Ht+e,r=n[t];if(r){let i=r[Ai];i!==null&&i!==n&&lm(i,r),e>0&&(n[t-1][pn]=r[pn]);let o=bl(n,Ht+e);rk(r[ae],r);let s=o[er];s!==null&&s.detachView(o[ae]),r[vt]=null,r[pn]=null,r[te]&=-129}return r}function dC(n,e){if(!(e[te]&256)){let t=e[it];t.destroyNode&&ud(n,e,t,3,null,null),ok(e)}}function Fp(n,e){if(e[te]&256)return;let t=me(null);try{e[te]&=-129,e[te]|=256,e[en]&&cp(e[en]),uk(n,e),ak(n,e),e[ae].type===1&&e[it].destroy();let r=e[Ai];if(r!==null&&ir(e[vt])){r!==e[vt]&&lm(r,e);let i=e[er];i!==null&&i.detachView(n)}ug(e)}finally{me(t)}}function ak(n,e){let t=n.cleanup,r=e[xl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[xl]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function uk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ni)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];An(4,a,u);try{u.call(a)}finally{An(5,a,u)}}else{An(4,i,o);try{o.call(i)}finally{An(5,i,o)}}}}}function ck(n,e,t){return lk(n,e.parent,t)}function lk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[rr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rn.None||o===Rn.Emulated)return null}return nn(r,t)}}function Ul(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hC(n,e,t){n.appendChild(e,t)}function mD(n,e,t,r,i){r!==null?Ul(n,e,t,r,i):hC(n,e,t)}function fC(n,e){return n.parentNode(e)}function dk(n,e){return n.nextSibling(e)}function hk(n,e,t){return pk(n,e,t)}function fk(n,e,t){return n.type&40?nn(n,t):null}var pk=fk,yD;function dm(n,e,t,r){let i=ck(n,r,e),o=e[it],s=r.parent||e[yn],a=hk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)mD(o,i,t[u],a,!1);else mD(o,i,t,a,!1);yD!==void 0&&yD(o,r,e,t,i)}function Fa(n,e){if(e!==null){let t=e.type;if(t&3)return nn(e,n);if(t&4)return dg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Fa(n,r);{let i=n[e.index];return ir(i)?dg(-1,i):Pn(i)}}else{if(t&128)return Fa(n,e.next);if(t&32)return cm(e,n)()||Pn(n[e.index]);{let r=pC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ri(n[Nn]);return Fa(i,r)}else return Fa(n,e.next)}}}return null}function pC(n,e){if(e!==null){let r=n[Nn][yn],i=e.projection;return r.projection[i]}return null}function dg(n,e){let t=Ht+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return Fa(r,i)}return e[xi]}function gk(n,e,t){n.removeChild(null,e,t)}function hm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&ki(Pn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)hm(n,e,t.child,r,i,o,!1),Uo(e,n,i,a,o);else if(u&32){let l=cm(t,r),d;for(;d=l();)Uo(e,n,i,d,o);Uo(e,n,i,a,o)}else u&16?mk(n,e,r,t,i,o):Uo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ud(n,e,t,r,i,o){hm(t,r,n.firstChild,e,i,o,!1)}function mk(n,e,t,r,i,o){let s=t[Nn],u=s[yn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Uo(e,n,i,d,o)}else{let l=u,d=s[vt];ZT(r)&&(l.flags|=128),hm(n,e,l,d,i,o,!0)}}function yk(n,e,t,r,i){let o=t[xi],s=Pn(t);o!==s&&Uo(e,n,r,o,i);for(let a=Ht;a<t.length;a++){let u=t[a];ud(u[ae],u,n,e,r,o)}}function vk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:nr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nr.Important),n.setStyle(t,r,i,o))}}function _k(n,e,t){n.setAttribute(e,"style",t)}function gC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Gp(n,e,r),i!==null&&gC(n,e,i),o!==null&&_k(n,e,o)}var sr={};function SG(n=1){yC(_t(),_e(),Bi()+n,!1)}function yC(n,e,t,r){if(!r)if((e[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&wl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Il(e,o,0,t)}Mi(t)}function qe(n,e=le.Default){let t=_e();if(t===null)return L(n,e);let r=Rt();return qT(r,t,At(n),e)}function vC(){let n="invalid";throw new Error(n)}function _C(n,e,t,r,i,o){let s=me(null);try{let a=null;i&kr.SignalBased&&(a=e[r][Yn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&kr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):fT(e,a,r,o)}finally{me(s)}}function wk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Mi(~i);else{let o=i,s=t[++r],a=t[++r];iP(s,o);let u=e[o];a(2,u)}}}finally{Mi(-1)}}function cd(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[rr]=i,f[te]=r|4|128|8|64,(l!==null||n&&n[te]&2048)&&(f[te]|=2048),wT(f),f[vt]=f[rs]=n,f[gn]=t,f[Mn]=s||n&&n[Mn],f[it]=a||n&&n[it],f[Qo]=u||n&&n[Qo]||null,f[yn]=o,f[td]=jP(),f[Al]=d,f[lT]=l,f[Nn]=e.type==2?n[Nn]:f,f}function ld(n,e,t,r,i){let o=n.data[e];if(o===null)o=Ik(n,e,t,r,i),rP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=JN();o.injectorIndex=s===null?-1:s.injectorIndex}return Ka(o,!0),o}function Ik(n,e,t,r,i){let o=CT(),s=bT(),a=s?o:o&&o.parent,u=n.data[e]=Sk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function wC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function IC(n,e,t,r,i){let o=Bi(),s=r&2;try{Mi(-1),s&&e.length>mn&&yC(n,e,mn,!1),An(s?2:0,i),t(r,i)}finally{Mi(o),An(s?3:1,i)}}function EC(n,e,t){if(hT(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{me(r)}}}function DC(n,e,t){TT()&&(Pk(n,e,t,nn(t,e)),(t.flags&64)===64&&xC(n,e,t))}function TC(n,e,t=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function CC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function fm(n,e,t,r,i,o,s,a,u,l,d){let f=mn+r,g=f+i,y=Ek(f,g),D=typeof l=="function"?l():l;return y[ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:d}}function Ek(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:sr);return t}function Dk(n,e,t,r){let o=r.get(GP,rC)||t===Rn.ShadowDom,s=n.selectRootElement(e,o);return Tk(s),s}function Tk(n){Ck(n)}var Ck=()=>null;function bk(n,e,t,r){let i=NC(e);i.push(t),n.firstCreatePass&&PC(n).push(r,i.length-1)}function Sk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return QN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?_D(r,t,l,a,u):_D(r,t,l,a)}return r}function _D(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Ak(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,D=g?g.outputs:null;u=vD(0,f.inputs,d,u,y),l=vD(1,f.outputs,d,l,D);let A=u!==null&&s!==null&&!Ug(e)?qk(u,d,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function xk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bC(n,e,t,r,i,o,s,a){let u=nn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(pm(n,t,d,r,i),nd(e)&&Rk(t,e.index)):e.type&3?(r=xk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Rk(n,e){let t=jr(e,n);t[te]&16||(t[te]|=64)}function SC(n,e,t,r){if(TT()){let i=r===null?null:{"":-1},o=Ok(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&AC(n,e,t,s,i,a),i&&Fk(t,r,i)}t.mergedAttrs=Ba(t.mergedAttrs,t.attrs)}function AC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)ng(Fl(t,e),n,r[l].type);Vk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=wC(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Ba(t.mergedAttrs,d.hostAttrs),jk(n,t,e,u,d),Lk(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Ak(n,t,o)}function Mk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Nk(s)!=a&&s.push(a),s.push(t,r,o)}}function Nk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Pk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;nd(t)&&Bk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fl(t,e),ki(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Pi(e,n,a,t);if(ki(l,e),s!==null&&Hk(e,a-i,l,u,t,s),Fr(u)){let d=jr(t.index,e);d[gn]=Pi(e,n,a,t)}}}function xC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=oP();try{Mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Xp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kk(u,l)}}finally{Mi(-1),Xp(s)}}function kk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ok(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(pN(e,s.selectors,!1))if(r||(r=[]),Fr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;hg(n,e,u)}else r.unshift(s),hg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function hg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Fk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}}function Lk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fr(e)&&(t[""]=n)}}function Vk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function jk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Si(i.type,!0)),s=new Ni(o,Fr(i),qe);n.blueprint[r]=s,t[r]=s,Mk(n,e,r,wC(n,t,i.hostVars,sr),i)}function Bk(n,e,t){let r=nn(e,n),i=CC(t),o=n[Mn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=dd(n,cd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Uk(n,e,t,r,i,o){let s=nn(n,e);$k(e[it],s,o,n.value,t,r,i)}function $k(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Hk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];_C(r,t,u,l,d,f)}}function qk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function RC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function MC(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Gg(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function dd(n,e){return n[$a]?n[iD][pn]=e:n[$a]=e,n[iD]=e,e}function fg(n,e,t){Gg(0);let r=me(null);try{e(n,t)}finally{me(r)}}function NC(n){return n[xl]??=[]}function PC(n){return n.cleanup??=[]}function kC(n,e){let t=n[Qo],r=t?t.get(tr,null):null;r&&r.handleError(e)}function pm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];_C(d,l,r,a,u,i)}}function OC(n,e,t){let r=yT(e,n);nk(n[it],r,t)}function zk(n,e){let t=jr(e,n),r=t[ae];Gk(r,t);let i=t[rr];i!==null&&t[Al]===null&&(t[Al]=am(i,t[Qo])),gm(r,t,t[gn])}function Gk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gm(n,e,t){Wg(e);try{let r=n.viewQuery;r!==null&&fg(1,r,t);let i=n.template;i!==null&&IC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[er]?.finishViewCreation(n),n.staticContentQueries&&MC(n,e),n.staticViewQueries&&fg(2,n.viewQuery,t);let o=n.components;o!==null&&Wk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,Kg()}}function Wk(n,e){for(let t=0;t<e.length;t++)zk(n,e[t])}function Kk(n,e,t,r){let i=me(null);try{let o=e.tView,a=n[te]&4096?4096:16,u=cd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ai]=l;let d=n[er];return d!==null&&(u[er]=d.createEmbeddedView(o)),gm(o,u,t),u}finally{me(i)}}function wD(n,e){return!e||e.firstChild===null||ZT(n)}function Qk(n,e,t,r=!0){let i=e[ae];if(sk(i,e,n,t),r){let s=dg(t,n),a=e[it],u=fC(a,n[xi]);u!==null&&ik(i,n[yn],a,e,u,s)}let o=e[Al];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $l(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),ir(o)&&Yk(o,r);let s=t.type;if(s&8)$l(n,e,t.child,r);else if(s&32){let a=cm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=pC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ri(e[Nn]);$l(u[ae],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Yk(n,e){for(let t=Ht;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&$l(r[ae],r,i,e)}n[xi]!==n[rr]&&e.push(n[xi])}var FC=[];function Zk(n){return n[en]??Jk(n)}function Jk(n){let e=FC.pop()??Object.create(e1);return e.lView=n,e}function Xk(n){n.lView[en]!==n&&(n.lView=null,FC.push(n))}var e1=Ce(H({},xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{id(n.lView)},consumerOnSignalRead(){this.lView[en]=this}});function t1(n){let e=n[en]??Object.create(n1);return e.lView=n,e}var n1=Ce(H({},xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ri(n.lView);for(;e&&!LC(e[ae]);)e=Ri(e);e&&IT(e)},consumerOnSignalRead(){this.lView[en]=this}});function LC(n){return n.type!==2}var r1=100;function VC(n,e=!0,t=0){let r=n[Mn],i=r.rendererFactory,o=!1;o||i.begin?.();try{i1(n,t)}catch(s){throw e&&kC(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function i1(n,e){let t=ST();try{sD(!0),pg(n,e);let r=0;for(;rd(n);){if(r===r1)throw new Y(103,!1);r++,pg(n,1)}}finally{sD(t)}}function o1(n,e,t,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Mn].inlineEffectRunner?.flush(),Wg(e);let a=!0,u=null,l=null;o||(LC(n)?(l=Zk(e),u=Lc(l)):fE()===null?(a=!1,l=t1(e),u=Lc(l)):e[en]&&(cp(e[en]),e[en]=null));try{wT(e),nP(n.bindingStartIndex),t!==null&&IC(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&wl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Il(e,y,0,null),Np(e,0)}if(s||s1(e),jC(e,0),n.contentQueries!==null&&MC(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&wl(e,y)}else{let y=n.contentHooks;y!==null&&Il(e,y,1),Np(e,1)}wk(n,e);let f=n.components;f!==null&&UC(e,f,0);let g=n.viewQuery;if(g!==null&&fg(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&wl(e,y)}else{let y=n.viewHooks;y!==null&&Il(e,y,2),Np(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Mp]){for(let y of e[Mp])y();e[Mp]=null}o||(e[te]&=-73)}catch(d){throw o||id(e),d}finally{l!==null&&(ap(l,u),a&&Xk(l)),Kg()}}function jC(n,e){for(let t=XT(n);t!==null;t=eC(t))for(let r=Ht;r<t.length;r++){let i=t[r];BC(i,e)}}function s1(n){for(let e=XT(n);e!==null;e=eC(e)){if(!(e[te]&Ml.HasTransplantedViews))continue;let t=e[Yo];for(let r=0;r<t.length;r++){let i=t[r];IT(i)}}}function a1(n,e,t){let r=jr(e,n);BC(r,t)}function BC(n,e){zg(n)&&pg(n,e)}function pg(n,e){let r=n[ae],i=n[te],o=n[en],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&up(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)o1(r,n,r.template,n[gn]);else if(i&8192){jC(n,1);let a=r.components;a!==null&&UC(n,a,1)}}function UC(n,e,t){for(let r=0;r<e.length;r++)a1(n,e[r],t)}function mm(n,e){let t=ST()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=Ri(n);if(Yp(n)&&!r)return n;n=r}return null}var Oi=class{get rootNodes(){let e=this._lView,t=e[ae];return $l(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(ir(e)){let t=e[Rl],r=t?t.indexOf(this):-1;r>-1&&(lg(e,r),bl(t,r))}this._attachedToViewContainer=!1}dC(this._lView[ae],this._lView)}onDestroy(e){ET(this._lView,e)}markForCheck(){mm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Jp(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,VC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yp(this._lView),t=this._lView[Ai];t!==null&&!e&&lm(t,this._lView),cC(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=Yp(this._lView),r=this._lView[Ai];r!==null&&!t&&lC(r,this._lView),Jp(this._lView)}},Fi=(()=>{class n{static{this.__NG_ELEMENT_ID__=l1}}return n})(),u1=Fi,c1=class extends u1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Kk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Oi(i)}};function l1(){return ym(Rt(),_e())}function ym(n,e){return n.type&4?new c1(e,n,os(n,e)):null}var xG=new RegExp(`^(\\d+)*(${qP}|${HP})*(.*)`);var d1=()=>null;function ID(n,e){return d1(n,e)}var Zo=class{},vm=new z("",{providedIn:"root",factory:()=>!1});var $C=new z(""),HC=new z(""),gg=class{},Hl=class{};function h1(n){let e=Error(`No component factory found for ${xt(n)}.`);return e[f1]=n,e}var f1="ngComponent";var mg=class{resolveComponentFactory(e){throw h1(e)}},Jo=class{static{this.NULL=new mg}},Xo=class{},Ya=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>p1()}}return n})();function p1(){let n=_e(),e=Rt(),t=jr(e.index,n);return(Pr(t)?t:n)[it]}var g1=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>null})}}return n})();function yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=KE(i,a);else if(o==2){let u=a,l=e[++s];r=KE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ql=class extends Jo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Or(e);return new es(t,this.ngModule)}};function ED(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:kr.None;e?t.push({propName:s,templateName:r,isSignal:(a&kr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function m1(n){let e=n.toLowerCase();return e==="svg"?BN:e==="math"?UN:null}var es=class extends Hl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=ED(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return ED(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=me(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new eg(e,s):e,u=a.get(Xo,null);if(u===null)throw new Y(407,!1);let l=a.get(g1,null),d=a.get(Zo,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?Dk(g,r,this.componentDef.encapsulation,a):uC(g,y,m1(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let x=null;D!==null&&(x=am(D,a,!0));let F=fm(0,null,null,1,0,null,null,null,null,null,null),$=cd(null,F,null,A,null,null,f,g,a,null,x);Wg($);let O,W,X=null;try{let Q=this.componentDef,I,v=null;Q.findHostDirectiveDefs?(I=[],v=new Map,Q.findHostDirectiveDefs(Q,I,v),I.push(Q)):I=[Q];let w=y1($,D);X=v1(w,D,Q,I,$,f,g),W=vT(F,mn),D&&I1(g,Q,D,r),t!==void 0&&E1(W,this.ngContentSelectors,t),O=w1(X,Q,I,v,$,[D1]),gm(F,$,null)}catch(Q){throw X!==null&&ug(X),ug($),Q}finally{Kg()}return new vg(this.componentType,O,os(W,$),$,W)}finally{me(o)}}},vg=class extends gg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Oi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;pm(o[ae],o,i,e,t),this.previousInputValues.set(e,t);let s=jr(this._tNode.index,o);mm(s,1)}}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function y1(n,e){let t=n[ae],r=mn;return n[r]=e,ld(t,r,2,"#host",null)}function v1(n,e,t,r,i,o,s){let a=i[ae];_1(r,n,e,s);let u=null;e!==null&&(u=am(e,i[Qo]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=cd(i,CC(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&hg(a,n,r.length-1),dd(i,f),i[n.index]=f}function _1(n,e,t,r){for(let i of n)e.mergedAttrs=Ba(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(yg(e,e.mergedAttrs,!0),t!==null&&mC(r,t,e))}function w1(n,e,t,r,i,o){let s=Rt(),a=i[ae],u=nn(s,i);AC(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Pi(i,a,f,s);ki(g,i)}xC(a,i,s),u&&ki(u,i);let l=Pi(i,a,s.directiveStart+s.componentOffset,s);if(n[gn]=i[gn]=l,o!==null)for(let d of o)d(l,e);return EC(a,s,i),l}function I1(n,e,t,r){if(r)Gp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=_N(e.selectors[0]);i&&Gp(n,t,i),o&&o.length>0&&gC(n,t,o.join(" "))}}function E1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function D1(){let n=Rt();Jg(_e()[ae],n)}var Br=(()=>{class n{static{this.__NG_ELEMENT_ID__=T1}}return n})();function T1(){let n=Rt();return zC(n,_e())}var C1=Br,qC=class extends C1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return os(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xg(this._hostTNode,this._hostLView);if(VT(e)){let t=kl(e,this._hostLView),r=Pl(e),i=t[ae].data[r+8];return new bi(i,t)}else return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=DD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ID(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,wD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!FN(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new es(Or(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(qt,null);A&&(o=A)}let d=Or(u.componentType??{}),f=ID(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,wD(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(HN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[vt],l=new qC(u,u[yn],u[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Qk(s,i,o,r),e.attachToViewContainerRef(),zD(Lp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=DD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lg(this._lContainer,t);r&&(bl(Lp(this._lContainer),t),dC(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=lg(this._lContainer,t);return r&&bl(Lp(this._lContainer),t)!=null?new Oi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function DD(n){return n[Rl]}function Lp(n){return n[Rl]||(n[Rl]=[])}function zC(n,e){let t,r=e[n.index];return ir(r)?t=r:(t=RC(r,e,null,n),e[n.index]=t,dd(e,t)),S1(t,e,n,r),new qC(t,n,e)}function b1(n,e){let t=n[it],r=t.createComment(""),i=nn(e,n),o=fC(t,i);return Ul(t,o,r,dk(t,i),!1),r}var S1=R1,A1=()=>!1;function x1(n,e,t){return A1(n,e,t)}function R1(n,e,t,r){if(n[xi])return;let i;t.type&8?i=Pn(r):i=b1(e,t),n[xi]=i}var _g=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},wg=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)_m(e,t).matches!==null&&this.queries[t].setDirty()}},Ig=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=V1(e):this.predicate=e}},Eg=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dg=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,M1(t,o)),this.matchTNodeWithReadOption(e,t,El(t,e,o,!1,!1))}else r===Fi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,El(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===or||i===Br||i===Fi&&t.type&4)this.addMatch(t.index,-2);else{let o=El(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function M1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function N1(n,e){return n.type&11?os(n,e):n.type&4?ym(n,e):null}function P1(n,e,t,r){return t===-1?N1(e,n):t===-2?k1(n,e,r):Pi(n,n[ae],t,e)}function k1(n,e,t){if(t===or)return os(e,n);if(t===Fi)return ym(e,n);if(t===Br)return zC(e,n)}function GC(n,e,t,r){let i=e[er].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(P1(e,d,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Tg(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=GC(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=Ht;f<d.length;f++){let g=d[f];g[Ai]===g[vt]&&Tg(g[ae],g,l,r)}if(d[Yo]!==null){let f=d[Yo];for(let g=0;g<f.length;g++){let y=f[g];Tg(y[ae],y,l,r)}}}}}return r}function O1(n,e){return n[er].queries[e].queryList}function F1(n,e,t){let r=new ag((t&4)===4);return bk(n,e,r,r.destroy),(e[er]??=new wg).queries.push(new _g(r))-1}function L1(n,e,t){let r=_t();return r.firstCreatePass&&(j1(r,new Ig(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),F1(r,_e(),e)}function V1(n){return n.split(",").map(e=>e.trim())}function j1(n,e,t){n.queries===null&&(n.queries=new Eg),n.queries.track(new Dg(e,t))}function _m(n,e){return n.queries.getByIndex(e)}function B1(n,e){let t=n[ae],r=_m(t,e);return r.crossesNgTemplate?Tg(t,n,e,[]):GC(t,n,r,e)}var TD=new Set;function Za(n){TD.has(n)||(TD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function U1(n){return typeof n=="function"&&n[Yn]!==void 0}function MG(n,e){Za("NgSignals");let t=TE(n),r=t[Yn];return e?.equal&&(r.equal=e.equal),t.set=i=>lp(r,i),t.update=i=>CE(r,i),t.asReadonly=$1.bind(t),t}function $1(){let n=this[Yn];if(n.readonlyFn===void 0){let e=()=>this();e[Yn]=n,n.readonlyFn=e}return n.readonlyFn}function WC(n){return U1(n)&&typeof n.set=="function"}function H1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(W1))}return o}return zl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>K1(o));e.push(u)}),z1(),Promise.all(e).then(()=>{})}var zl=new Map,q1=new Set;function z1(){let n=zl;return zl=new Map,n}function G1(){return zl.size===0}function W1(n){return typeof n=="string"?n:n.text()}function K1(n){q1.delete(n)}function Q1(n){return Object.getPrototypeOf(n.prototype).constructor}function Y1(n){let e=Q1(n.type),t=!0,r=[n];for(;e;){let i;if(Fr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=gl(n.inputs),s.inputTransforms=gl(n.inputTransforms),s.declaredInputs=gl(n.declaredInputs),s.outputs=gl(n.outputs);let a=i.hostBindings;a&&tO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&X1(n,u),l&&eO(n,l),Z1(n,i),VM(n.outputs,i.outputs),Fr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Y1&&(t=!1)}}e=Object.getPrototypeOf(e)}J1(r)}function Z1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function J1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ba(i.hostAttrs,t=Ba(t,i.hostAttrs))}}function gl(n){return n===Go?{}:n===Xt?[]:n}function X1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function wm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Lr=class{},Ha=class{};var Gl=class extends Lr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ql(this);let o=nT(e);this._bootstrapComponents=aC(o.bootstrap),this._r3Injector=WT(e,t,[{provide:Lr,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver},...r],xt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wl=class extends Ha{constructor(e){super(),this.moduleType=e}create(e){return new Gl(this.moduleType,e,[])}};function nO(n,e,t){return new Gl(n,e,t,!1)}var Cg=class extends Lr{constructor(e){super(),this.componentFactoryResolver=new ql(this),this.instance=null;let t=new Ua([...e.providers,{provide:Lr,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver}],e.parent||Hg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hd(n,e,t=null){return new Cg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function KC(n){return iO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function rO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function iO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function oO(n,e,t){return n[e]=t}function Li(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function QC(n,e,t,r){let i=Li(n,e,t);return Li(n,e+1,r)||i}function sO(n){return(n.flags&32)===32}function aO(n,e,t,r,i,o,s,a,u){let l=e.consts,d=ld(e,n,4,s||null,a||null);SC(e,t,d,Nl(l,u)),Jg(e,d);let f=d.tView=fm(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function uO(n,e,t,r,i,o,s,a,u,l){let d=t+mn,f=e.firstCreatePass?aO(d,e,n,r,i,o,s,a,u):e.data[d];Ka(f,!1);let g=lO(e,n,f,t);Yg()&&dm(e,n,g,f),ki(g,n);let y=RC(g,n,g,f);return n[d]=y,dd(n,y),x1(y,f,n),qg(f)&&DC(e,n,f),u!=null&&TC(n,f,l),f}function cO(n,e,t,r,i,o,s,a){let u=_e(),l=_t(),d=Nl(l.consts,o);return uO(u,l,n,e,t,r,i,d,s,a),cO}var lO=dO;function dO(n,e,t,r){return Zg(!0),e[it].createComment("")}var $o=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}($o||{}),YC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})(),bg=class n{constructor(){this.ngZone=j(fe),this.scheduler=j(Zo),this.errorHandler=j(tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[$o.EarlyRead,$o.Write,$o.MixedReadWrite,$o.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}},Sg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Im(n,e){!e?.injector&&kN(Im);let t=e?.injector??j(tn);return XP(t)?(Za("NgAfterNextRender"),fO(n,t,e,!0)):pO}function hO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function fO(n,e,t,r){let i=e.get(YC);i.impl??=e.get(bg);let o=t?.phase??$o.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(nm):null,a=new Sg(i.impl,hO(n,o),r,s);return i.impl.register(a),a}var pO={destroy(){}};function Em(n,e,t,r){let i=_e(),o=od();if(Li(i,o,e)){let s=_t(),a=Qg();Uk(a,i,n,e,t,r)}return Em}function gO(n,e,t,r){return Li(n,od(),t)?e+zo(t)+r:sr}function mO(n,e,t,r,i,o){let s=tP(),a=QC(n,s,t,i);return xT(2),a?e+zo(t)+r+zo(i)+o:sr}function ml(n,e){return n<<17|e<<2}function Vi(n){return n>>17&32767}function yO(n){return(n&2)==2}function vO(n,e){return n&131071|e<<17}function Ag(n){return n|2}function ts(n){return(n&131068)>>2}function Vp(n,e){return n&-131069|e<<2}function _O(n){return(n&1)===1}function xg(n){return n|1}function wO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vi(s),u=ts(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Ga(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Vi(n[a+1]);n[r+1]=ml(g,a),g!==0&&(n[g+1]=Vp(n[g+1],r)),n[a+1]=vO(n[a+1],r)}else n[r+1]=ml(a,0),a!==0&&(n[a+1]=Vp(n[a+1],r)),a=r;else n[r+1]=ml(u,0),a===0?a=r:n[u+1]=Vp(n[u+1],r),u=r;l&&(n[r+1]=Ag(n[r+1])),CD(n,d,r,!0),CD(n,d,r,!1),IO(e,d,n,r,o),s=ml(a,u),o?e.classBindings=s:e.styleBindings=s}function IO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ga(o,e)>=0&&(t[r+1]=xg(t[r+1]))}function CD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Vi(i):ts(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];EO(u,e)&&(a=!0,n[s+1]=r?xg(l):Ag(l)),s=r?Vi(l):ts(l)}a&&(n[t+1]=r?Ag(i):xg(i))}function EO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ga(n,e)>=0:!1}function DO(n,e,t){let r=_e(),i=od();if(Li(r,i,e)){let o=_t(),s=Qg();bC(o,s,r,n,e,r[it],t,!1)}return DO}function bD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";pm(n,t,o[s],s,r)}function TO(n,e){return CO(n,e,null,!0),TO}function CO(n,e,t,r){let i=_e(),o=_t(),s=xT(2);if(o.firstUpdatePass&&SO(o,n,s,r),e!==sr&&Li(i,s,e)){let a=o.data[Bi()];NO(o,a,i,i[it],n,i[s+1]=PO(e,t),r,s)}}function bO(n,e){return e>=n.expandoStartIndex}function SO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Bi()],s=bO(n,t);kO(o,r)&&e===null&&!s&&(e=!1),e=AO(i,o,e,r),wO(i,o,e,t,s,r)}}function AO(n,e,t,r){let i=sP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=jp(null,n,e,t,r),t=qa(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=jp(i,n,e,t,r),o===null){let u=xO(n,e,r);u!==void 0&&Array.isArray(u)&&(u=jp(null,n,e,u[1],r),u=qa(u,e.attrs,r),RO(n,e,r,u))}else o=MO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function xO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ts(r)!==0)return n[Vi(r)]}function RO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Vi(i)]=r}function MO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=qa(r,s,t)}return qa(r,e.attrs,t)}function jp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=qa(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function qa(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function NO(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=_O(l)?SD(u,e,t,i,ts(l),s):void 0;if(!Kl(d)){Kl(o)||yO(l)&&(o=SD(u,null,t,i,a,s));let f=yT(Bi(),t);vk(r,s,f,i,o)}}function SD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===sr&&(g=f?Xt:void 0);let y=f?xp(g,r):d===r?g:void 0;if(l&&!Kl(y)&&(y=xp(u,r)),Kl(y)&&(a=y,s))return a;let D=n[i+1];i=s?Vi(D):ts(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=xp(u,r))}return a}function Kl(n){return n!==void 0}function PO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=xt(Qa(n)))),n}function kO(n,e){return(n.flags&(e?8:16))!==0}function OO(n,e,t,r,i,o){let s=e.consts,a=Nl(s,i),u=ld(e,n,2,r,a);return SC(e,t,u,Nl(s,o)),u.attrs!==null&&yg(u,u.attrs,!1),u.mergedAttrs!==null&&yg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ZC(n,e,t,r){let i=_e(),o=_t(),s=mn+n,a=i[it],u=o.firstCreatePass?OO(s,o,i,e,t,r):o.data[s],l=FO(o,i,u,a,e,n);i[s]=l;let d=qg(u);return Ka(u,!0),mC(a,l,u),!sO(u)&&Yg()&&dm(o,i,l,u),GN()===0&&ki(l,i),WN(),d&&(DC(o,i,u),EC(o,u,i)),r!==null&&TC(i,u),ZC}function JC(){let n=Rt();bT()?XN():(n=n.parent,Ka(n,!1));let e=n;YN(e)&&ZN(),KN();let t=_t();return t.firstCreatePass&&(Jg(t,n),hT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fP(e)&&bD(t,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pP(e)&&bD(t,e,_e(),e.stylesWithoutHost,!1),JC}function Dm(n,e,t,r){return ZC(n,e,t,r),JC(),Dm}var FO=(n,e,t,r,i,o)=>(Zg(!0),uC(r,i,cP()));function NG(){return _e()}var Ci=void 0;function LO(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var VO=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",LO],Bp={};function rn(n){let e=jO(n),t=AD(e);if(t)return t;let r=e.split("-")[0];if(t=AD(r),t)return t;if(r==="en")return VO;throw new Y(701,!1)}function AD(n){return n in Bp||(Bp[n]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[n]),Bp[n]}var ze=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ze||{});function jO(n){return n.toLowerCase().replace(/_/g,"-")}var Ql="en-US";var BO=Ql;function UO(n){typeof n=="string"&&(BO=n.toLowerCase().replace(/_/g,"-"))}var $O=(n,e,t)=>{};function Tm(n,e,t,r){let i=_e(),o=_t(),s=Rt();return XC(o,i,i[it],s,n,e,r),Tm}function HO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[xl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function XC(n,e,t,r,i,o,s){let a=qg(r),l=n.firstCreatePass&&PC(n),d=e[gn],f=NC(e),g=!0;if(r.type&3||s){let A=nn(r,e),x=s?s(A):A,F=f.length,$=s?W=>s(Pn(W[r.index])):r.index,O=null;if(!s&&a&&(O=HO(n,e,i,r.index)),O!==null){let W=O.__ngLastListenerFn__||O;W.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,g=!1}else{o=RD(r,e,d,o),$O(A,i,o);let W=t.listen(x,i,o);f.push(o,W),l&&l.push(i,$,F,F+1)}}else o=RD(r,e,d,o);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let A=D.length;if(A)for(let x=0;x<A;x+=2){let F=D[x],$=D[x+1],X=e[F][$].subscribe(o),Q=f.length;f.push(o,X),l&&l.push(i,r.index,Q,-(Q+1))}}}function xD(n,e,t,r){let i=me(null);try{return An(6,e,t),t(r)!==!1}catch(o){return kC(n,o),!1}finally{An(7,e,t),me(i)}}function RD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?jr(n.index,e):e;mm(s,5);let a=xD(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=xD(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function PG(n=1){return uP(n)}function kG(n,e,t){L1(n,e,t)}function qO(n){let e=_e(),t=_t(),r=RT();Gg(r+1);let i=_m(t,r);if(n.dirty&&$N(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=B1(e,r);n.reset(o,FP),n.notifyOnChanges()}return!0}return!1}function zO(){return O1(_e(),RT())}function GO(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function OG(n){let e=eP();return _T(e,mn+n)}function FG(n,e=""){let t=_e(),r=_t(),i=n+mn,o=r.firstCreatePass?ld(r,i,1,e,null):r.data[i],s=WO(r,t,o,e,n);t[i]=s,Yg()&&dm(r,t,s,o),Ka(o,!1)}var WO=(n,e,t,r,i)=>(Zg(!0),tk(e[it],r));function KO(n){return eb("",n,""),KO}function eb(n,e,t){let r=_e(),i=gO(r,n,e,t);return i!==sr&&OC(r,Bi(),i),eb}function QO(n,e,t,r,i){let o=_e(),s=mO(o,n,e,t,r,i);return s!==sr&&OC(o,Bi(),s),QO}function YO(n,e,t){WC(e)&&(e=e());let r=_e(),i=od();if(Li(r,i,e)){let o=_t(),s=Qg();bC(o,s,r,n,e,r[it],t,!1)}return YO}function LG(n,e){let t=WC(n);return t&&n.set(e),t}function ZO(n,e){let t=_e(),r=_t(),i=Rt();return XC(r,t,t[it],i,n,e),ZO}function JO(n,e,t){let r=_t();if(r.firstCreatePass){let i=Fr(n);Rg(t,r.data,r.blueprint,i,!0),Rg(e,r.data,r.blueprint,i,!1)}}function Rg(n,e,t,r,i){if(n=At(n),Array.isArray(n))for(let o=0;o<n.length;o++)Rg(n[o],e,t,r,i);else{let o=_t(),s=_e(),a=Rt(),u=Ko(n)?n:At(n.provide),l=uT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ko(n)||!n.multi){let y=new Ni(l,i,qe),D=$p(u,e,i?d:d+g,f);D===-1?(ng(Fl(a,s),o,u),Up(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=$p(u,e,d+g,f),D=$p(u,e,d,d+g),A=y>=0&&t[y],x=D>=0&&t[D];if(i&&!x||!i&&!A){ng(Fl(a,s),o,u);let F=tF(i?eF:XO,t.length,i,r,l);!i&&x&&(t[D].providerFactory=F),Up(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=tb(t[i?D:y],l,!i&&r);Up(o,n,y>-1?y:D,F)}!i&&r&&x&&t[D].componentProviders++}}}function Up(n,e,t,r){let i=Ko(e),o=SN(e);if(i||o){let u=(o?At(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function tb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $p(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function XO(n,e,t,r){return Mg(this.multi,[])}function eF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Pi(t,t[ae],this.providerFactory.index,r);o=a.slice(0,s),Mg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Mg(i,o);return o}function Mg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function tF(n,e,t,r,i){let o=new Ni(n,t,qe);return o.multi=[],o.index=e,o.componentProviders=0,tb(o,i,r&&!t),o}function VG(n,e=[]){return t=>{t.providersResolver=(r,i)=>JO(r,i?i(n):n,e)}}var nF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=oT(!1,t.type),i=r.length>0?hd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(L(qt))})}}return n})();function nb(n){Za("NgStandalone"),n.getStandaloneInjector=e=>e.get(nF).getOrCreateStandaloneInjector(n)}function jG(n,e,t,r,i){return rb(_e(),AT(),n,e,t,r,i)}function rF(n,e){let t=n[e];return t===sr?void 0:t}function rb(n,e,t,r,i,o,s){let a=e+t;return QC(n,a,i,o)?oO(n,a+2,s?r.call(s,i,o):r(i,o)):rF(n,a+2)}function BG(n,e){let t=_t(),r,i=n+mn;t.firstCreatePass?(r=iF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Si(r.type,!0)),s,a=Ft(qe);try{let u=Ol(!1),l=o();return Ol(u),GO(t,_e(),i,l),l}finally{Ft(a)}}function iF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function UG(n,e,t,r){let i=n+mn,o=_e(),s=_T(o,i);return oF(o,i)?rb(o,AT(),e,s.transform,t,r,s):s.transform(t,r)}function oF(n,e){return n[ae].data[e].pure}var yl=null;function sF(n){yl!==null&&(n.defaultEncapsulation!==yl.defaultEncapsulation||n.preserveWhitespaces!==yl.preserveWhitespaces)||(yl=n)}var Vr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ib=new Vr("18.2.13");var fd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Cm=new z(""),Ja=new z(""),pd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,bm||(aF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(fe),L(gd),L(Ja))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),gd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return bm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function aF(n){bm=n}var bm;function Xa(n){return!!n&&typeof n.then=="function"}function ob(n){return!!n&&typeof n.subscribe=="function"}var md=new z(""),sb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(md,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Xa(o))t.push(o);else if(ob(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sm=new z("");function uF(){DE(()=>{throw new Y(600,!1)})}function cF(n){return n.isBoundToModule}var lF=10;function dF(n,e,t){try{let r=t();return Xa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function ab(n,e){return Array.isArray(e)?e.reduce(ab,n):H(H({},n),e)}var Ur=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(kP),this.afterRenderManager=j(YC),this.zonelessEnabled=j(vm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=j(is).hasPendingTasks.pipe(ee(t=>!t)),this._injector=j(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Hl;if(!this._injector.get(sb).done){let g=!i&&tT(t),y=!1;throw new Y(405,y)}let s;i?s=t:s=this._injector.get(Jo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=cF(s)?void 0:this._injector.get(Lr),u=r||s.selector,l=s.create(tn.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(Cm,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Dl(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,me(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Xo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<lF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)hF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Dl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Sm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hF(n,e,t,r){if(!t&&!rd(n))return;VC(n,e,t&&!r?0:1)}var Ng=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},yd=(()=>{class n{compileModuleSync(t){return new Wl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=nT(t),o=aC(i.declarations).reduce((s,a)=>{let u=Or(a);return u&&s.push(new es(u)),s},[]);return new Ng(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fF=new z("");function pF(n,e,t){let r=new Wl(t);return Promise.resolve(r)}function MD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var gF=(()=>{class n{constructor(){this.zone=j(fe),this.changeDetectionScheduler=j(Zo),this.applicationRef=j(Ur)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new fe(Ce(H({},ub()),{scheduleInRootZone:t})),[{provide:fe,useFactory:n},{provide:Wo,multi:!0,useFactory:()=>{let r=j(gF,{optional:!0});return()=>r.initialize()}},{provide:Wo,multi:!0,useFactory:()=>{let r=j(yF);return()=>{r.initialize()}}},e===!0?{provide:$C,useValue:!0}:[],{provide:HC,useValue:t??KT}]}function ub(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yF=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=j(fe),this.pendingTasks=j(is)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vF=(()=>{class n{constructor(){this.appRef=j(Ur),this.taskService=j(is),this.ngZone=j(fe),this.zonelessEnabled=j(vm),this.disableScheduling=j($C,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(HC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof jl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?dD:QT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,dD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _F(){return typeof $localize<"u"&&$localize.locale||Ql}var vd=new z("",{providedIn:"root",factory:()=>j(vd,le.Optional|le.SkipSelf)||_F()});var Yl=new z("");function vl(n){return!n.moduleRef}function wF(n){let e=vl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(fe);return t.run(()=>{vl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),vl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Yl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Yl);s.add(o),n.moduleRef.onDestroy(()=>{Dl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return dF(r,t,()=>{let o=e.get(sb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(vd,Ql);if(UO(s||Ql),vl(n)){let a=e.get(Ur);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return IF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function IF(n,e){let t=n.injector.get(Ur);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var cb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>PP(r?.ngZone,Ce(H({},ub({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[mF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Zo,useExisting:vF}],u=nO(t.moduleType,this.injector,a);return wF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=ab({},r);return pF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Yl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(tn))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Va=null,lb=new z("");function EF(n){if(Va&&!Va.get(lb,!1))throw new Y(400,!1);uF(),Va=n;let e=n.get(cb);return CF(n),e}function Am(n,e,t=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=db();if(!s||s.injector.get(lb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):EF(DF(a,r))}return TF(i)}}function DF(n=[],e){return tn.create({name:e,providers:[{provide:ed,useValue:"platform"},{provide:Yl,useValue:new Set([()=>Va=null])},...n]})}function TF(n){let e=db();if(!e)throw new Y(401,!1);return e}function db(){return Va?.get(cb)??null}function CF(n){n.get(om,null)?.forEach(t=>t())}function xm(){return!1}var eu=(()=>{class n{static{this.__NG_ELEMENT_ID__=bF}}return n})();function bF(n){return SF(Rt(),_e(),(n&16)===16)}function SF(n,e,t){if(nd(n)&&!t){let r=jr(n.index,e);return new Oi(r,r)}else if(n.type&175){let r=e[Nn];return new Oi(r,e)}return null}var Pg=class{constructor(){}supports(e){return KC(e)}create(e){return new kg(e)}},AF=(n,e)=>e,kg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||AF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<ND(r,i,o)?t:r,a=ND(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;d<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!KC(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,rO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Og(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Og=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Fg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Fg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ND(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function PD(){return new Rm([new Pg])}var Rm=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:PD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PD()),deps:[[n,new jg,new ns]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();var hb=Am(null,"core",[]),fb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(Ur))}}static{this.\u0275mod=Gt({type:n})}static{this.\u0275inj=zt({})}}return n})();function tu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $G(n,e){Za("NgSignals");let t=wE(n);return e?.equal&&(t[Yn].equal=e.equal),t}function xF(n){let e=me(null);try{return n()}finally{me(e)}}function pb(n){let e=Or(n);if(!e)return null;let t=new es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ib=null;function $i(){return Ib}function Eb(n){Ib??=n}var Sd=class{};var Vt=new z(""),jm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(RF),providedIn:"platform"})}}return n})(),Db=new z(""),RF=(()=>{class n extends jm{constructor(){super(),this._doc=j(Vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $i().getBaseHref(this._doc)}onPopState(t){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Bm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function gb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ur(n){return n&&n[0]!=="?"?"?"+n:n}var lr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(Um),providedIn:"root"})}}return n})(),Tb=new z(""),Um=(()=>{class n extends lr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Bm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ur(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(jm),L(Tb,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cb=(()=>{class n extends lr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Bm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ur(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(jm),L(Tb,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),ss=(()=>{class n{constructor(t){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=PF(gb(mb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ur(r))}normalize(t){return n.stripTrailingSlash(NF(this._basePath,mb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ur(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ur(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ur}static{this.joinWithSlash=Bm}static{this.stripTrailingSlash=gb}static{this.\u0275fac=function(r){return new(r||n)(L(lr))}}static{this.\u0275prov=K({token:n,factory:()=>MF(),providedIn:"root"})}}return n})();function MF(){return new ss(L(lr))}function NF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function mb(n){return n.replace(/\/index.html$/,"")}function PF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Ae=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ae||{}),Wt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Wt||{}),$r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kF(n){return rn(n)[ze.LocaleId]}function OF(n,e,t){let r=rn(n),i=[r[ze.DayPeriodsFormat],r[ze.DayPeriodsStandalone]],o=on(i,e);return on(o,t)}function FF(n,e,t){let r=rn(n),i=[r[ze.DaysFormat],r[ze.DaysStandalone]],o=on(i,e);return on(o,t)}function LF(n,e,t){let r=rn(n),i=[r[ze.MonthsFormat],r[ze.MonthsStandalone]],o=on(i,e);return on(o,t)}function VF(n,e){let r=rn(n)[ze.Eras];return on(r,e)}function _d(n,e){let t=rn(n);return on(t[ze.DateFormat],e)}function wd(n,e){let t=rn(n);return on(t[ze.TimeFormat],e)}function Id(n,e){let r=rn(n)[ze.DateTimeFormat];return on(r,e)}function Rd(n,e){let t=rn(n),r=t[ze.NumberSymbols][e];if(typeof r>"u"){if(e===$r.CurrencyDecimal)return t[ze.NumberSymbols][$r.Decimal];if(e===$r.CurrencyGroup)return t[ze.NumberSymbols][$r.Group]}return r}function bb(n){if(!n[ze.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ze.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function jF(n){let e=rn(n);return bb(e),(e[ze.ExtraData][2]||[]).map(r=>typeof r=="string"?Mm(r):[Mm(r[0]),Mm(r[1])])}function BF(n,e,t){let r=rn(n);bb(r);let i=[r[ze.ExtraData][0],r[ze.ExtraData][1]],o=on(i,e)||[];return on(o,t)||[]}function on(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Mm(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var UF=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ed={},$F=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,cr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(cr||{}),Ee=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ee||{}),Ie=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ie||{});function HF(n,e,t,r){let i=JF(n);e=ar(t,e)||e;let s=[],a;for(;e;)if(a=$F.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=Ab(r,u),i=ZF(i,r,!0));let l="";return s.forEach(d=>{let f=QF(d);l+=f?f(i,t,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ad(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ar(n,e){let t=kF(n);if(Ed[t]??={},Ed[t][e])return Ed[t][e];let r="";switch(e){case"shortDate":r=_d(n,Wt.Short);break;case"mediumDate":r=_d(n,Wt.Medium);break;case"longDate":r=_d(n,Wt.Long);break;case"fullDate":r=_d(n,Wt.Full);break;case"shortTime":r=wd(n,Wt.Short);break;case"mediumTime":r=wd(n,Wt.Medium);break;case"longTime":r=wd(n,Wt.Long);break;case"fullTime":r=wd(n,Wt.Full);break;case"short":let i=ar(n,"shortTime"),o=ar(n,"shortDate");r=Dd(Id(n,Wt.Short),[i,o]);break;case"medium":let s=ar(n,"mediumTime"),a=ar(n,"mediumDate");r=Dd(Id(n,Wt.Medium),[s,a]);break;case"long":let u=ar(n,"longTime"),l=ar(n,"longDate");r=Dd(Id(n,Wt.Long),[u,l]);break;case"full":let d=ar(n,"fullTime"),f=ar(n,"fullDate");r=Dd(Id(n,Wt.Full),[d,f]);break}return r&&(Ed[t][e]=r),r}function Dd(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function vn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function qF(n,e){return vn(n,3).substring(0,e)}function Ze(n,e,t=0,r=!1,i=!1){return function(o,s){let a=zF(n,o);if((t>0||a>-t)&&(a+=t),n===Ee.Hours)a===0&&t===-12&&(a=12);else if(n===Ee.FractionalSeconds)return qF(a,e);let u=Rd(s,$r.MinusSign);return vn(a,e,u,r,i)}}function zF(n,e){switch(n){case Ee.FullYear:return e.getFullYear();case Ee.Month:return e.getMonth();case Ee.Date:return e.getDate();case Ee.Hours:return e.getHours();case Ee.Minutes:return e.getMinutes();case Ee.Seconds:return e.getSeconds();case Ee.FractionalSeconds:return e.getMilliseconds();case Ee.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Re(n,e,t=Mt.Format,r=!1){return function(i,o){return GF(i,o,n,e,t,r)}}function GF(n,e,t,r,i,o){switch(t){case Ie.Months:return LF(e,i,r)[n.getMonth()];case Ie.Days:return FF(e,i,r)[n.getDay()];case Ie.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=jF(e),d=BF(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,A=s>=y.hours&&a>=y.minutes,x=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(A&&x)return!0}else if(A||x)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return OF(e,i,r)[s<12?0:1];case Ie.Eras:return VF(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Td(n){return function(e,t,r){let i=-1*r,o=Rd(t,$r.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case cr.Short:return(i>=0?"+":"")+vn(s,2,o)+vn(Math.abs(i%60),2,o);case cr.ShortGMT:return"GMT"+(i>=0?"+":"")+vn(s,1,o);case cr.Long:return"GMT"+(i>=0?"+":"")+vn(s,2,o)+":"+vn(Math.abs(i%60),2,o);case cr.Extended:return r===0?"Z":(i>=0?"+":"")+vn(s,2,o)+":"+vn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var WF=0,bd=4;function KF(n){let e=Ad(n,WF,1).getDay();return Ad(n,0,1+(e<=bd?bd:bd+7)-e)}function Sb(n){let e=n.getDay(),t=e===0?-3:bd-e;return Ad(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Nm(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Sb(t),s=KF(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return vn(i,n,Rd(r,$r.MinusSign))}}function Cd(n,e=!1){return function(t,r){let o=Sb(t).getFullYear();return vn(o,n,Rd(r,$r.MinusSign),e)}}var Pm={};function QF(n){if(Pm[n])return Pm[n];let e;switch(n){case"G":case"GG":case"GGG":e=Re(Ie.Eras,Ae.Abbreviated);break;case"GGGG":e=Re(Ie.Eras,Ae.Wide);break;case"GGGGG":e=Re(Ie.Eras,Ae.Narrow);break;case"y":e=Ze(Ee.FullYear,1,0,!1,!0);break;case"yy":e=Ze(Ee.FullYear,2,0,!0,!0);break;case"yyy":e=Ze(Ee.FullYear,3,0,!1,!0);break;case"yyyy":e=Ze(Ee.FullYear,4,0,!1,!0);break;case"Y":e=Cd(1);break;case"YY":e=Cd(2,!0);break;case"YYY":e=Cd(3);break;case"YYYY":e=Cd(4);break;case"M":case"L":e=Ze(Ee.Month,1,1);break;case"MM":case"LL":e=Ze(Ee.Month,2,1);break;case"MMM":e=Re(Ie.Months,Ae.Abbreviated);break;case"MMMM":e=Re(Ie.Months,Ae.Wide);break;case"MMMMM":e=Re(Ie.Months,Ae.Narrow);break;case"LLL":e=Re(Ie.Months,Ae.Abbreviated,Mt.Standalone);break;case"LLLL":e=Re(Ie.Months,Ae.Wide,Mt.Standalone);break;case"LLLLL":e=Re(Ie.Months,Ae.Narrow,Mt.Standalone);break;case"w":e=Nm(1);break;case"ww":e=Nm(2);break;case"W":e=Nm(1,!0);break;case"d":e=Ze(Ee.Date,1);break;case"dd":e=Ze(Ee.Date,2);break;case"c":case"cc":e=Ze(Ee.Day,1);break;case"ccc":e=Re(Ie.Days,Ae.Abbreviated,Mt.Standalone);break;case"cccc":e=Re(Ie.Days,Ae.Wide,Mt.Standalone);break;case"ccccc":e=Re(Ie.Days,Ae.Narrow,Mt.Standalone);break;case"cccccc":e=Re(Ie.Days,Ae.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=Re(Ie.Days,Ae.Abbreviated);break;case"EEEE":e=Re(Ie.Days,Ae.Wide);break;case"EEEEE":e=Re(Ie.Days,Ae.Narrow);break;case"EEEEEE":e=Re(Ie.Days,Ae.Short);break;case"a":case"aa":case"aaa":e=Re(Ie.DayPeriods,Ae.Abbreviated);break;case"aaaa":e=Re(Ie.DayPeriods,Ae.Wide);break;case"aaaaa":e=Re(Ie.DayPeriods,Ae.Narrow);break;case"b":case"bb":case"bbb":e=Re(Ie.DayPeriods,Ae.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=Re(Ie.DayPeriods,Ae.Wide,Mt.Standalone,!0);break;case"bbbbb":e=Re(Ie.DayPeriods,Ae.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Re(Ie.DayPeriods,Ae.Abbreviated,Mt.Format,!0);break;case"BBBB":e=Re(Ie.DayPeriods,Ae.Wide,Mt.Format,!0);break;case"BBBBB":e=Re(Ie.DayPeriods,Ae.Narrow,Mt.Format,!0);break;case"h":e=Ze(Ee.Hours,1,-12);break;case"hh":e=Ze(Ee.Hours,2,-12);break;case"H":e=Ze(Ee.Hours,1);break;case"HH":e=Ze(Ee.Hours,2);break;case"m":e=Ze(Ee.Minutes,1);break;case"mm":e=Ze(Ee.Minutes,2);break;case"s":e=Ze(Ee.Seconds,1);break;case"ss":e=Ze(Ee.Seconds,2);break;case"S":e=Ze(Ee.FractionalSeconds,1);break;case"SS":e=Ze(Ee.FractionalSeconds,2);break;case"SSS":e=Ze(Ee.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Td(cr.Short);break;case"ZZZZZ":e=Td(cr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Td(cr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Td(cr.Long);break;default:return null}return Pm[n]=e,e}function Ab(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function YF(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function ZF(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Ab(e,i);return YF(n,r*(o-i))}function JF(n){if(yb(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Ad(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(UF))return XF(r)}let e=new Date(n);if(!yb(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function XF(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function yb(n){return n instanceof Date&&!isNaN(n.valueOf())}function xb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var km=/\s+/,vb=[],h8=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=vb,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(km):vb}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(km):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(km).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(qe(or),qe(Ya))}}static{this.\u0275dir=ji({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Om=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},f8=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Om(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),_b(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);_b(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(Br),qe(Fi),qe(Rm))}}static{this.\u0275dir=ji({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function _b(n,e){n.context.$implicit=e.item}var p8=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Fm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(qe(Br),qe(Fi))}}static{this.\u0275dir=ji({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Fm=class{constructor(){this.$implicit=null,this.ngIf=null}};function wb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${xt(e)}'.`)}function eL(n,e){return new Y(2100,!1)}var tL="mediumDate",nL=new z(""),rL=new z(""),g8=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??tL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return HF(t,s,o||this.locale,a)}catch(s){throw eL(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(qe(vd,16),qe(nL,24),qe(rL,24))}}static{this.\u0275pipe=JD({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Rb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Gt({type:n})}static{this.\u0275inj=zt({})}}return n})(),$m="browser",iL="server";function oL(n){return n===$m}function Hi(n){return n===iL}var Mb=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>oL(j(Lt))?new Lm(j(Vt),window):new Vm})}}return n})(),Lm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=sL(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function sL(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},xd=class{};var zm=class extends Sd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gm=class n extends zm{static makeCurrent(){Eb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=cL();return t==null?null:lL(t)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xb(document.cookie,e)}},nu=null;function cL(){return nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null}function lL(n){return new URL(n,document.baseURI).pathname}var Wm=class{addToWindow(e){St.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Y(5103,!1);return o},St.getAllAngularTestabilities=()=>e.getAllTestabilities(),St.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=St.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?$i().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},dL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Km=new z(""),Ob=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(Km),L(fe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Md=class{constructor(e){this._doc=e}},Hm="ng-app-id",Fb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Hm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Hm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Hm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Vt),L(sd),L(sm,8),L(Lt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ym=/%COMP%/g,Lb="%COMP%",hL=`_nghost-${Lb}`,fL=`_ngcontent-${Lb}`,pL=!0,gL=new z("",{providedIn:"root",factory:()=>pL});function mL(n){return fL.replace(Ym,n)}function yL(n){return hL.replace(Ym,n)}function Vb(n,e){return e.map(t=>t.replace(Ym,n))}var Nb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Hi(a),this.defaultRenderer=new ru(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=Ce(H({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Nd?i.applyToHost(t):i instanceof iu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Rn.Emulated:o=new Nd(u,l,r,this.appId,d,s,a,f);break;case Rn.ShadowDom:return new Qm(u,l,t,r,s,a,this.nonce,f);default:o=new iu(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(Ob),L(Fb),L(sd),L(gL),L(Vt),L(Lt),L(fe),L(sm))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),ru=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Pb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=qm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=qm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(nr.DashCase|nr.Important)?e.style.setProperty(t,r,i&nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=$i().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Pb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qm=class extends ru{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Vb(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},iu=class extends ru{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Vb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Nd=class extends iu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=mL(l),this.hostAttr=yL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},vL=(()=>{class n extends Md{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),kb=["alt","control","meta","shift"],_L={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},IL=(()=>{class n extends Md{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$i().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),kb.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=_L[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),kb.forEach(s=>{if(s!==i){let a=wL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function EL(){Gm.makeCurrent()}function DL(){return new tr}function TL(){return nC(document),document}var CL=[{provide:Lt,useValue:$m},{provide:om,useValue:EL,multi:!0},{provide:Vt,useFactory:TL,deps:[]}],O8=Am(hb,"browser",CL),bL=new z(""),SL=[{provide:Ja,useClass:Wm,deps:[]},{provide:Cm,useClass:pd,deps:[fe,gd,Ja]},{provide:pd,useClass:pd,deps:[fe,gd,Ja]}],AL=[{provide:ed,useValue:"root"},{provide:tr,useFactory:DL,deps:[]},{provide:Km,useClass:vL,multi:!0,deps:[Vt,fe,Lt]},{provide:Km,useClass:IL,multi:!0,deps:[Vt]},Nb,Fb,Ob,{provide:Xo,useExisting:Nb},{provide:xd,useClass:dL,deps:[]},[]],F8=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:sd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(bL,12))}}static{this.\u0275mod=Gt({type:n})}static{this.\u0275inj=zt({providers:[...AL,...SL],imports:[Rb,fb]})}}return n})();var jb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ue="primary",vu=Symbol("RouteTitle"),ty=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function hs(n){return new ty(n)}function RL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ML(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!On(n[t],e[t]))return!1;return!0}function On(n,e){let t=n?ny(n):void 0,r=e?ny(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Yb(n[i],e[i]))return!1;return!0}function ny(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Yb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Zb(n){return n.length>0?n[n.length-1]:null}function zr(n){return Ep(n)?n:Xa(n)?we(Promise.resolve(n)):J(n)}var NL={exact:Xb,subset:e0},Jb={exact:PL,subset:kL,ignored:()=>!0};function Bb(n,e,t){return NL[t.paths](n.root,e.root,t.matrixParams)&&Jb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function PL(n,e){return On(n,e)}function Xb(n,e,t){if(!zi(n.segments,e.segments)||!Od(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Xb(n.children[r],e.children[r],t))return!1;return!0}function kL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yb(n[t],e[t]))}function e0(n,e,t){return t0(n,e,e.segments,t)}function t0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!zi(i,t)||e.hasChildren()||!Od(i,t,r))}else if(n.segments.length===t.length){if(!zi(n.segments,t)||!Od(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!e0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!zi(n.segments,i)||!Od(n.segments,i,r)||!n.children[ue]?!1:t0(n.children[ue],e,o,r)}}function Od(n,e,t){return e.every((r,i)=>Jb[t](n[i].parameters,r.parameters))}var hr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=hs(this.queryParams),this._queryParamMap}toString(){return LL.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fd(this)}},qi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=hs(this.parameters),this._parameterMap}toString(){return r0(this)}};function OL(n,e){return zi(n,e)&&n.every((t,r)=>On(t.parameters,e[r].parameters))}function zi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function FL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var _u=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new fs,providedIn:"root"})}}return n})(),fs=class{parse(e){let t=new iy(e);return new hr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ou(e.root,!0)}`,r=BL(e.queryParams),i=typeof e.fragment=="string"?`#${VL(e.fragment)}`:"";return`${t}${r}${i}`}},LL=new fs;function Fd(n){return n.segments.map(e=>r0(e)).join("/")}function ou(n,e){if(!n.hasChildren())return Fd(n);if(e){let t=n.children[ue]?ou(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${ou(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=FL(n,(r,i)=>i===ue?[ou(n.children[ue],!1)]:[`${i}:${ou(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${Fd(n)}/${t[0]}`:`${Fd(n)}/(${t.join("//")})`}}function n0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(n){return n0(n).replace(/%3B/gi,";")}function VL(n){return encodeURI(n)}function ry(n){return n0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ld(n){return decodeURIComponent(n)}function Ub(n){return Ld(n.replace(/\+/g,"%20"))}function r0(n){return`${ry(n.path)}${jL(n.parameters)}`}function jL(n){return Object.entries(n).map(([e,t])=>`;${ry(e)}=${ry(t)}`).join("")}function BL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pd(t)}=${Pd(i)}`).join("&"):`${Pd(t)}=${Pd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var UL=/^[^\/()?;#]+/;function Zm(n){let e=n.match(UL);return e?e[0]:""}var $L=/^[^\/()?;=#]+/;function HL(n){let e=n.match($L);return e?e[0]:""}var qL=/^[^=?&#]+/;function zL(n){let e=n.match(qL);return e?e[0]:""}var GL=/^[^&#]+/;function WL(n){let e=n.match(GL);return e?e[0]:""}var iy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new De(e,t)),r}parseSegment(){let e=Zm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new qi(Ld(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=HL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Zm(this.remaining);i&&(r=i,this.capture(r))}e[Ld(t)]=Ld(r)}parseQueryParam(e){let t=zL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=WL(this.remaining);s&&(r=s,this.capture(r))}let i=Ub(t),o=Ub(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Zm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function i0(n){return n.segments.length>0?new De([],{[ue]:n}):n}function o0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=o0(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return KL(t)}function KL(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new De(n.segments.concat(e.segments),e.children)}return n}function Gi(n){return n instanceof hr}function QL(n,e,t=null,r=null){let i=s0(n);return a0(i,e,t,r)}function s0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=i0(r);return e??i}function a0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jm(i,i,i,t,r);let o=YL(e);if(o.toRoot())return Jm(i,i,new De([],{}),t,r);let s=ZL(o,i,n),a=s.processChildren?uu(s.segmentGroup,s.index,o.commands):c0(s.segmentGroup,s.index,o.commands);return Jm(i,s.segmentGroup,a,t,r)}function Vd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function du(n){return typeof n=="object"&&n!=null&&n.outlets}function Jm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=u0(n,e,t);let a=i0(o0(s));return new hr(a,o,i)}function u0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=u0(o,e,t)}),new De(n.segments,r)}var jd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vd(r[0]))throw new Y(4003,!1);let i=r.find(du);if(i&&i!==Zb(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function YL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new jd(t,e,r)}var cs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function ZL(n,e,t){if(n.isAbsolute)return new cs(e,!0,0);if(!t)return new cs(e,!1,NaN);if(t.parent===null)return new cs(t,!0,0);let r=Vd(n.commands[0])?0:1,i=t.segments.length-1+r;return JL(t,i,n.numberOfDoubleDots)}function JL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new cs(r,!1,i-o)}function XL(n){return du(n[0])?n[0].outlets:{[ue]:n}}function c0(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return uu(n,e,t);let r=eV(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new De(n.segments.slice(r.pathIndex),n.children),uu(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?oy(n,e,t):r.match?uu(n,0,i):oy(n,e,t)}function uu(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=XL(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=uu(n.children[ue],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=c0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function eV(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(du(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Hb(u,l,s))return o;r+=2}else{if(!Hb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function oy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(du(o)){let u=tV(o.outlets);return new De(r,u)}if(i===0&&Vd(t[0])){let u=n.segments[e];r.push(new qi(u.path,$b(t[0]))),i++;continue}let s=du(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Vd(a)?(r.push(new qi(s,$b(a))),i+=2):(r.push(new qi(s,{})),i++)}return new De(r,{})}function tV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=oy(new De([],{}),0,r))}),e}function $b(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Hb(n,e,t){return n==t.path&&On(e,t.parameters)}var cu="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),sn=class{constructor(e,t){this.id=e,this.url=t}},ps=class extends sn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fn=class extends sn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),Bd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Bd||{}),dr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hr=class extends sn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},hu=class extends sn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ud=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ay=class extends sn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},uy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cy=class extends sn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ly=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dy=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hy=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fy=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},py=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gy=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$d=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},fu=class{},gs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function nV(n,e){return n.providers&&!n._injector&&(n._injector=hd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _n(n){return n.outlet||ue}function rV(n,e){let t=n.filter(r=>_n(r)===e);return t.push(...n.filter(r=>_n(r)!==e)),t}function wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var my=class{get injector(){return wu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Iu(this.rootInjector),this.attachRef=null}},Iu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new my(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(qt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=yy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=yy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vy(e,this._root).map(t=>t.value)}};function yy(n,e){if(n===e.value)return e;for(let t of e.children){let r=yy(n,t);if(r)return r}return null}function vy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vy(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function us(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qd=class extends Hd{constructor(e,t){super(e),this.snapshot=t,Sy(this,e)}toString(){return this.snapshot.toString()}};function l0(n){let e=iV(n),t=new ct([new qi("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Wi(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new qd(new Kt(a,[]),e)}function iV(n){let e={},t={},r={},i="",o=new ls([],e,r,i,t,ue,n,null,{});return new Gd("",new Kt(o,[]))}var Wi=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[vu]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>hs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>hs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&h0(i)&&(r.resolve[vu]=i.title),r}var ls=class{get title(){return this.data?.[vu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gd=class extends Hd{constructor(e,t){super(t),this.url=e,Sy(this,t)}toString(){return d0(this._root)}};function Sy(n,e){e.value._routerState=n,e.children.forEach(t=>Sy(n,t))}function d0(n){let e=n.children.length>0?` { ${n.children.map(d0).join(", ")} } `:"";return`${n.value}${e}`}function Xm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,On(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),On(e.params,t.params)||n.paramsSubject.next(t.params),ML(e.url,t.url)||n.urlSubject.next(t.url),On(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _y(n,e){let t=On(n.params,e.params)&&OL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_y(n.parent,e.parent))}function h0(n){return typeof n.title=="string"||n.title===null}var oV=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=j(Iu),this.location=j(Br),this.changeDetector=j(eu),this.inputBinder=j(Zd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new wy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ji({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wa]})}}return n})(),wy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wi?this.route:e===Iu?this.childContexts:this.parent.get(e,t)}},Zd=new z(""),qb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Pa([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],u)=>(a=H(H(H({},o),s),a),u===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=pb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function sV(n,e,t){let r=pu(n,e._root,t?t._root:void 0);return new qd(r,e)}function pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=aV(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pu(n,a)),s}}let r=uV(e.value),i=e.children.map(o=>pu(n,o));return new Kt(r,i)}}function aV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return pu(n,r,i);return pu(n,r)})}function uV(n){return new Wi(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var gu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},f0="ngNavigationCancelingError";function Wd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=p0(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function p0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[f0]=!0,t.cancellationCode=e,t}function cV(n){return g0(n)&&Gi(n.url)}function g0(n){return!!n&&n[f0]}var lV=(n,e,t,r)=>ee(i=>(new Iy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Iy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=us(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=us(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=us(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new gy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new fy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Xm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Kd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ds=class{constructor(e,t){this.component=e,this.route=t}};function dV(n,e,t){let r=n._root,i=e?e._root:null;return su(r,i,t,[r.value])}function hV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ys(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!VD(n)?n:e.get(n):r}function su(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=us(e);return n.children.forEach(s=>{fV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lu(a,t.getContext(s),i)),i}function fV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=pV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Kd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?su(n,e,a?a.children:null,r,i):su(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ds(a.outlet.component,s))}else s&&lu(e,a,i),i.canActivateChecks.push(new Kd(r)),o.component?su(n,null,a?a.children:null,r,i):su(n,null,t,r,i);return i}function pV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!zi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zi(n.url,e.url)||!On(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_y(n,e)||!On(n.queryParams,e.queryParams);case"paramsChange":default:return!_y(n,e)}}function lu(n,e,t){let r=us(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lu(s,e.children.getContext(o),t):lu(s,null,t):lu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ds(e.outlet.component,i)):t.canDeactivateChecks.push(new ds(null,i)):t.canDeactivateChecks.push(new ds(null,i))}function Eu(n){return typeof n=="function"}function gV(n){return typeof n=="boolean"}function mV(n){return n&&Eu(n.canLoad)}function yV(n){return n&&Eu(n.canActivate)}function vV(n){return n&&Eu(n.canActivateChild)}function _V(n){return n&&Eu(n.canDeactivate)}function wV(n){return n&&Eu(n.canMatch)}function m0(n){return n instanceof Jn||n?.name==="EmptyError"}var kd=Symbol("INITIAL_VALUE");function ms(){return $e(n=>Pa(n.map(e=>e.pipe(Xn(1),Ti(kd)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===kd)return kd;if(t===!1||IV(t))return t}return!0}),lt(e=>e!==kd),Xn(1)))}function IV(n){return Gi(n)||n instanceof gu}function EV(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(Ce(H({},t),{guardsResult:!0})):DV(s,r,i,n).pipe(Ye(a=>a&&gV(a)?TV(r,o,n,e):J(a)),ee(a=>Ce(H({},t),{guardsResult:a})))})}function DV(n,e,t,r){return we(n).pipe(Ye(i=>xV(i.component,i.route,t,e,r)),Jt(i=>i!==!0,!0))}function TV(n,e,t,r){return we(e).pipe(Ei(i=>Lo(bV(i.route.parent,r),CV(i.route,r),AV(n,i.path,t),SV(n,i.route,t))),Jt(i=>i!==!0,!0))}function CV(n,e){return n!==null&&e&&e(new py(n)),J(!0)}function bV(n,e){return n!==null&&e&&e(new hy(n)),J(!0)}function SV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>cl(()=>{let s=wu(e)??t,a=ys(o,s),u=yV(a)?a.canActivate(e,n):kn(s,()=>a(e,n));return zr(u).pipe(Jt())}));return J(i).pipe(ms())}function AV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hV(s)).filter(s=>s!==null).map(s=>cl(()=>{let a=s.guards.map(u=>{let l=wu(s.node)??t,d=ys(u,l),f=vV(d)?d.canActivateChild(r,n):kn(l,()=>d(r,n));return zr(f).pipe(Jt())});return J(a).pipe(ms())}));return J(o).pipe(ms())}function xV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let u=wu(e)??i,l=ys(a,u),d=_V(l)?l.canDeactivate(n,e,t,r):kn(u,()=>l(n,e,t,r));return zr(d).pipe(Jt())});return J(s).pipe(ms())}function RV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=ys(s,n),u=mV(a)?a.canLoad(e,t):kn(n,()=>a(e,t));return zr(u)});return J(o).pipe(ms(),y0(r))}function y0(n){return mp(rt(e=>{if(typeof e!="boolean")throw Wd(n,e)}),ee(e=>e===!0))}function MV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=ys(s,n),u=wV(a)?a.canMatch(e,t):kn(n,()=>a(e,t));return zr(u)});return J(o).pipe(ms(),y0(r))}var mu=class{constructor(e){this.segmentGroup=e||null}},yu=class extends Error{constructor(e){super(),this.urlTree=e}};function as(n){return Fo(new mu(n))}function NV(n){return Fo(new Y(4e3,!1))}function PV(n){return Fo(p0(!1,Qt.GuardRejected))}var Ey=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[ue])return NV(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:D,title:A}=i,x=kn(o,()=>a({params:y,data:D,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:A}));if(x instanceof hr)throw new yu(x);t=x}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new yu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new hr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kV(n,e,t,r,i){let o=v0(n,e,t);return o.matched?(r=nV(e,r),MV(r,e,t,i).pipe(ee(s=>s===!0?o:H({},Dy)))):J(o)}function v0(n,e,t){if(e.path==="**")return OV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},Dy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||RL)(t,n,e);if(!i)return H({},Dy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function OV(n){return{matched:!0,parameters:n.length>0?Zb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function zb(n,e,t,r){return t.length>0&&VV(n,t,r)?{segmentGroup:new De(e,LV(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&jV(n,t,r)?{segmentGroup:new De(n.segments,FV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function FV(n,e,t,r){let i={};for(let o of t)if(Jd(n,e,o)&&!r[_n(o)]){let s=new De([],{});i[_n(o)]=s}return H(H({},r),i)}function LV(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&_n(r)!==ue){let i=new De([],{});t[_n(r)]=i}return t}function VV(n,e,t){return t.some(r=>Jd(n,e,r)&&_n(r)!==ue)}function jV(n,e,t){return t.some(r=>Jd(n,e,r))}function Jd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function BV(n,e,t){return e.length===0&&!n.children[t]}var Ty=class{};function UV(n,e,t,r,i,o,s="emptyOnly"){return new Cy(n,e,t,r,i,s,o).recognize()}var $V=31,Cy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ey(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=zb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Gd("",i),s=QL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ls([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(ee(r=>({children:r,rootSnapshot:t})),xr(r=>{if(r instanceof yu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(Ei(s=>{let a=r.children[s],u=rV(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Di((s,a)=>(s.push(...a),s)),Rr(null),bp(),Ye(s=>{if(s===null)return as(r);let a=_0(s);return HV(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(Ei(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(xr(l=>{if(l instanceof mu)return J(null);throw l}))),Jt(u=>!!u),xr(u=>{if(m0(u))return BV(r,i,o)?J(new Ty):as(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return _n(r)!==s&&(s===ue||!Jd(i,o,r))?as(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):as(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=v0(t,i,o);if(!u)return as(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$V&&(this.allowRedirects=!1));let y=new ls(o,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(i),_n(i),i.component??i._loadedComponent??null,i,Wb(i)),D=zd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let A=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Ye(x=>this.processSegment(e,r,t,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=kV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,D=new ls(g,f,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Gb(r),_n(r),r.component??r._loadedComponent??null,r,Wb(r)),A=zd(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(A.params),D.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:F}=zb(t,g,y,l);if(F.length===0&&x.hasChildren())return this.processChildren(d,l,x,D).pipe(ee(O=>new Kt(D,O)));if(l.length===0&&F.length===0)return J(new Kt(D,[]));let $=_n(r)===o;return this.processSegment(d,l,x,F,$?ue:o,!0,D).pipe(ee(O=>new Kt(D,O instanceof Kt?[O]:[])))}))):as(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):RV(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):PV(t))):J({routes:[],injector:e})}};function HV(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function qV(n){let e=n.value.routeConfig;return e&&e.path===""}function _0(n){let e=[],t=new Set;for(let r of n){if(!qV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=_0(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function Gb(n){return n.data||{}}function Wb(n){return n.resolve||{}}function zV(n,e,t,r,i,o){return Ye(s=>UV(n,e,t,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:u})=>Ce(H({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function GV(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of w0(u))s.add(l);let a=0;return we(s).pipe(Ei(u=>o.has(u)?WV(u,r,n,e):(u.data=zd(u,u.parent,n).resolve,J(void 0))),rt(()=>a++),Vo(1),Ye(u=>a===s.size?J(t):bt))})}function w0(n){let e=n.children.map(t=>w0(t)).flat();return[n,...e]}function WV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!h0(i)&&(o[vu]=i.title),KV(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=zd(n,n.parent,t).resolve,null)))}function KV(n,e,t,r){let i=ny(n);if(i.length===0)return J({});let o={};return we(i).pipe(Ye(s=>QV(n[s],e,t,r).pipe(Jt(),rt(a=>{if(a instanceof gu)throw Wd(new fs,a);o[s]=a}))),Vo(1),Tp(o),xr(s=>m0(s)?bt:Fo(s)))}function QV(n,e,t,r){let i=wu(e)??r,o=ys(n,i),s=o.resolve?o.resolve(e,t):kn(i,()=>o(e,t));return zr(s)}function ey(n){return $e(e=>{let t=n(e);return t?we(t).pipe(ee(()=>e)):J(e)})}var I0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[vu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(YV),providedIn:"root"})}}return n})(),YV=(()=>{class n extends I0{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(jb))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Du=new z("",{providedIn:"root",factory:()=>({})}),ZV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ZD({type:n,selectors:[["ng-component"]],standalone:!0,features:[nb],decls:1,vars:0,template:function(r,i){r&1&&Dm(0,"router-outlet")},dependencies:[oV],encapsulation:2})}}return n})();function Ay(n){let e=n.children&&n.children.map(Ay),t=e?Ce(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=ZV),t}var Qd=new z(""),xy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(yd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=zr(t.loadComponent()).pipe(ee(E0),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ka(()=>{this.componentLoaders.delete(t)})),i=new No(r,()=>new Ue).pipe(Mo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=JV(r,this.compiler,t,this.onLoadEndListener).pipe(ka(()=>{this.childrenLoaders.delete(r)})),s=new No(o,()=>new Ue).pipe(Mo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JV(n,e,t,r){return zr(n.loadChildren()).pipe(ee(E0),Ye(i=>i instanceof Ha||Array.isArray(i)?J(i):we(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Qd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ay),injector:o}}))}function XV(n){return n&&typeof n=="object"&&"default"in n}function E0(n){return XV(n)?n.default:n}var Ry=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(e2),providedIn:"root"})}}return n})(),e2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),D0=new z(""),T0=new z("");function t2(n,e,t){let r=n.get(T0),i=n.get(Vt);return n.get(fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),n2(n))),{onViewTransitionCreated:u}=r;return u&&kn(n,()=>u({transition:a,from:e,to:t})),s})}function n2(n){return new Promise(e=>{Im({read:()=>setTimeout(e)},{injector:n})})}var r2=new z(""),My=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=j(xy),this.environmentInjector=j(qt),this.urlSerializer=j(_u),this.rootContexts=j(Iu),this.location=j(ss),this.inputBindingEnabled=j(Zd,{optional:!0})!==null,this.titleStrategy=j(I0),this.options=j(Du,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Ry),this.createViewTransition=j(D0,{optional:!0}),this.navigationErrorHandler=j(r2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ly(i)),r=i=>this.events.next(new dy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ce(H(H({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),ee(o=>Ce(H({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return J(o).pipe($e(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),bt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Hr(u.id,this.urlSerializer.serialize(u.rawUrl),f,Bd.IgnoredSameUrlNavigation)),u.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe($e(f=>{let g=this.transitions?.getValue();return this.events.next(new ps(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?bt:Promise.resolve(f)}),zV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ce(H({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Ud(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:D,extras:A}=u,x=new ps(f,this.urlSerializer.serialize(g),y,D);this.events.next(x);let F=l0(this.rootComponentType).snapshot;return this.currentTransition=o=Ce(H({},u),{targetSnapshot:F,urlAfterRedirects:g,extras:Ce(H({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,J(o)}else{let f="";return this.events.next(new Hr(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Bd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),bt}}),rt(u=>{let l=new sy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ee(u=>(this.currentTransition=o=Ce(H({},u),{guards:dV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),EV(this.environmentInjector,u=>this.events.next(u)),rt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Wd(this.urlSerializer,u.guardsResult);let l=new ay(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Qt.GuardRejected),!1)),ey(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(rt(l=>{let d=new uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),$e(l=>{let d=!1;return J(l).pipe(GV(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Qt.NoDataFromResolver)}}))}),rt(l=>{let d=new cy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),ey(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(rt(g=>{d.component=g}),ee(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Pa(l(u.targetSnapshot.root)).pipe(Rr(null),Xn(1))}),ey(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?we(d).pipe(ee(()=>o)):J(o)}),ee(u=>{let l=sV(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Ce(H({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),rt(()=>{this.events.next(new fu)}),lV(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Xn(1),rt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Ap(this.transitionAbortSubject.pipe(rt(u=>{throw u}))),ka(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),xr(u=>{if(a=!0,g0(u))this.events.next(new dr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),cV(u)?this.events.next(new gs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new hu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=kn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof gu){let{message:f,cancellationCode:g}=Wd(this.urlSerializer,d);this.events.next(new dr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new gs(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return bt}))}))}cancelNavigationTransition(t,r,i){let o=new dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i2(n){return n!==cu}var o2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(s2),providedIn:"root"})}}return n})(),by=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},s2=(()=>{class n extends by{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=em(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),C0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>j(a2),providedIn:"root"})}}return n})(),a2=(()=>{class n extends C0{constructor(){super(...arguments),this.location=j(ss),this.urlSerializer=j(_u),this.options=j(Du,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Ry),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=l0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ps)this.stateMemento=this.createStateMemento();else if(t instanceof Hr)this.rawUrlTree=r.initialUrl;else if(t instanceof Ud){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof fu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof dr&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof hu?this.restoreHistory(r,!0):t instanceof Fn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof hr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=H(H({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=H(H({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=em(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),au=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(au||{});function b0(n,e){n.events.pipe(lt(t=>t instanceof Fn||t instanceof dr||t instanceof hu||t instanceof Hr),ee(t=>t instanceof Fn||t instanceof Hr?au.COMPLETE:(t instanceof dr?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?au.REDIRECTING:au.FAILED),lt(t=>t!==au.REDIRECTING),Xn(1)).subscribe(()=>{e()})}function u2(n){throw n}var c2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},l2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(fd),this.stateManager=j(C0),this.options=j(Du,{optional:!0})||{},this.pendingTasks=j(is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(My),this.urlSerializer=j(_u),this.location=j(ss),this.urlHandlingStrategy=j(Ry),this._events=new Ue,this.errorHandler=this.options.errorHandler||u2,this.navigated=!1,this.routeReuseStrategy=j(o2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Qd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Zd,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof dr&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fn)this.navigated=!0;else if(r instanceof gs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||i2(i.source)},s);this.scheduleNavigation(a,cu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}h2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=H({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ay),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=s0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return a0(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cu,null,r)}navigate(t,r={skipLocationChange:!1}){return d2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},c2):r===!1?i=H({},l2):i=r,Gi(t))return Bb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Bb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return b0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function d2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function h2(n){return!(n instanceof fu)&&!(n instanceof gs)}var t3=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:oC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(qe(qr),qe(Wi),tm("tabindex"),qe(Ya),qe(or),qe(lr))}}static{this.\u0275dir=ji({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Tm("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Em("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",tu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",tu],replaceUrl:[2,"replaceUrl","replaceUrl",tu],routerLink:"routerLink"},standalone:!0,features:[wm,Wa]})}}return n})();var Yd=class{};var f2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof Fn),Ei(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=hd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Ar())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Ye(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return we([o,s]).pipe(Ar())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(qr),L(yd),L(qt),L(Yd),L(xy))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),S0=new z(""),p2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ps?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Hr&&t.code===Bd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $d&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $d(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){vC()}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function g2(n){return n.routerState.root}function Tu(n,e){return{\u0275kind:n,\u0275providers:e}}function m2(){let n=j(tn);return e=>{let t=n.get(Ur);if(e!==t.components[0])return;let r=n.get(qr),i=n.get(A0);n.get(Ny)===1&&r.initialNavigation(),n.get(x0,null,le.Optional)?.setUpPreloading(),n.get(S0,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var A0=new z("",{factory:()=>new Ue}),Ny=new z("",{providedIn:"root",factory:()=>1});function y2(){return Tu(2,[{provide:Ny,useValue:0},{provide:md,multi:!0,deps:[tn],useFactory:e=>{let t=e.get(Db,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(qr),o=e.get(A0);b0(i,()=>{r(!0)}),e.get(My).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function v2(){return Tu(3,[{provide:md,multi:!0,useFactory:()=>{let e=j(qr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ny,useValue:2}])}var x0=new z("");function _2(n){return Tu(0,[{provide:x0,useExisting:f2},{provide:Yd,useExisting:n}])}function w2(){return Tu(8,[qb,{provide:Zd,useExisting:qb}])}function I2(n){let e=[{provide:D0,useValue:t2},{provide:T0,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return Tu(9,e)}var Kb=new z("ROUTER_FORROOT_GUARD"),E2=[ss,{provide:_u,useClass:fs},qr,Iu,{provide:Wi,useFactory:g2,deps:[qr]},xy,[]],n3=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[E2,[],{provide:Qd,multi:!0,useValue:t},{provide:Kb,useFactory:b2,deps:[[qr,new ns,new jg]]},{provide:Du,useValue:r||{}},r?.useHash?T2():C2(),D2(),r?.preloadingStrategy?_2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?S2(r):[],r?.bindToComponentInputs?w2().\u0275providers:[],r?.enableViewTransitions?I2().\u0275providers:[],A2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Qd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(Kb,8))}}static{this.\u0275mod=Gt({type:n})}static{this.\u0275inj=zt({})}}return n})();function D2(){return{provide:S0,useFactory:()=>{let n=j(Mb),e=j(fe),t=j(Du),r=j(My),i=j(_u);return t.scrollOffset&&n.setOffset(t.scrollOffset),new p2(i,r,n,e,t)}}}function T2(){return{provide:lr,useClass:Cb}}function C2(){return{provide:lr,useClass:Um}}function b2(n){return"guarded"}function S2(n){return[n.initialNavigation==="disabled"?v2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?y2().\u0275providers:[]]}var Qb=new z("");function A2(){return[{provide:Qb,useFactory:m2},{provide:Sm,multi:!0,useExisting:Qb}]}var x2="firebase",R2="10.14.1";Sr(x2,R2,"app");var Qi=new Vr("ANGULARFIRE2_VERSION");var M2=(n,e)=>{let t=e?[e]:dE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ki=class{constructor(){return M2(N2)}},N2="app-check";function Py(){}var Xd=class{zone;delegate;constructor(e,t=wp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},ky=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Py,{},Py,Py)),t.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},eh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Xd(Zone.current)),this.insideAngular=t.run(()=>new Xd(Zone.current,Ii)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(fe))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function R0(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function f3(n){return n.pipe($t(R0().outsideAngular))}function jt(n){return P2(R0())(n)}function P2(n){return function(t){return t=t.lift(new ky(n.ngZone)),t.pipe(hn(n.outsideAngular),$t(n.insideAngular))}}var k2="firebase",O2="10.14.1";Tt.registerVersion(k2,O2,"app-compat");var F2=["ngOnDestroy"],P0=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(F2.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var th=class{constructor(e){return e}},vs=new z("angularfire2.app.options"),_s=new z("angularfire2.app.name");function Cu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Tt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Tt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;L2("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new th(s)}var L2=(n,...e)=>{xm()&&typeof console<"u"&&console[n](...e)},V2={provide:th,useFactory:Cu,deps:[vs,fe,[new ns,_s]]},E3=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:vs,useValue:t},{provide:_s,useValue:r}]}}constructor(t){Tt.registerVersion("angularfire",Qi.full,"core"),Tt.registerVersion("angularfire",Qi.full,"app-compat"),Tt.registerVersion("angular",ib.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Lt))};static \u0275mod=Gt({type:n});static \u0275inj=zt({providers:[V2]})}return n})();function nh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return j2(i,s)||(N0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${B2?" You may need to reload as Firebase is not HMR aware.":""}`),N0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function j2(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var B2=typeof module<"u"&&!!module.hot,N0=(n,...e)=>{xm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var H2=new Map,q2={activated:!1,tokenObservers:[]},z2={initialized:!1,enabled:!1};function wn(n){return H2.get(n)||Object.assign({},q2)}function V0(){return z2}var G2="https://content-firebaseappcheck.googleapis.com/v1";var W2="exchangeDebugToken",k0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},N3=24*60*60*1e3;var Fy=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new tp,this.pending.promise.catch(t=>{}),yield K2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new tp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function K2(n){return new Promise(e=>{setTimeout(e,n)})}var Q2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Gr=new cE("appCheck","AppCheck",Q2);function j0(n){if(!wn(n).activated)throw Gr.create("use-before-activation",{appName:n.name})}function B0(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Gr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Gr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Gr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function U0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${G2}/projects/${t}/apps/${r}:${W2}?key=${i}`,body:{debug_token:e}}}var Y2="firebase-app-check-database",Z2=1,Ly="firebase-app-check-store";var rh=null;function J2(){return rh||(rh=new Promise((n,e)=>{try{let t=indexedDB.open(Y2,Z2);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ly,{keyPath:"compositeKey"})}}}catch(t){e(Gr.create("storage-open",{originalErrorMessage:t?.message}))}}),rh)}function X2(n,e){return ej(tj(n),e)}function ej(n,e){return N(this,null,function*(){let r=(yield J2()).transaction(Ly,"readwrite"),o=r.objectStore(Ly).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Gr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function tj(n){return`${n.options.appId}-${n.name}`}var Vy=new Pc("@firebase/app-check");function Oy(n,e){return Nc()?X2(n,e).catch(t=>{Vy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $0(){return V0().enabled}function H0(){return N(this,null,function*(){let n=V0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var nj={error:"UNKNOWN_ERROR"};function rj(n){return sE.encodeString(JSON.stringify(n),!1)}function jy(n,e=!1){return N(this,null,function*(){let t=n.app;j0(t);let r=wn(t),i=r.token,o;if(i&&!bu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(bu(u)?i=u:yield Oy(t,void 0))}if(!e&&i&&bu(i))return{token:i.token};let s=!1;if($0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=B0(U0(t,yield H0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Oy(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield wn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Vy.warn(u.message):Vy.error(u),o=u}let a;return i?o?bu(i)?a={token:i.token,internalError:o}:a=F0(o):(a={token:i.token},r.token=i,yield Oy(t,i)):a=F0(o),s&&aj(t,a),a})}function ij(n){return N(this,null,function*(){let e=n.app;j0(e);let{provider:t}=wn(e);if($0()){let r=yield H0(),{token:i}=yield B0(U0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function oj(n,e,t,r){let{app:i}=n,o=wn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&bu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),O0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>O0(n))}function q0(n,e){let t=wn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function O0(n){let{app:e}=n,t=wn(e),r=t.tokenRefresher;r||(r=sj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sj(n){let{app:e}=n;return new Fy(()=>N(this,null,function*(){let t=wn(e),r;if(t.token?r=yield jy(n,!0):r=yield jy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=wn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},k0.RETRIAL_MIN_WAIT,k0.RETRIAL_MAX_WAIT)}function aj(n,e){let t=wn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bu(n){return n.expireTimeMillis-Date.now()>0}function F0(n){return{token:rj(nj),error:n}}var By=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=wn(this.app);for(let t of e)q0(this.app,t.next);return Promise.resolve()}};function uj(n,e){return new By(n,e)}function cj(n){return{getToken:e=>jy(n,e),getLimitedUseToken:()=>ij(n),addTokenListener:e=>oj(n,"INTERNAL",e),removeTokenListener:e=>q0(n.app,e)}}var lj="@firebase/app-check",dj="0.8.8";var hj="app-check",L0="app-check-internal";function fj(){Sa(new yi(hj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return uj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(L0).initialize()})),Sa(new yi(L0,n=>{let e=n.getProvider("app-check").getImmediate();return cj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Sr(lj,dj)}fj();var pj=["localhost","0.0.0.0","127.0.0.1"],q3=typeof window<"u"&&pj.includes(window.location.hostname);var Uy=new z("angularfire2.auth.use-emulator"),$y=new z("angularfire2.auth.settings"),Hy=new z("angularfire2.auth.tenant-id"),qy=new z("angularfire2.auth.langugage-code"),zy=new z("angularfire2.auth.use-device-language"),Gy=new z("angularfire.auth.persistence"),Wy=(n,e,t,r,i,o,s,a)=>nh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),Ky=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let D=new Ue,A=J(void 0).pipe($t(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-3GWKGN6G.js"))),ee(()=>Cu(t,o,r)),ee(x=>Wy(x,o,a,l,d,f,u,g)),dl({bufferSize:1,refCount:!1}));if(Hi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{A.pipe(Jt()).subscribe();let x=A.pipe($e(O=>O.getRedirectResult().then(W=>W,()=>null)),jt,dl({bufferSize:1,refCount:!1})),F=A.pipe($e(O=>new de(W=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(X=>W.next(X),X=>W.error(X),()=>W.complete()))})))),$=A.pipe($e(O=>new de(W=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(X=>W.next(X),X=>W.error(X),()=>W.complete()))}))));this.authState=x.pipe(hl(F),hn(s.outsideAngular),$t(s.insideAngular)),this.user=x.pipe(hl($),hn(s.outsideAngular),$t(s.insideAngular)),this.idToken=this.user.pipe($e(O=>O?we(O.getIdToken()):J(null))),this.idTokenResult=this.user.pipe($e(O=>O?we(O.getIdTokenResult()):J(null))),this.credential=Dp(x,D,this.authState.pipe(lt(O=>!O))).pipe(ee(O=>O?.user?O:null),hn(s.outsideAngular),$t(s.insideAngular))}return P0(this,A,o,{spy:{apply:(x,F,$)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&$.then(O=>D.next(O))}}})}static \u0275fac=function(r){return new(r||n)(L(vs),L(_s,8),L(Lt),L(fe),L(eh),L(Uy,8),L($y,8),L(Hy,8),L(qy,8),L(zy,8),L(Gy,8),L(Ki,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),s6=(()=>{class n{constructor(){Tt.registerVersion("angularfire",Qi.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({providers:[Ky]})}return n})();var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W0={};var Wr,Qy;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,T,b){for(var _=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)_[Wn-2]=arguments[Wn];return v.prototype[T].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(T=0;16>T;++T)E[T]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],T=I.g[2];var b=I.g[3],_=v+(b^w&(T^b))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=b+(T^v&(w^T))+E[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(w^b&(v^w))+E[2]+606105819&4294967295,T=b+(_<<17&4294967295|_>>>15),_=w+(v^T&(b^v))+E[3]+3250441966&4294967295,w=T+(_<<22&4294967295|_>>>10),_=v+(b^w&(T^b))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(T^v&(w^T))+E[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(w^b&(v^w))+E[6]+2821735955&4294967295,T=b+(_<<17&4294967295|_>>>15),_=w+(v^T&(b^v))+E[7]+4249261313&4294967295,w=T+(_<<22&4294967295|_>>>10),_=v+(b^w&(T^b))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(T^v&(w^T))+E[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(w^b&(v^w))+E[10]+4294925233&4294967295,T=b+(_<<17&4294967295|_>>>15),_=w+(v^T&(b^v))+E[11]+2304563134&4294967295,w=T+(_<<22&4294967295|_>>>10),_=v+(b^w&(T^b))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=b+(T^v&(w^T))+E[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(w^b&(v^w))+E[14]+2792965006&4294967295,T=b+(_<<17&4294967295|_>>>15),_=w+(v^T&(b^v))+E[15]+1236535329&4294967295,w=T+(_<<22&4294967295|_>>>10),_=v+(T^b&(w^T))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^T&(v^w))+E[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^w&(b^v))+E[11]+643717713&4294967295,T=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(T^b))+E[0]+3921069994&4294967295,w=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(w^T))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^T&(v^w))+E[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^w&(b^v))+E[15]+3634488961&4294967295,T=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(T^b))+E[4]+3889429448&4294967295,w=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(w^T))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^T&(v^w))+E[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^w&(b^v))+E[3]+4107603335&4294967295,T=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(T^b))+E[8]+1163531501&4294967295,w=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(w^T))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=b+(w^T&(v^w))+E[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^w&(b^v))+E[7]+1735328473&4294967295,T=b+(_<<14&4294967295|_>>>18),_=w+(b^v&(T^b))+E[12]+2368359562&4294967295,w=T+(_<<20&4294967295|_>>>12),_=v+(w^T^b)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^T)+E[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^w)+E[11]+1839030562&4294967295,T=b+(_<<16&4294967295|_>>>16),_=w+(T^b^v)+E[14]+4259657740&4294967295,w=T+(_<<23&4294967295|_>>>9),_=v+(w^T^b)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^T)+E[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^w)+E[7]+4139469664&4294967295,T=b+(_<<16&4294967295|_>>>16),_=w+(T^b^v)+E[10]+3200236656&4294967295,w=T+(_<<23&4294967295|_>>>9),_=v+(w^T^b)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^T)+E[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^w)+E[3]+3572445317&4294967295,T=b+(_<<16&4294967295|_>>>16),_=w+(T^b^v)+E[6]+76029189&4294967295,w=T+(_<<23&4294967295|_>>>9),_=v+(w^T^b)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=b+(v^w^T)+E[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^w)+E[15]+530742520&4294967295,T=b+(_<<16&4294967295|_>>>16),_=w+(T^b^v)+E[2]+3299628645&4294967295,w=T+(_<<23&4294967295|_>>>9),_=v+(T^(w|~b))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~T))+E[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~w))+E[14]+2878612391&4294967295,T=b+(_<<15&4294967295|_>>>17),_=w+(b^(T|~v))+E[5]+4237533241&4294967295,w=T+(_<<21&4294967295|_>>>11),_=v+(T^(w|~b))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~T))+E[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~w))+E[10]+4293915773&4294967295,T=b+(_<<15&4294967295|_>>>17),_=w+(b^(T|~v))+E[1]+2240044497&4294967295,w=T+(_<<21&4294967295|_>>>11),_=v+(T^(w|~b))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~T))+E[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~w))+E[6]+2734768916&4294967295,T=b+(_<<15&4294967295|_>>>17),_=w+(b^(T|~v))+E[13]+1309151649&4294967295,w=T+(_<<21&4294967295|_>>>11),_=v+(T^(w|~b))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=b+(w^(v|~T))+E[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~w))+E[2]+718787259&4294967295,T=b+(_<<15&4294967295|_>>>17),_=w+(b^(T|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,T=this.h,b=0;b<v;){if(T==0)for(;b<=w;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<v;)if(E[T++]=I.charCodeAt(b++),T==this.blockSize){i(this,E),T=0;break}}else for(;b<v;)if(E[T++]=I[b++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,T=I.length-1;0<=T;T--){var b=I[T]|0;E&&b==v||(w[T]=b,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return x(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return x(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=f,T=0;T<I.length;T+=8){var b=Math.min(8,I.length-T),_=parseInt(I.substring(T,T+b),v);8>b?(b=l(Math.pow(v,b)),E=E.j(b).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-x(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(A(this))return"-"+x(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var T=W(w,v).g;w=F(w,T.j(v));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=T,D(w))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=F(this,I),A(I)?-1:D(I)?0:1};function x(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(g)}n.abs=function(){return A(this)?x(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,T=0;T<=v;T++){var b=E+(this.i(T)&65535)+(I.i(T)&65535),_=(b>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);E=_>>>16,b&=65535,_&=65535,w[T]=_<<16|b}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(x(v))}n.j=function(I){if(D(this)||D(I))return f;if(A(this))return A(I)?x(this).j(x(I)):x(x(this).j(I));if(A(I))return x(this.j(x(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<I.g.length;T++){var b=this.i(E)>>>16,_=this.i(E)&65535,Wn=I.i(T)>>>16,aa=I.i(T)&65535;w[2*E+2*T]+=_*aa,$(w,2*E+2*T),w[2*E+2*T+1]+=b*aa,$(w,2*E+2*T+1),w[2*E+2*T+1]+=_*Wn,$(w,2*E+2*T+1),w[2*E+2*T+2]+=b*Wn,$(w,2*E+2*T+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function $(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function O(I,v){this.g=I,this.h=v}function W(I,v){if(D(v))throw Error("division by zero");if(D(I))return new O(f,f);if(A(I))return v=W(x(I),v),new O(x(v.g),x(v.h));if(A(v))return v=W(I,x(v)),new O(x(v.g),v.h);if(30<I.g.length){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=v;0>=E.l(I);)w=X(w),E=X(E);var T=Q(w,1),b=Q(E,1);for(E=Q(E,2),w=Q(w,2);!D(E);){var _=b.add(E);0>=_.l(I)&&(T=T.add(w),b=_),E=Q(E,1),w=Q(w,1)}return v=F(I,T.j(v)),new O(T,v)}for(T=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(w),_=b.j(v);A(_)||0<_.l(I);)w-=E,b=l(w),_=b.j(v);D(b)&&(b=g),T=T.add(b),I=F(I,_)}return new O(T,I)}n.A=function(I){return W(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function X(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Q(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,T=[],b=0;b<E;b++)T[b]=0<v?I.i(b+w)>>>v|I.i(b+w+1)<<32-v:I.i(b+w);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qy=W0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Wr=W0.Integer=s}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var Yy,mj,ws,Zy,Su,oh,Jy,Xy,ev;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in p))break e;p=p[C]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,C={next:function(){if(!m&&p<c.length){var R=p++;return{value:h(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(h,C)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,C,R){for(var V=Array(arguments.length-2),be=2;be<arguments.length;be++)V[be-2]=arguments[be];return h.prototype[C].apply(m,V)}}function A(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function x(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let C=c.length||0,R=m.length||0;c.length=C+R;for(let V=0;V<R;V++)c[C+V]=m[V]}else c.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(c){return/^[\s\xa0]*$/.test(c)}function O(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var X=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Q(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(p in m)c[p]=m[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function b(c){a.setTimeout(()=>{throw c},0)}function _(){var c=xf;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Wn{constructor(){this.h=this.g=null}add(h,p){let m=aa.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var aa=new F(()=>new SR,c=>c.reset());class SR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ua,ca=!1,xf=new Wn,nI=()=>{let c=a.Promise.resolve(void 0);ua=()=>{c.then(AR)}};var AR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){b(p)}var h=aa;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}ca=!1};function Dr(){this.s=this.s,this.C=this.C}Dr.prototype.s=!1,Dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var xR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function la(c,h){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(X){e:{try{W(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:RR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&la.aa.h.call(this)}}D(la,ft);var RR={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var da="closure_listenable_"+(1e6*Math.random()|0),MR=0;function NR(c,h,p,m,C){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=C,this.key=++MR,this.da=this.fa=!1}function pc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gc(c){this.src=c,this.g={},this.h=0}gc.prototype.add=function(c,h,p,m,C){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var V=Mf(c,h,m,C);return-1<V?(h=c[V],p||(h.fa=!1)):(h=new NR(h,this.src,R,!!m,C),h.fa=p,c.push(h)),h};function Rf(c,h){var p=h.type;if(p in c.g){var m=c.g[p],C=Array.prototype.indexOf.call(m,h,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(pc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Mf(c,h,p,m){for(var C=0;C<c.length;++C){var R=c[C];if(!R.da&&R.listener==h&&R.capture==!!p&&R.ha==m)return C}return-1}var Nf="closure_lm_"+(1e6*Math.random()|0),Pf={};function rI(c,h,p,m,C){if(m&&m.once)return oI(c,h,p,m,C);if(Array.isArray(h)){for(var R=0;R<h.length;R++)rI(c,h[R],p,m,C);return null}return p=Lf(p),c&&c[da]?c.K(h,p,l(m)?!!m.capture:!!m,C):iI(c,h,p,!1,m,C)}function iI(c,h,p,m,C,R){if(!h)throw Error("Invalid event type");var V=l(C)?!!C.capture:!!C,be=Of(c);if(be||(c[Nf]=be=new gc(c)),p=be.add(h,p,m,V,R),p.proxy)return p;if(m=PR(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)xR||(C=V),C===void 0&&(C=!1),c.addEventListener(h.toString(),m,C);else if(c.attachEvent)c.attachEvent(aI(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function PR(){function c(p){return h.call(c.src,c.listener,p)}let h=kR;return c}function oI(c,h,p,m,C){if(Array.isArray(h)){for(var R=0;R<h.length;R++)oI(c,h[R],p,m,C);return null}return p=Lf(p),c&&c[da]?c.L(h,p,l(m)?!!m.capture:!!m,C):iI(c,h,p,!0,m,C)}function sI(c,h,p,m,C){if(Array.isArray(h))for(var R=0;R<h.length;R++)sI(c,h[R],p,m,C);else m=l(m)?!!m.capture:!!m,p=Lf(p),c&&c[da]?(c=c.i,h=String(h).toString(),h in c.g&&(R=c.g[h],p=Mf(R,p,m,C),-1<p&&(pc(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[h],c.h--)))):c&&(c=Of(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Mf(h,p,m,C)),(p=-1<c?h[c]:null)&&kf(p))}function kf(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[da])Rf(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(aI(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Of(h))?(Rf(p,c),p.h==0&&(p.src=null,h[Nf]=null)):pc(c)}}}function aI(c){return c in Pf?Pf[c]:Pf[c]="on"+c}function kR(c,h){if(c.da)c=!0;else{h=new la(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&kf(c),c=p.call(m,h)}return c}function Of(c){return c=c[Nf],c instanceof gc?c:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lf(c){return typeof c=="function"?c:(c[Ff]||(c[Ff]=function(h){return c.handleEvent(h)}),c[Ff])}function pt(){Dr.call(this),this.i=new gc(this),this.M=this,this.F=null}D(pt,Dr),pt.prototype[da]=!0,pt.prototype.removeEventListener=function(c,h,p,m){sI(this,c,h,p,m)};function Et(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new ft(h,c);else if(h instanceof ft)h.target=h.target||c;else{var C=h;h=new ft(m,c),E(h,C)}if(C=!0,p)for(var R=p.length-1;0<=R;R--){var V=h.g=p[R];C=mc(V,m,!0,h)&&C}if(V=h.g=c,C=mc(V,m,!0,h)&&C,C=mc(V,m,!1,h)&&C,p)for(R=0;R<p.length;R++)V=h.g=p[R],C=mc(V,m,!1,h)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)pc(p[m]);delete c.g[h],c.h--}}this.F=null},pt.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},pt.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function mc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,R=0;R<h.length;++R){var V=h[R];if(V&&!V.da&&V.capture==p){var be=V.listener,ut=V.ha||V.src;V.fa&&Rf(c.i,V),C=be.call(ut,m)!==!1&&C}}return C&&!m.defaultPrevented}function uI(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function cI(c){c.g=uI(()=>{c.g=null,c.i&&(c.i=!1,cI(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class OR extends Dr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(c){Dr.call(this),this.h=c,this.g={}}D(ha,Dr);var lI=[];function dI(c){Q(c.g,function(h,p){this.g.hasOwnProperty(p)&&kf(h)},c),c.g={}}ha.prototype.N=function(){ha.aa.N.call(this),dI(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vf=a.JSON.stringify,FR=a.JSON.parse,LR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function jf(){}jf.prototype.h=null;function hI(c){return c.h||(c.h=c.i())}function fI(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bf(){ft.call(this,"d")}D(Bf,ft);function Uf(){ft.call(this,"c")}D(Uf,ft);var fi={},pI=null;function yc(){return pI=pI||new pt}fi.La="serverreachability";function gI(c){ft.call(this,fi.La,c)}D(gI,ft);function pa(c){let h=yc();Et(h,new gI(h))}fi.STAT_EVENT="statevent";function mI(c,h){ft.call(this,fi.STAT_EVENT,c),this.stat=h}D(mI,ft);function Dt(c){let h=yc();Et(h,new mI(h,c))}fi.Ma="timingevent";function yI(c,h){ft.call(this,fi.Ma,c),this.size=h}D(yI,ft);function ga(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function VR(c,h,p,m,C,R){c.info(function(){if(c.g)if(R)for(var V="",be=R.split("&"),ut=0;ut<be.length;ut++){var ve=be[ut].split("=");if(1<ve.length){var gt=ve[0];ve=ve[1];var mt=gt.split("_");V=2<=mt.length&&mt[1]=="type"?V+(gt+"="+ve+"&"):V+(gt+"=redacted&")}}else V=null;else V=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+p+`
`+V})}function jR(c,h,p,m,C,R,V){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+p+`
`+R+" "+V})}function Do(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+UR(c,p)+(m?" "+m:"")})}function BR(c,h){c.info(function(){return"TIMEOUT: "+h})}ma.prototype.info=function(){};function UR(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var V=1;V<C.length;V++)C[V]=""}}}}return Vf(p)}catch{return h}}var vc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$f;function _c(){}D(_c,jf),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},$f=new _c;function Tr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _I}function _I(){this.i=null,this.g="",this.h=!1}var wI={},Hf={};function qf(c,h,p){c.L=1,c.v=Dc(Kn(h)),c.m=p,c.P=!0,II(c,null)}function II(c,h){c.F=Date.now(),wc(c),c.A=Kn(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),OI(p.i,"t",m),c.C=0,p=c.j.J,c.h=new _I,c.g=XI(c.j,p?h:null,!c.m),0<c.O&&(c.M=new OR(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(lI[0]=C.toString()),C=lI);for(var R=0;R<C.length;R++){var V=rI(p,C[R],m||h.handleEvent,!1,h.h||h);if(!V)break;h.g[V.key]=V}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),pa(),VR(c.i,c.u,c.A,c.l,c.R,c.m)}Tr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Qn(c)==3?h.j():this.Y(c)},Tr.prototype.Y=function(c){try{if(c==this.g)e:{let mt=Qn(this.g);var h=this.g.Ba();let bo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||$I(this.g)))){this.J||mt!=4||h==7||(h==8||0>=bo?pa(3):pa(2)),zf(this);var p=this.g.Z();this.X=p;t:if(EI(this)){var m=$I(this.g);c="";var C=m.length,R=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),ya(this);var V="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(R&&h==C-1)});m.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,jR(this.i,this.u,this.A,this.l,this.R,mt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ut=this.g;if((be=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(be)){var ve=be;break t}}ve=null}if(p=ve)Do(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gf(this,p);else{this.o=!1,this.s=3,Dt(12),pi(this),ya(this);break e}}if(this.P){p=!0;let ln;for(;!this.J&&this.C<V.length;)if(ln=$R(this,V),ln==Hf){mt==4&&(this.s=4,Dt(14),p=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==wI){this.s=4,Dt(15),Do(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else Do(this.i,this.l,ln,null),Gf(this,ln);if(EI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||V.length!=0||this.h.h||(this.s=1,Dt(16),p=!1),this.o=this.o&&p,!p)Do(this.i,this.l,V,"[Invalid Chunked Response]"),pi(this),ya(this);else if(0<V.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Jf(gt),gt.M=!0,Dt(11))}}else Do(this.i,this.l,V,null),Gf(this,V);mt==4&&pi(this),this.o&&!this.J&&(mt==4?QI(this.j,this):(this.o=!1,wc(this)))}else oM(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),pi(this),ya(this)}}}catch{}finally{}};function EI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $R(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?Hf:(p=Number(h.substring(p,m)),isNaN(p)?wI:(m+=1,m+p>h.length?Hf:(h=h.slice(m,m+p),c.C=m+p,h)))}Tr.prototype.cancel=function(){this.J=!0,pi(this)};function wc(c){c.S=Date.now()+c.I,DI(c,c.I)}function DI(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ga(g(c.ba,c),h)}function zf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Tr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(BR(this.i,this.A),this.L!=2&&(pa(),Dt(17)),pi(this),this.s=2,ya(this)):DI(this,this.S-c)};function ya(c){c.j.G==0||c.J||QI(c.j,c)}function pi(c){zf(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,dI(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Gf(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Wf(p.h,c))){if(!c.K&&Wf(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Ac(p),bc(p);else break e;Zf(p),Dt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=ga(g(p.Za,p),6e3));if(1>=bI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else mi(p,11)}else if((c.K||p.g==c)&&Ac(p),!$(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let ve=C[h];if(p.T=ve[0],ve=ve[1],p.G==2)if(ve[0]=="c"){p.K=ve[1],p.ia=ve[2];let gt=ve[3];gt!=null&&(p.la=gt,p.j.info("VER="+p.la));let mt=ve[4];mt!=null&&(p.Aa=mt,p.j.info("SVER="+p.Aa));let bo=ve[5];bo!=null&&typeof bo=="number"&&0<bo&&(m=1.5*bo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ln=c.g;if(ln){let Rc=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rc){var R=m.h;R.g||Rc.indexOf("spdy")==-1&&Rc.indexOf("quic")==-1&&Rc.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Kf(R,R.h),R.h=null))}if(m.D){let Xf=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Xf&&(m.ya=Xf,Ne(m.I,m.D,Xf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var V=c;if(m.qa=JI(m,m.J?m.ia:null,m.W),V.K){SI(m.h,V);var be=V,ut=m.L;ut&&(be.I=ut),be.B&&(zf(be),wc(be)),m.g=V}else WI(m);0<p.i.length&&Sc(p)}else ve[0]!="stop"&&ve[0]!="close"||mi(p,7);else p.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?mi(p,7):Yf(p):ve[0]!="noop"&&p.l&&p.l.ta(ve),p.v=0)}}pa(4)}catch{}}var HR=class{constructor(c,h){this.g=c,this.map=h}};function TI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bI(c){return c.h?1:c.g?c.g.size:0}function Wf(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Kf(c,h){c.g?c.g.add(h):c.h=h}function SI(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}TI.prototype.cancel=function(){if(this.i=AI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function AI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return A(c.i)}function qR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function zR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function xI(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=zR(c),m=qR(c),C=m.length,R=0;R<C;R++)h.call(void 0,m[R],p&&p[R],c)}var RI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GR(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),C=null;if(0<=m){var R=c[p].substring(0,m);C=c[p].substring(m+1)}else R=c[p];h(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function gi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gi){this.h=c.h,Ic(this,c.j),this.o=c.o,this.g=c.g,Ec(this,c.s),this.l=c.l;var h=c.i,p=new wa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),MI(this,p),this.m=c.m}else c&&(h=String(c).match(RI))?(this.h=!1,Ic(this,h[1]||"",!0),this.o=va(h[2]||""),this.g=va(h[3]||"",!0),Ec(this,h[4]),this.l=va(h[5]||"",!0),MI(this,h[6]||"",!0),this.m=va(h[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}gi.prototype.toString=function(){var c=[],h=this.j;h&&c.push(_a(h,NI,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(_a(h,NI,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(_a(p,p.charAt(0)=="/"?QR:KR,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",_a(p,ZR)),c.join("")};function Kn(c){return new gi(c)}function Ic(c,h,p){c.j=p?va(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ec(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function MI(c,h,p){h instanceof wa?(c.i=h,JR(c.i,c.h)):(p||(h=_a(h,YR)),c.i=new wa(h,c.h))}function Ne(c,h,p){c.i.set(h,p)}function Dc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function va(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _a(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,WR),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function WR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var NI=/[#\/\?@]/g,KR=/[#\?:]/g,QR=/[#\?]/g,YR=/[#\?@]/g,ZR=/#/g;function wa(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&GR(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=wa.prototype,n.add=function(c,h){Cr(this),this.i=null,c=To(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function PI(c,h){Cr(c),h=To(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function kI(c,h){return Cr(c),h=To(c,h),c.g.has(h)}n.forEach=function(c,h){Cr(this),this.g.forEach(function(p,m){p.forEach(function(C){c.call(h,C,m,this)},this)},this)},n.na=function(){Cr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let C=c[m];for(let R=0;R<C.length;R++)p.push(h[m])}return p},n.V=function(c){Cr(this);let h=[];if(typeof c=="string")kI(this,c)&&(h=h.concat(this.g.get(To(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return Cr(this),this.i=null,c=To(this,c),kI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function OI(c,h,p){PI(c,h),0<p.length&&(c.i=null,c.g.set(To(c,h),A(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let R=encodeURIComponent(String(m)),V=this.V(m);for(m=0;m<V.length;m++){var C=R;V[m]!==""&&(C+="="+encodeURIComponent(String(V[m]))),c.push(C)}}return this.i=c.join("&")};function To(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function JR(c,h){h&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(p,m){var C=m.toLowerCase();m!=C&&(PI(this,m),OI(this,C,p))},c)),c.j=h}function XR(c,h){let p=new ma;if(a.Image){let m=new Image;m.onload=y(br,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(br,p,"TestLoadImage: error",!1,h,m),m.onabort=y(br,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(br,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function eM(c,h){let p=new ma,m=new AbortController,C=setTimeout(()=>{m.abort(),br(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?br(p,"TestPingServer: ok",!0,h):br(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),br(p,"TestPingServer: error",!1,h)})}function br(c,h,p,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(p)}catch{}}function tM(){this.g=new LR}function nM(c,h,p){let m=p||"";try{xI(c,function(C,R){let V=C;l(C)&&(V=Vf(C)),h.push(m+R+"="+encodeURIComponent(V))})}catch(C){throw h.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ia(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Ia,jf),Ia.prototype.g=function(){return new Tc(this.l,this.j)},Ia.prototype.i=function(c){return function(){return c}}({});function Tc(c,h){pt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Tc,pt),n=Tc.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Da(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function FI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Ea(this):Da(this),this.readyState==3&&FI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ea(this))},n.Qa=function(c){this.g&&(this.response=c,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Da(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Da(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function LI(c){let h="";return Q(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Qf(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=LI(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ne(c,h,p))}function je(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(je,pt);var rM=/^https?$/i,iM=["POST","PUT"];n=je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$f.g(),this.v=this.o?hI(this.o):hI($f),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(R){VI(this,R);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)p.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())p.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iM,h,void 0))||m||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,V]of p)this.g.setRequestHeader(R,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){VI(this,R)}};function VI(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,jI(c),Cc(c)}function jI(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),Cc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cc(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?BI(this):this.bb())},n.bb=function(){BI(this)};function BI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)uI(c.Ea,0,c);else if(Et(c,"readystatechange"),Qn(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=V===0){var C=String(c.D).match(RI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!rM.test(C?C.toLowerCase():"")}p=m}if(p)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var R=2<Qn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",jI(c)}}finally{Cc(c)}}}}function Cc(c,h){if(c.g){UI(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Et(c,"ready");try{p.onreadystatechange=m}catch{}}}function UI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),FR(h)}};function $I(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oM(c){let h={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var p=T(c[m]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=h[C]||[];h[C]=R,R.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function HI(c){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,c),this.cb=Ta("retryDelaySeedMs",1e4,c),this.Wa=Ta("forwardChannelMaxRetries",2,c),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new TI(c&&c.concurrentRequestLimit),this.Da=new tM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=HI.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){Dt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=JI(this,null,this.W),Sc(this)};function Yf(c){if(qI(c),c.G==3){var h=c.U++,p=Kn(c.I);if(Ne(p,"SID",c.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),Ca(c,p),h=new Tr(c,c.j,h),h.L=2,h.v=Dc(Kn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=XI(h.j,null),h.g.ea(h.v)),h.F=Date.now(),wc(h)}ZI(c)}function bc(c){c.g&&(Jf(c),c.g.cancel(),c.g=null)}function qI(c){bc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ac(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Sc(c){if(!CI(c.h)&&!c.s){c.s=!0;var h=c.Ga;ua||nI(),ca||(ua(),ca=!0),xf.add(h,c),c.B=0}}function sM(c,h){return bI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ga(g(c.Ga,c,h),YI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Tr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=GI(this,C,h),p=Kn(this.I),Ne(p,"RID",c),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),Ca(this,p),R&&(this.O?h="headers="+encodeURIComponent(String(LI(R)))+"&"+h:this.m&&Qf(p,this.m,R)),Kf(this.h,C),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),C.T=!0,qf(C,p,null)):qf(C,p,h),this.G=2}}else this.G==3&&(c?zI(this,c):this.i.length==0||CI(this.h)||zI(this))};function zI(c,h){var p;h?p=h.l:p=c.U++;let m=Kn(c.I);Ne(m,"SID",c.K),Ne(m,"RID",p),Ne(m,"AID",c.T),Ca(c,m),c.m&&c.o&&Qf(m,c.m,c.o),p=new Tr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=GI(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Kf(c.h,p),qf(p,m,h)}function Ca(c,h){c.H&&Q(c.H,function(p,m){Ne(h,m,p)}),c.l&&xI({},function(p,m){Ne(h,m,p)})}function GI(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let R=-1;for(;;){let V=["count="+p];R==-1?0<p?(R=C[0].g,V.push("ofs="+R)):R=0:V.push("ofs="+R);let be=!0;for(let ut=0;ut<p;ut++){let ve=C[ut].g,gt=C[ut].map;if(ve-=R,0>ve)R=Math.max(0,C[ut].g-100),be=!1;else try{nM(gt,V,"req"+ve+"_")}catch{m&&m(gt)}}if(be){m=V.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function WI(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;ua||nI(),ca||(ua(),ca=!0),xf.add(h,c),c.v=0}}function Zf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ga(g(c.Fa,c),YI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,KI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ga(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),bc(this),KI(this))};function Jf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function KI(c){c.g=new Tr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Kn(c.qa);Ne(h,"RID","rpc"),Ne(h,"SID",c.K),Ne(h,"AID",c.T),Ne(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(h,"TO",c.ja),Ne(h,"TYPE","xmlhttp"),Ca(c,h),c.m&&c.o&&Qf(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Dc(Kn(h)),p.m=null,p.P=!0,II(p,c)}n.Za=function(){this.C!=null&&(this.C=null,bc(this),Zf(this),Dt(19))};function Ac(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function QI(c,h){var p=null;if(c.g==h){Ac(c),Jf(c),c.g=null;var m=2}else if(Wf(c.h,h))p=h.D,SI(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=c.B;m=yc(),Et(m,new yI(m,p)),Sc(c)}else WI(c);else if(C=h.s,C==3||C==0&&0<h.X||!(m==1&&sM(c,h)||m==2&&Zf(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),C){case 1:mi(c,5);break;case 4:mi(c,10);break;case 3:mi(c,6);break;default:mi(c,2)}}}function YI(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function mi(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let C=!m;m=new gi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ic(m,"https"),Dc(m),C?XR(m.toString(),p):eM(m.toString(),p)}else Dt(2);c.G=0,c.l&&c.l.sa(h),ZI(c),qI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function ZI(c){if(c.G=0,c.ka=[],c.l){let h=AI(c.h);(h.length!=0||c.i.length!=0)&&(x(c.ka,h),x(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function JI(c,h,p){var m=p instanceof gi?Kn(p):new gi(p);if(m.g!="")h&&(m.g=h+"."+m.g),Ec(m,m.s);else{var C=a.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var R=new gi(null);m&&Ic(R,m),h&&(R.g=h),C&&Ec(R,C),p&&(R.l=p),m=R}return p=c.D,h=c.ya,p&&h&&Ne(m,p,h),Ne(m,"VER",c.la),Ca(c,m),m}function XI(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new je(new Ia({eb:p})):new je(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eE(){}n=eE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xc(){}xc.prototype.g=function(c,h){return new Ut(c,h)};function Ut(c,h){pt.call(this),this.g=new HI(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!$(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Co(this)}D(Ut,pt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Yf(this.g)},Ut.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Vf(c),c=p);h.i.push(new HR(h.Ya++,c)),h.G==3&&Sc(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Yf(this.g),delete this.g,Ut.aa.N.call(this)};function tE(c){Bf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(tE,Bf);function nE(){Uf.call(this),this.status=1}D(nE,Uf);function Co(c){this.g=c}D(Co,eE),Co.prototype.ua=function(){Et(this.g,"a")},Co.prototype.ta=function(c){Et(this.g,new tE(c))},Co.prototype.sa=function(c){Et(this.g,new nE)},Co.prototype.ra=function(){Et(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,ev=fr.createWebChannelTransport=function(){return new xc},Xy=fr.getStatEventTarget=function(){return yc()},Jy=fr.Event=fi,oh=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vc.NO_ERROR=0,vc.TIMEOUT=8,vc.HTTP_ERROR=6,Su=fr.ErrorCode=vc,vI.COMPLETE="complete",Zy=fr.EventType=vI,fI.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ws=fr.WebChannel=fI,mj=fr.FetchXmlHttpFactory=Ia,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Yy=fr.XhrIo=je}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});var K0="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Zs="10.14.0";var ei=new Pc("@firebase/firestore");function Cs(){return ei.logLevel}function ZS(n){ei.setLogLevel(n)}function k(n,...e){if(ei.logLevel<=bn.DEBUG){let t=e.map(ow);ei.debug(`Firestore (${Zs}): ${n}`,...t)}}function Ge(n,...e){if(ei.logLevel<=bn.ERROR){let t=e.map(ow);ei.error(`Firestore (${Zs}): ${n}`,...t)}}function In(n,...e){if(ei.logLevel<=bn.WARN){let t=e.map(ow);ei.warn(`Firestore (${Zs}): ${n}`,...t)}}function ow(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function G(n,e){n||q()}function JS(n,e){n||q()}function B(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends uE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ot=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},av=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},uv=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ot;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ot,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ot)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new et(e)}},cv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new dv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=yj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function ks(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XS(n){return n+"\0"}var Le=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Le(0,0))}static max(){return new n(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ge=class n extends yh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends yh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(ge.fromString(e))}static fromName(e){return new n(ge.fromString(e).popFirst(5))}static empty(){return new n(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ge(e.slice()))}};var Os=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function fv(n){return n.fields.find(e=>e.kind===2)}function Zi(n){return n.fields.filter(e=>e.kind!==2)}Os.UNKNOWN_ID=-1;var Ms=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ju=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,un.min())}};function eA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Le(t+1,0):new Le(t,r));return new un(i,U.empty(),e)}function tA(n){return new un(n.readTime,n.key,-1)}var un=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),U.empty(),-1)}static max(){return new n(Z.max(),U.empty(),-1)}};function sw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function li(n){return N(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==nA)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var _h=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ot,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ro(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=aw(r.target.error);this.V.reject(new ro(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ro(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new gv(t)}},ti=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ba())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ji(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Nc())return!1;if(n.v())return!0;let e=ba(),t=n.S(e),r=0<t&&t<10,i=rA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ro(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ro(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=_h.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function rA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var pv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ji(this.B.delete())}},ro=class extends P{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function di(n){return n.name==="IndexedDbTransactionError"}var gv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ji(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ji(this.store.add(e))}get(e){return Ji(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ji(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ji(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=aw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new pv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let d=l.catch(f=>(u.done(),S.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ji(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=aw(r.target.error);t(i)}})}var Q0=!1;function aw(n){let e=ti.S(ba());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Q0||(Q0=!0,setTimeout(()=>{throw r},0)),r}}return n}var mv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){di(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield li(t)}yield this.X(6e4)}))}},yv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=tA(o);sw(s,r)>0&&(r=s)}),new un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Yt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sc(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function iA(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Nt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Y0(e)),e=_j(n.get(t),e);return Y0(e)}function _j(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Y0(n){return n+""}function Ln(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===""&&n.charAt(1)===""),ge.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&q(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:q()}o=s+2}return new ge(r)}var Z0=["userId","batchId"];function lh(n,e){return[n,Nt(e)]}function oA(n,e,t){return[n,Nt(e),t]}var wj={},Ij=["prefixPath","collectionGroup","readTime","documentId"],Ej=["prefixPath","collectionGroup","documentId"],Dj=["collectionGroup","readTime","prefixPath","documentId"],Tj=["canonicalId","targetId"],Cj=["targetId","path"],bj=["path","targetId"],Sj=["collectionId","parent"],Aj=["indexId","uid"],xj=["uid","sequenceNumber"],Rj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mj=["indexId","uid","orderedDocumentKey"],Nj=["userId","collectionPath","documentId"],Pj=["userId","collectionPath","largestBatchId"],kj=["userId","collectionGroup","largestBatchId"],sA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oj=[...sA,"documentOverlays"],aA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uA=aA,uw=[...uA,"indexConfiguration","indexState","indexEntries"],Fj=uw,Lj=[...uw,"globals"];var Uu=class extends vh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function st(n,e){let t=B(n);return ti.F(t._e,e)}function J0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rs(this.root,e,this.comparator,!0)}},Rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wh(this.data.getIterator())}getIteratorFrom(e){return new wh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Is(n){return n.hasNext()?n.getNext():void 0}var Zt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new xe(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ih=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function lA(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ih("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var Vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(G(!!n),typeof n=="string"){let e=0,t=Vj.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function cw(n){let e=n.mapValue.fields.__previous_value__;return ff(e)?cw(e):e}function $u(n){let e=mr(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var vv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ri=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dh={nullValue:"NULL_VALUE"};function io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ff(n)?4:dA(n)?9007199254740991:pf(n)?10:11:q()}function $n(n,e){if(n===e)return!0;let t=io(n);if(t!==io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $u(n).isEqual($u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=mr(i.timestampValue),a=mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ni(i.bytesValue).isEqual(ni(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?Bu(s)===Bu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ks(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(J0(s)!==J0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$n(s[u],a[u])))return!1;return!0}(n,e);default:return q()}}function Hu(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function ii(n,e){if(n===e)return 0;let t=io(n),r=io(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),u=Oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return X0(n.timestampValue,e.timestampValue);case 4:return X0($u(n),$u(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ni(o),u=ni(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=re(a[l],u[l]);if(d!==0)return d}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Oe(o.latitude),Oe(s.latitude));return a!==0?a:re(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:eS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Jr.mapValue&&s===Jr.mapValue)return 0;if(o===Jr.mapValue)return 1;if(s===Jr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=re(u[f],d[f]);if(g!==0)return g;let y=ii(a[u[f]],l[d[f]]);if(y!==0)return y}return re(u.length,d.length)}(n.mapValue,e.mapValue);default:throw q()}}function X0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=mr(n),r=mr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function eS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ii(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function Fs(n){return _v(n)}function _v(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ni(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=_v(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${_v(t.fields[s])}`;return i+"}"}(n.mapValue):q()}function oo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wv(n){return!!n&&"integerValue"in n}function qu(n){return!!n&&"arrayValue"in n}function tS(n){return!!n&&"nullValue"in n}function nS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function pf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ku(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function jj(n){return"nullValue"in n?dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?oo(ri.empty(),U.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?pf(n)?hA:{mapValue:{}}:q()}function Bj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?oo(ri.empty(),U.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?hA:"mapValue"in n?pf(n)?{mapValue:{}}:Jr:q()}function rS(n,e){let t=ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iS(n,e){let t=ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var It=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ku(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ku(this.value))}};function fA(n){let e=[];return mo(n.fields,(t,r)=>{let i=new We([t]);if(hh(r)){let o=fA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),It.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),It.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),It.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hn=class{constructor(e,t){this.position=e,this.inclusive=t}};function oS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),t.key):r=ii(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var so=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Uj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Eh=class{},he=class n extends Eh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Dv(e,t,r):t==="array-contains"?new bv(e,r):t==="in"?new Dh(e,r):t==="not-in"?new Sv(e,r):t==="array-contains-any"?new Av(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Tv(e,r):new Cv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ii(t,this.value)):t!==null&&io(this.value)===io(t)&&this.matchesComparison(ii(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Eh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ls(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ls(n){return n.op==="and"}function Iv(n){return n.op==="or"}function lw(n){return pA(n)&&Ls(n)}function pA(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function Ev(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+Fs(n.value);if(lw(n))return n.filters.map(e=>Ev(e)).join(",");{let e=n.filters.map(t=>Ev(t)).join(",");return`${n.op}(${e})`}}function gA(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gA(s,i.filters[a]),!0):!1}(n,e):void q()}function mA(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function yA(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${Fs(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(yA).join(" ,")+"}"}(n):"Filter"}var Dv=class extends he{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},Tv=class extends he{constructor(e,t){super(e,"in",t),this.keys=vA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Cv=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=vA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var bv=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return qu(t)&&Hu(t.arrayValue,this.value)}},Dh=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}},Sv=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Hu(this.value.arrayValue,t)}},Av=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}};var xv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Rv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new xv(n,e,t,r,i,o,s)}function ao(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ev(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=t}return e.ue}function ac(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Uj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sS(n.startAt,e.startAt)&&sS(n.endAt,e.endAt)}function Th(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ch(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function aS(n,e,t){let r=dh,i=!0;for(let o of Ch(n,e)){let s=dh,a=!0;switch(o.op){case"<":case"<=":s=jj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=dh}rS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];rS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function uS(n,e,t){let r=Jr,i=!0;for(let o of Ch(n,e)){let s=Jr,a=!0;switch(o.op){case">=":case">":s=Bj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Jr}iS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];iS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var En=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function _A(n,e,t,r,i,o,s,a){return new En(n,e,t,r,i,o,s,a)}function Js(n){return new En(n)}function cS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dw(n){return n.collectionGroup!==null}function Ns(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xe(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new so(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new so(We.keyField(),r))}return e.ce}function Pt(n){let e=B(n);return e.le||(e.le=$j(e,Ns(n))),e.le}function $j(n,e){if(n.limitType==="F")return Rv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new so(i.field,o)});let t=n.endAt?new Hn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hn(n.startAt.position,n.startAt.inclusive):null;return Rv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Mv(n,e){let t=n.filters.concat([e]);return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bh(n,e,t){return new En(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uc(n,e){return ac(Pt(n),Pt(e))&&n.limitType===e.limitType}function wA(n){return`${ao(Pt(n))}|lt:${n.limitType}`}function bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>yA(i)).join(", ")}]`),sc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(Pt(n))}; limitType=${n.limitType})`}function cc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ns(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=oS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ns(r),i)||r.endAt&&!function(s,a,u){let l=oS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ns(r),i))}(n,e)}function IA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EA(n){return(e,t)=>{let r=!1;for(let i of Ns(n)){let o=Hj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Hj(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ii(u,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var qn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}};var qj=new ke(U.comparator);function Bt(){return qj}var DA=new ke(U.comparator);function Nu(...n){let e=DA;for(let t of n)e=e.insert(t.key,t);return e}function TA(n){let e=DA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vn(){return Ou()}function CA(){return Ou()}function Ou(){return new qn(n=>n.toString(),(n,e)=>n.isEqual(e))}var zj=new ke(U.comparator),Gj=new xe(U.comparator);function se(...n){let e=Gj;for(let t of n)e=e.add(t);return e}var Wj=new xe(re);function hw(){return Wj}function fw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function bA(n){return{integerValue:""+n}}function SA(n,e){return iA(e)?bA(e):fw(n,e)}var Vs=class{constructor(){this._=void 0}};function Kj(n,e,t){return n instanceof oi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ff(o)&&(o=cw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof yr?xA(n,e):n instanceof vr?RA(n,e):function(i,o){let s=AA(i,o),a=lS(s)+lS(i.Pe);return wv(s)&&wv(i.Pe)?bA(a):fw(i.serializer,a)}(n,e)}function Qj(n,e,t){return n instanceof yr?xA(n,e):n instanceof vr?RA(n,e):t}function AA(n,e){return n instanceof si?function(r){return wv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var oi=class extends Vs{},yr=class extends Vs{constructor(e){super(),this.elements=e}};function xA(n,e){let t=MA(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var vr=class extends Vs{constructor(e){super(),this.elements=e}};function RA(n,e){let t=MA(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var si=class extends Vs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function lS(n){return Oe(n.integerValue||n.doubleValue)}function MA(n){return qu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var uo=class{constructor(e,t){this.field=e,this.transform=t}};function Yj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof yr&&i instanceof yr||r instanceof vr&&i instanceof vr?ks(r.elements,i.elements,$n):r instanceof si&&i instanceof si?$n(r.Pe,i.Pe):r instanceof oi&&i instanceof oi}(n.transform,e.transform)}var Nv=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var js=class{};function NA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ui(n.key,He.none()):new ai(n.key,n.data,He.none());{let t=n.data,r=It.empty(),i=new xe(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Dn(n.key,r,new Zt(i.toArray()),He.none())}}function Zj(n,e,t){n instanceof ai?function(i,o,s){let a=i.value.clone(),u=hS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Dn?function(i,o,s){if(!fh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=hS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(PA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Fu(n,e,t,r){return n instanceof ai?function(o,s,a,u){if(!fh(o.precondition,s))return a;let l=o.value.clone(),d=fS(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dn?function(o,s,a,u){if(!fh(o.precondition,s))return a;let l=fS(o.fieldTransforms,u,s),d=s.data;return d.setAll(PA(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return fh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Jj(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=AA(r.transform,i||null);o!=null&&(t===null&&(t=It.empty()),t.set(r.field,o))}return t||null}function dS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ks(r,i,(o,s)=>Yj(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ai=class extends js{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Dn=class extends js{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function hS(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Qj(s,a,t[i]))}return r}function fS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Kj(o,s,e))}return r}var ui=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zu=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Gu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Zj(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=CA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=NA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,(t,r)=>dS(t,r))&&ks(this.baseMutations,e.baseMutations,(t,r)=>dS(t,r))}},Pv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return zj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Wu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,pe;function kA(n){switch(n){default:return q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function OA(n){if(n===void 0)return Ge("GRPC error has no .code"),M.UNKNOWN;switch(n){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return q()}}(pe=Je||(Je={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var pS=null;function FA(){return new TextEncoder}var Xj=new Wr([4294967295,4294967295],0);function gS(n){let e=FA().encode(n),t=new Qy;return t.update(e),new Uint8Array(t.digest())}function mS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wr([t,r],0),new Wr([i,o],0)]}var Ov=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new no(`Invalid padding: ${t}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new no(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Wr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Wr.fromNumber(r)));return i.compare(Xj)===1&&(i=new Wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=gS(e),[r,i]=mS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=gS(e),[r,i]=mS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},no=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ku=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Z.min(),i,new ke(re),Bt(),se())}},Qu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var Ps=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Sh=class{constructor(e,t){this.targetId=e,this.me=t}},Ah=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},xh=class{constructor(){this.fe=0,this.ge=vS(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Qu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=vS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,G(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Fv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bt(),this.qe=yS(),this.Qe=new ke(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Th(o))if(r===0){let s=new U(o.path);this.Ue(t,s,tt.newNoDocument(s,Z.min()))}else G(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}pS?.et(function(d,f,g,y,D){var A,x,F,$,O,W;let X={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Q=f.unchangedNames;return Q&&(X.bloomFilter={applied:D===0,hashCount:(A=Q?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:($=(F=(x=Q?.bits)===null||x===void 0?void 0:x.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(W=(O=Q?.bits)===null||O===void 0?void 0:O.padding)!==null&&W!==void 0?W:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),X}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ni(r).toUint8Array()}catch(u){if(u instanceof Ih)return In("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ov(s,i,o)}catch(u){return In(u instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Th(a.target)){let u=new U(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,tt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ku(e,t,this.Qe,this.ke,r);return this.ke=Bt(),this.qe=yS(),this.Qe=new ke(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new xh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xe(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function yS(){return new ke(U.comparator)}function vS(){return new ke(U.comparator)}var eB={asc:"ASCENDING",desc:"DESCENDING"},tB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nB={and:"AND",or:"OR"},Lv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Vv(n,e){return n.useProto3Json||sc(e)?e:{value:e}}function Bs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rB(n,e){return Bs(n,e.toTimestamp())}function Ke(n){return G(!!n),Z.fromTimestamp(function(t){let r=mr(t);return new Le(r.seconds,r.nanos)}(n))}function pw(n,e){return jv(n,e).canonicalString()}function jv(n,e){let t=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VA(n){let e=ge.fromString(n);return G(KA(e)),e}function Yu(n,e){return pw(n.databaseId,e.path)}function Bn(n,e){let t=VA(e);if(t.get(1)!==n.databaseId.projectId)throw new P(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(UA(t))}function jA(n,e){return pw(n.databaseId,e)}function BA(n){let e=VA(n);return e.length===4?ge.emptyPath():UA(e)}function Bv(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UA(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _S(n,e,t){return{name:Yu(n,e),fields:t.value.mapValue.fields}}function $A(n,e,t){let r=Bn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Z.min(),s=new It({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function iB(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=Bn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Z.min(),u=new It({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=Bn(r,i.missing),s=Ke(i.readTime);return tt.newNoDocument(o,s)}(n,e):q()}function oB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(G(d===void 0||typeof d=="string"),Qe.fromBase64String(d||"")):(G(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Qe.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?M.UNKNOWN:OA(l.code);return new P(d,l.message||"")}(s);t=new Ah(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Bn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Z.min(),a=new It({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ps(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Bn(n,r.document),o=r.readTime?Ke(r.readTime):Z.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ps([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Bn(n,r.document),o=r.removedTargetIds||[];t=new Ps([],o,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new kv(i,o),a=r.targetId;t=new Sh(a,s)}}return t}function Zu(n,e){let t;if(e instanceof ai)t={update:_S(n,e.key,e.value)};else if(e instanceof ui)t={delete:Yu(n,e.key)};else if(e instanceof Dn)t={update:_S(n,e.key,e.data),updateMask:dB(e.fieldMask)};else{if(!(e instanceof zu))return q();t={verify:Yu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof oi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof vr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof si)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:rB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q()}(n,e.precondition)),t}function Uv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(Ke(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),u=new oi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new yr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new vr(d)}else"increment"in a?u=new si(s,a.increment):q();let l=We.fromServerFormat(a.fieldPath);return new uo(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Bn(n,e.update.name),o=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Zt(l.map(d=>We.fromServerFormat(d)))}(e.updateMask);return new Dn(i,o,s,t,r)}return new ai(i,o,t,r)}if(e.delete){let i=Bn(n,e.delete);return new ui(i,t)}if(e.verify){let i=Bn(n,e.verify);return new zu(i,t)}return q()}function sB(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Z.min())&&(s=Ke(o)),new Nv(s,i.transformResults||[])}(t,e))):[]}function HA(n,e){return{documents:[jA(n,e.path)]}}function qA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jA(n,i);let o=function(l){if(l.length!==0)return WA(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ss(g.field),direction:uB(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Vv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function zA(n){let e=BA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=GA(f);return g instanceof Te&&lw(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(D){return new so(As(D.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,sc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Hn(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Hn(y,g)}(t.endAt)),_A(e,i,s,o,a,"F",u,l)}function aB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=As(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=As(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=As(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=As(t.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return he.create(As(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>GA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function uB(n){return eB[n]}function cB(n){return tB[n]}function lB(n){return nB[n]}function Ss(n){return{fieldPath:n.canonicalString()}}function As(n){return We.fromServerFormat(n.fieldPath)}function WA(n){return n instanceof he?function(t){if(t.op==="=="){if(nS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(tS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(tS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:cB(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>WA(i));return r.length===1?r[0]:{compositeFilter:{op:lB(t.op),filters:r}}}(n):q()}function dB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Us=class n{constructor(e,t,r,i,o=Z.min(),s=Z.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Rh=class{constructor(e){this.ct=e}};function hB(n,e){let t;if(e.document)t=$A(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=lo(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=U.fromSegments(e.unknownDocument.path),i=lo(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Le(i[0],i[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function wS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Yu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Bs(o,s.version.toTimestamp()),createTime:Bs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:co(e.version)}}return r}function Mh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function co(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lo(n){let e=new Le(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function Xi(n,e){let t=(e.baseMutations||[]).map(o=>Uv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Uv(n.ct,o)),i=Le.fromMillis(e.localWriteTimeMs);return new Gu(e.batchId,i,t,r)}function Pu(n){let e=lo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?lo(n.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),Pt(Js(BA(o.documents[0])))}(n.query):function(o){return Pt(zA(o))}(n.query),new Us(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function QA(n,e){let t=co(e.snapshotVersion),r=co(e.lastLimboFreeSnapshotVersion),i;i=Th(e.target)?HA(n.ct,e.target):qA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ao(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function gw(n){let e=zA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bh(e,e.limit,"L"):e}function tv(n,e){return new Wu(e.largestBatchId,Uv(n.ct,e.overlayMutation))}function IS(n,e){let t=e.path.lastSegment();return[n,Nt(e.path.popLast()),t]}function ES(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:co(r.readTime),documentKey:Nt(r.documentKey.path),largestBatchId:r.largestBatchId}}var $v=class{getBundleMetadata(e,t){return DS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:lo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return DS(e).put(function(i){return{bundleId:i.id,createTime:co(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return TS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:gw(o.bundledQuery),readTime:lo(o.readTime)}}(r)})}saveNamedQuery(e,t){return TS(e).put(function(i){return{name:i.name,readTime:co(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function DS(n){return st(n,"bundles")}function TS(n){return st(n,"namedQueries")}var Nh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Au(e).get(IS(this.userId,t)).next(r=>r?tv(this.serializer,r):null)}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Wu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Nt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Au(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Vn(),o=Nt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Au(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=tv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Vn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=tv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Au(e).put(function(i,o,s){let[a,u,l]=IS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Au(n){return st(n,"documentOverlays")}var Hv=class{Pt(e){return st(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var pr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=mr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ni(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?dA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):pf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),U.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};pr.vt=new pr;function fB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function CS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=fB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var qv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=CS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=CS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},zv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Gv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},eo=class{constructor(){this.jt=new qv,this.Ht=new zv(this.jt),this.Jt=new Gv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var to=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Kr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=bS(n.arrayValue,e.arrayValue),t!==0?t:(t=bS(n.directionalValue,e.directionalValue),t!==0?t:U.comparator(n.documentKey,e.documentKey)))}function bS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Ph=class{constructor(e){this.Xt=new xe((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(G(e.collectionGroup===this.collectionId),this.nn)return!1;let t=fv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Zi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new xe(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ms(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ms(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ms(r.field,r.dir==="asc"?0:1)));return new Os(Os.UNKNOWN_ID,this.collectionId,t,ju.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function YA(n){var e,t;if(G(n instanceof he||n instanceof Te),n instanceof he){if(n instanceof Dh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>he.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>YA(i));return Te.create(r,n.op)}function pB(n){if(n.getFilters().length===0)return[];let e=Qv(YA(n));return G(ZA(e)),Wv(e)||Kv(e)?[e]:e.getFilters()}function Wv(n){return n instanceof he}function Kv(n){return n instanceof Te&&lw(n)}function ZA(n){return Wv(n)||Kv(n)||function(t){if(t instanceof Te&&Iv(t)){for(let r of t.getFilters())if(!Wv(r)&&!Kv(r))return!1;return!0}return!1}(n)}function Qv(n){if(G(n instanceof he||n instanceof Te),n instanceof he)return n;if(n.filters.length===1)return Qv(n.filters[0]);let e=n.filters.map(r=>Qv(r)),t=Te.create(e,n.op);return t=kh(t),ZA(t)?t:(G(t instanceof Te),G(Ls(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>mw(r,i)))}function mw(n,e){let t;return G(n instanceof he||n instanceof Te),G(e instanceof he||e instanceof Te),t=n instanceof he?e instanceof he?function(i,o){return Te.create([i,o],"and")}(n,e):SS(n,e):e instanceof he?SS(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),Ls(i)&&Ls(o))return mA(i,o.getFilters());let s=Iv(i)?i:o,a=Iv(i)?o:i,u=s.filters.map(l=>mw(l,a));return Te.create(u,"or")}(n,e),kh(t)}function SS(n,e){if(Ls(e))return mA(e,n.getFilters());{let t=e.filters.map(r=>mw(n,r));return Te.create(t,"or")}}function kh(n){if(G(n instanceof he||n instanceof Te),n instanceof he)return n;let e=n.getFilters();if(e.length===1)return kh(e[0]);if(pA(n))return n;let t=e.map(i=>kh(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var Yv=class{constructor(){this.un=new Ju}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(un.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(un.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Ju=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xe(ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ge.comparator)).toArray()}};var sh=new Uint8Array(0),Zv=class{constructor(e,t){this.databaseId=t,this.cn=new Ju,this.ln=new qn(r=>ao(r),(r,i)=>ac(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Nt(i)};return AS(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[XS(t),""],!1,!0);return AS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Ln(s.parent))}return r})}addFieldIndex(e,t){let r=xu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Ds(e);return o.next(a=>{s.put(ES(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=xu(e),i=Ds(e),o=Es(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=xu(e),r=Es(e),i=Ds(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ph(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Es(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(u)} to execute ${ao(t)}`);let d=function(O,W){let X=fv(W);if(X===void 0)return null;for(let Q of Ch(O,X.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,u),f=function(O,W){let X=new Map;for(let Q of Zi(W))for(let I of Ch(O,Q.fieldPath))switch(I.op){case"==":case"in":X.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return X.set(Q.fieldPath.canonicalString(),I.value),Array.from(X.values())}return null}(l,u),g=function(O,W){let X=[],Q=!0;for(let I of Zi(W)){let v=I.kind===0?aS(O,I.fieldPath,O.startAt):uS(O,I.fieldPath,O.startAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Hn(X,Q)}(l,u),y=function(O,W){let X=[],Q=!0;for(let I of Zi(W)){let v=I.kind===0?uS(O,I.fieldPath,O.endAt):aS(O,I.fieldPath,O.endAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Hn(X,Q)}(l,u),D=this.In(u,l,g),A=this.In(u,l,y),x=this.Tn(u,l,f),F=this.En(u.indexId,d,D,g.inclusive,A,y.inclusive,x);return S.forEach(F,$=>r.G($,t.limit).next(O=>{O.forEach(W=>{let X=U.fromSegments(W.documentKey);s.has(X)||(s=s.add(X),a.push(X))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=pB(Te.create(e.filters,"and")).map(r=>Rv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):sh,y=this.An(e,g,r[f%l],i),D=this.Rn(e,g,o[f%l],s),A=a.map(x=>this.An(e,g,x,!0));d.push(...this.createRange(y,D,A))}return d}An(e,t,r,i){let o=new to(e,U.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new to(e,U.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Ph(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new xe(We.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new eo;for(let i of Zi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);pr.vt.It(o,s)}return r.zt()}dn(e){let t=new eo;return pr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new eo;return pr.vt.It(oo(this.databaseId,t),r.Yt(function(o){let s=Zi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new eo);let o=0;for(let s of Zi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&qu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);pr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new eo;u.seed(a.zt()),pr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=xu(e),i=Ds(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new ju(f.sequenceNumber,new un(lo(f.readTime),new U(Ln(f.documentKey)),f.largestBatchId)):ju.empty(),y=d.fields.map(([D,A])=>new Ms(We.fromServerFormat(D),A));return new Os(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=xu(e),o=Ds(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(ES(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?S.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return Es(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Es(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Es(e),o=new xe(Kr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new to(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new xe(Kr),i=this.Vn(t,e);if(i==null)return r;let o=fv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(qu(s))for(let a of s.arrayValue.values||[])r=r.add(new to(t.indexId,e.key,this.dn(a),i))}else r=r.add(new to(t.indexId,e.key,sh,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),D=l.getIterator(),A=Is(y),x=Is(D);for(;A||x;){let F=!1,$=!1;if(A&&x){let O=d(A,x);O<0?$=!0:O>0&&(F=!0)}else A!=null?$=!0:F=!0;F?(f(x),x=Is(D)):$?(g(A),A=Is(y)):(A=Is(y),x=Is(D))}}(i,o,Kr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Ds(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Kr(s,a)).filter((s,a,u)=>!a||Kr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Kr(s,e),u=Kr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,sh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,sh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Kr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xS)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||q())).next(xS)}};function AS(n){return st(n,"collectionParents")}function Es(n){return st(n,"indexEntries")}function xu(n){return st(n,"indexConfiguration")}function Ds(n){return st(n,"indexState")}function xS(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;sw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new un(e.readTime,e.documentKey,t)}var RS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},an=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function JA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{G(a===1)}));let l=[];for(let d of t.mutations){let f=oA(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return S.waitFor(o).next(()=>l)}function Oh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(41943040,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);var Fh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=xs(e),s=Qr(e);return s.add({}).next(a=>{G(typeof a=="number");let u=new Gu(a,t,r,i),l=function(y,D,A){let x=A.baseMutations.map($=>Zu(y.ct,$)),F=A.mutations.map($=>Zu(y.ct,$));return{userId:D,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:F}}(this.serializer,this.userId,u),d=[],f=new xe((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=oA(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,wj))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Qr(e).get(t).next(r=>r?(G(r.userId===this.userId),Xi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(G(a.batchId>=r),o=Xi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Qr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Xi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=lh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return xs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=Ln(d);if(l===this.userId&&t.path.isEqual(g))return Qr(e).get(f).next(y=>{if(!y)throw q();G(y.userId===this.userId),o.push(Xi(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(re),i=[];return t.forEach(o=>{let s=lh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=xs(e).J({range:a},(l,d,f)=>{let[g,y,D]=l,A=Ln(y);g===this.userId&&o.path.isEqual(A)?r=r.add(D):f.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=lh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xe(re);return xs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,D=Ln(g);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Qr(e).get(o).next(s=>{if(s===null)throw q();G(s.userId===this.userId),r.push(Xi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return JA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return xs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Ln(o[1]);i.push(u)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return XA(e,this.userId,t)}Nn(e){return ex(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function XA(n,e,t){let r=lh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return xs(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Qr(n){return st(n,"mutations")}function xs(n){return st(n,"documentMutations")}function ex(n){return st(n,"mutationQueues")}var $s=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Jv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new $s(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Z.fromTimestamp(new Le(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ts(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ts(e).J((s,a)=>{let u=Pu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ts(e).J((r,i)=>{let o=Pu(i);t(o)})}qn(e){return MS(e).get("targetGlobalKey").next(t=>(G(t!==null),t))}Qn(e,t){return MS(e).put("targetGlobalKey",t)}Kn(e,t){return Ts(e).put(QA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ao(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ts(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Pu(a);ac(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Yr(e);return t.forEach(s=>{let a=Nt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Yr(e);return S.forEach(t,o=>{let s=Nt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Yr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yr(e),o=se();return i.J({range:r,H:!0},(s,a,u)=>{let l=Ln(s[1]),d=new U(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=Nt(t.path),i=IDBKeyRange.bound([r],[XS(r)],!1,!0),o=0;return Yr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ts(e).get(t).next(r=>r?Pu(r):null)}};function Ts(n){return st(n,"targets")}function MS(n){return st(n,"targetGlobal")}function Yr(n){return st(n,"targetDocuments")}function NS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Xv=class{constructor(e){this.Un=e,this.buffer=new xe(NS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();NS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},e_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){di(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield li(t)}yield this.Hn(3e5)}))}},t_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Yt.oe);let r=new Xv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(RS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Cs()<=bn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function gB(n,e){return new t_(n,e)}var n_=class{constructor(e,t){this.db=e,this.garbageCollector=gB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return ah(e,r)}removeReference(e,t,r){return ah(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ah(e,t)}nr(e,t){return function(i,o){let s=!1;return ex(i).Y(a=>XA(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Z.min()),Yr(e).delete(function(f){return[0,Nt(f.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ah(e,t)}tr(e,t){let r=Yr(e),i,o=Yt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Yt.oe&&t(new U(Ln(i)),o),o=l,i=u):o=Yt.oe}).next(()=>{o!==Yt.oe&&t(new U(Ln(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ah(n,e){return Yr(n).put(function(r,i){return{targetId:0,path:Nt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Lh=class{constructor(){this.changes=new qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var r_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yi(e).put(r)}removeEntry(e,t,r){return Yi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Mh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ru(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ru(t))},(i,o)=>{r={document:this.ir(t,o),size:Oh(o)}}).next(()=>r)}getEntries(e,t){let r=Bt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Bt(),i=new ke(U.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Oh(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new xe(OS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ru(i.first()),Ru(i.last())),s=i.getIterator(),a=s.getNext();return Yi(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&OS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(Ru(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Mh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Bt();for(let f of l){let g=this.ir(U.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(cc(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Bt(),s=kS(t,r),a=kS(t,un.max());return Yi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new i_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PS(e).get("remoteDocumentGlobalKey").next(t=>(G(!!t),t))}rr(e,t){return PS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=hB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return tt.newInvalidDocument(e)}};function tx(n){return new r_(n)}var i_=class extends Lh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new qn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new xe((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=wS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Oh(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=wS(this.cr.serializer,s.convertToNoDocument(Z.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function PS(n){return st(n,"remoteDocumentGlobal")}function Yi(n){return st(n,"remoteDocumentsV14")}function Ru(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kS(n,e){let t=e.documentKey.path.toArray();return[n,Mh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var o_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Vh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fu(r.mutation,i,Zt.empty(),Le.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Bt(),s=Ou(),a=function(){return Ou()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Dn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Fu(d.mutation,l,d.mutation.getFieldMask(),Le.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new o_(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ou(),i=new ke((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Zt.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=CA();d.forEach(g=>{if(!o.has(g)){let y=NA(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Vn()),a=-1,u=o;return s.next(l=>S.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?S.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(d=>({batchId:a,changes:TA(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=Nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Nu();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(f,g){return new En(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,tt.newInvalidDocument(d)))});let a=Nu();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&Fu(d.mutation,l,Zt.empty(),Le.now()),cc(t,l)&&(a=a.insert(u,l))}),a})}};var s_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:gw(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var a_=class{constructor(){this.overlays=new ke(U.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Vn(),o=t.length+1,s=new U(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Vn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Vn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wu(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var u_=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Xu=class{constructor(){this.Tr=new xe(Xe.Er),this.dr=new xe(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new U(new ge([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new U(new ge([])),r=new Xe(t,e),i=new Xe(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return U.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||U.comparator(e.key,t.key)}};var c_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xe(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Gu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(re);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new U(o),0),a=new xe(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var l_=class{constructor(e){this.Mr=e,this.docs=function(){return new ke(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Bt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Bt(),s=t.path,a=new U(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||sw(tA(d),r)<=0||(i.has(d.key)||cc(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new d_(this)}getSize(e){return S.resolve(this.size)}},d_=class extends Lh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var h_=class{constructor(e){this.persistence=e,this.Nr=new qn(t=>ao(t),ac),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xu,this.targetCount=0,this.kr=$s.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new $s(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var jh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yt(0),this.Kr=!1,this.Kr=!0,this.$r=new u_,this.referenceDelegate=e(this),this.Ur=new h_(this),this.indexManager=new Yv,this.remoteDocumentCache=function(i){return new l_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Rh(t),this.Gr=new s_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new c_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new f_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},f_=class extends vh{constructor(e){super(),this.currentSequenceNumber=e}},Bh=class n{constructor(e){this.persistence=e,this.Jr=new Xu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var p_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new _h("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z0,{unique:!0}),u.createObjectStore("documentMutations")}(e),FS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),FS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z0,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return S.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:Nj});l.createIndex("collectionPathOverlayIndex",Pj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",kj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Ij});l.createIndex("documentKeyIndex",Ej),l.createIndex("collectionGroupIndex",Dj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Aj}).createIndex("sequenceNumberIndex",xj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Rj}).createIndex("documentKeyIndex",Mj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Oh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{G(u.userId===o.userId);let l=Xi(this.serializer,u);return JA(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ge(s),l=function(f){return[0,Nt(f)]}(u);o.push(t.get(l).next(d=>d?S.resolve():(f=>t.put({targetId:0,path:Nt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Sj});let r=t.store("collectionParents"),i=new Ju,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Nt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ge(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=Ln(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Pu(i),s=QA(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new U(ge.fromString(f.document.name).popFirst(5)):f.noDocument?U.fromSegments(f.noDocument.path):f.unknownDocument?U.fromSegments(f.unknownDocument.path):q()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=tx(this.serializer),o=new jh(Bh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:se();Xi(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),S.forEach(a,(u,l)=>{let d=new et(l),f=Nh.lt(this.serializer,d),g=o.getIndexManager(d),y=Fh.lt(d,this.serializer,g,o.referenceDelegate);return new Vh(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Uu(t,Yt.oe),u).next()})})}};function FS(n){n.createObjectStore("targetDocuments",{keyPath:Cj}).createIndex("documentTargetsIndex",bj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tj,{unique:!0}),n.createObjectStore("targetGlobal")}var nv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",g_=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new P(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n_(this,i),this.Ai=t+"main",this.serializer=new Rh(u),this.Ri=new ti(this.Ai,this.hi,new p_(this.serializer)),this.$r=new Hv,this.Ur=new Jv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tx(this.serializer),this.Gr=new $v,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(M.FAILED_PRECONDITION,nv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(di(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Mu(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return uh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=st(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(M.FAILED_PRECONDITION,nv);return!1}}return!(!this.networkEnabled||!this.inForeground)||uh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Uu(e,Yt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>uh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Fh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?Lj:u===16?Fj:u===15?uw:u===14?uA:u===13?aA:u===12?Oj:u===11?sA:void q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Uu(a,this.Qr?this.Qr.next():Yt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(M.FAILED_PRECONDITION,nA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(M.FAILED_PRECONDITION,nv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put("owner",t)}static D(){return ti.D()}bi(e){let t=Mu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;np()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Mu(n){return st(n,"owner")}function uh(n){return st(n,"clientMetadata")}function yw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var m_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var y_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Uh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return np()?8:rA(ba())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new y_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Cs()<=bn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Cs()<=bn.DEBUG&&k("QueryEngine","Query:",bs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Cs()<=bn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pt(t))):S.resolve())}Yi(e,t){if(cS(t))return S.resolve(null);let r=Pt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bh(t,null,"F"),r=Pt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,bh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return cS(t)||i.isEqual(Z.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Cs()<=bn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bs(t)),this.rs(e,s,t,eA(i,-1)).next(a=>a))})}ts(e,t){let r=new xe(EA(e));return t.forEach((i,o)=>{cc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Cs()<=bn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",bs(t)),this.Ji.getDocumentsMatchingQuery(e,t,un.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var v_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ke(re),this._s=new qn(o=>ao(o),ac),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function nx(n,e,t,r){return new v_(n,e,t,r)}function rx(n,e){return N(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function mB(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=S.resolve();return g.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(A=>{let x=l.docVersions.get(D);G(x!==null),A.version.compareTo(x)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ix(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function yB(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Qe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(A,x,F){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=Bt(),l=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(ox(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(Z.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function ox(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Bt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function vB(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hs(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Us(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function qs(n,e,t){return N(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!di(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function $h(n,e,t){let r=B(n),i=Z.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=B(u),g=f._s.get(d);return g!==void 0?S.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,Pt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Z.min(),t?o:se())).next(a=>(ux(r,IA(e),a),{documents:a,Ts:o})))}function sx(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function ax(n,e){let t=B(n),r=t.us.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,eA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ux(t,e,i),i))}function ux(n,e,t){let r=n.us.get(e)||Z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function _B(n,e,t,r){return N(this,null,function*(){let i=B(n),o=se(),s=Bt();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Hs(i,function(d){return Pt(Js(ge.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>ox(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function wB(r,i){return N(this,arguments,function*(n,e,t=se()){let o=yield Hs(n,Pt(gw(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function LS(n,e){return`firestore_clients_${n}_${e}`}function VS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rv(n,e){return`firestore_targets_${n}_${e}`}var Hh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Lu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},qh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=hw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=iA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},__=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},ec=class{constructor(){this.activeTargetIds=hw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Vu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=LS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ec),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(LS(this.persistenceKey,r));if(i){let o=qh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(rv(this.persistenceKey,e));if(i){let o=Lu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Yt.oe;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Yt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Hh(this.currentUser,e,t,r),o=VS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=VS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=rv(this.persistenceKey,e),o=new Lu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return qh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Hh.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Lu.Rs(i,t)}Ls(e){return __.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=hw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},zh=class{constructor(){this.so=new ec,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ec,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var w_=class{_o(e){}shutdown(){}};var Gh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ch=null;function iv(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}var IB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var I_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var wt="WebChannelConnection",E_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=iv(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(k("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw In("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=IB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=iv();return new Promise((s,a)=>{let u=new Yy;u.setWithCredentials(!0),u.listenOnce(Zy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Su.NO_ERROR:let d=u.getResponseJson();k(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Su.TIMEOUT:k(wt,`RPC '${e}' ${o} timed out`),a(new P(M.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:let f=u.getStatus();if(k(wt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(x){let F=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(F)>=0?F:M.UNKNOWN}(y.status);a(new P(D,y.message))}else a(new P(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(M.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{k(wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(wt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=iv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ev(),a=Xy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");k(wt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,D=new I_({Io:x=>{y?k(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(k(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(wt,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),A=(x,F,$)=>{x.listen(F,O=>{try{$(O)}catch(W){setTimeout(()=>{throw W},0)}})};return A(f,ws.EventType.OPEN,()=>{y||(k(wt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),A(f,ws.EventType.CLOSE,()=>{y||(y=!0,k(wt,`RPC '${e}' stream ${i} transport closed`),D.So())}),A(f,ws.EventType.ERROR,x=>{y||(y=!0,In(wt,`RPC '${e}' stream ${i} transport errored:`,x),D.So(new P(M.UNAVAILABLE,"The operation could not be completed")))}),A(f,ws.EventType.MESSAGE,x=>{var F;if(!y){let $=x.data[0];G(!!$);let O=$,W=O.error||((F=O[0])===null||F===void 0?void 0:F.error);if(W){k(wt,`RPC '${e}' stream ${i} received error:`,W);let X=W.status,Q=function(w){let E=Je[w];if(E!==void 0)return OA(E)}(X),I=W.message;Q===void 0&&(Q=M.INTERNAL,I="Unknown error status: "+X+" with message "+W.message),y=!0,D.So(new P(Q,I)),f.close()}else k(wt,`RPC '${e}' stream ${i} received:`,$),D.bo($)}}),A(a,Jy.STAT_EVENT,x=>{x.stat===oh.PROXY?k(wt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===oh.NOPROXY&&k(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function cx(){return typeof window<"u"?window:null}function ph(){return typeof document<"u"?document:null}function lc(n){return new Lv(n,!0)}var tc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Wh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},D_=class extends Wh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=oB(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?Ke(s.readTime):Z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Bv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Th(u)?{documents:HA(o,u)}:{query:qA(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=LA(o,s.resumeToken);let l=Vv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){a.readTime=Bs(o,s.snapshotVersion.toTimestamp());let l=Vv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=aB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Bv(this.serializer),t.removeTarget=e,this.a_(t)}},T_=class extends Wh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=sB(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Bv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Zu(this.serializer,r))};this.a_(t)}};var C_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,jv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(M.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,jv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},b_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var S_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){hi(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.L_.add(4),yield Xs(l),l.q_.set("Unknown"),l.L_.delete(4),yield dc(l)})}(this))}))}),this.q_=new b_(r,i)}};function dc(n){return N(this,null,function*(){if(hi(n))for(let e of n.B_)yield e(!0)})}function Xs(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function gf(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ww(t)?_w(t):ta(t).r_()&&vw(t,e))}function zs(n,e){let t=B(n),r=ta(t);t.N_.delete(e),r.r_()&&lx(t,e),t.N_.size===0&&(r.r_()?r.o_():hi(t)&&t.q_.set("Unknown"))}function vw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(n).A_(e)}function lx(n,e){n.Q_.xe(e),ta(n).R_(e)}function _w(n){n.Q_=new Fv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ta(n).start(),n.q_.v_()}function ww(n){return hi(n)&&!ta(n).n_()&&n.N_.size>0}function hi(n){return B(n).L_.size===0}function dx(n){n.Q_=void 0}function EB(n){return N(this,null,function*(){n.q_.set("Online")})}function DB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{vw(n,e)})})}function TB(n,e){return N(this,null,function*(){dx(n),ww(n)?(n.q_.M_(e),_w(n)):n.q_.set("Unknown")})}function CB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Ah&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kh(n,r)}else if(e instanceof Ps?n.Q_.Ke(e):e instanceof Sh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Z.min()))try{let r=yield ix(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(Qe.EMPTY_BYTE_STRING,d.snapshotVersion)),lx(o,u);let f=new Us(d.target,u,l,d.sequenceNumber);vw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Kh(n,r)}})}function Kh(n,e,t){return N(this,null,function*(){if(!di(e))throw e;n.L_.add(1),yield Xs(n),n.q_.set("Offline"),t||(t=()=>ix(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield dc(n)}))})}function hx(n,e){return e().catch(t=>Kh(n,t,e))}function ea(n){return N(this,null,function*(){let e=B(n),t=ci(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bB(e);)try{let i=yield vB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,SB(e,i)}catch(i){yield Kh(e,i)}fx(e)&&px(e)})}function bB(n){return hi(n)&&n.O_.length<10}function SB(n,e){n.O_.push(e);let t=ci(n);t.r_()&&t.V_&&t.m_(e.mutations)}function fx(n){return hi(n)&&!ci(n).n_()&&n.O_.length>0}function px(n){ci(n).start()}function AB(n){return N(this,null,function*(){ci(n).p_()})}function xB(n){return N(this,null,function*(){let e=ci(n);for(let t of n.O_)e.m_(t.mutations)})}function RB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=Pv.from(r,e,t);yield hx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ea(n)})}function MB(n,e){return N(this,null,function*(){e&&ci(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return kA(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();ci(r).s_(),yield hx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ea(r)}})}(n,e)),fx(n)&&px(n)})}function jS(n,e){return N(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=hi(t);t.L_.add(3),yield Xs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield dc(t)})}function A_(n,e){return N(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield dc(t)):e||(t.L_.add(2),yield Xs(t),t.q_.set("Unknown"))})}function ta(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new D_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:EB.bind(null,n),Ro:DB.bind(null,n),mo:TB.bind(null,n),d_:CB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),ww(n)?_w(n):n.q_.set("Unknown")):(yield n.K_.stop(),dx(n))}))),n.K_}function ci(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new T_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AB.bind(null,n),mo:MB.bind(null,n),f_:xB.bind(null,n),g_:RB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ea(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var x_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function na(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),di(n))return new P(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Qh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=Nu(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Yh=class{constructor(){this.W_=new ke(U.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Gs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Qh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var R_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},M_=class{constructor(){this.queries=BS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=BS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(M.ABORTED,"Firestore shutting down"))}};function BS(){return new qn(n=>wA(n),uc)}function Iw(n,e){return N(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new R_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=na(s,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Dw(t)})}function Ew(n,e){return N(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function NB(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Dw(t)}function PB(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Dw(n){n.Y_.forEach(e=>{e.next()})}var N_,US;(US=N_||(N_={})).ea="default",US.Cache="cache";var nc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==N_.Cache}};var P_=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Zh=class{constructor(e){this.serializer=e}Es(e){return Bn(this.serializer,e)}ds(e){return e.metadata.exists?$A(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},k_=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ge.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Zh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield _B(this.localStore,new Zh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield wB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function gx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Jh=class{constructor(e){this.key=e}},Xh=class{constructor(e){this.key=e}},ef=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=EA(e),this.Ra=new Qh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Yh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=cc(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?D!==A&&(r.track({type:3,doc:y}),x=!0):this.ga(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,D){let A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return A(y)-A(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Gs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Jh(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},O_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},F_=class{constructor(e){this.key=e,this.va=!1}},L_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new qn(a=>wA(a),uc),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(U.comparator),this.Na=new Map,this.La=new Xu,this.Ba={},this.ka=new Map,this.qa=$s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function kB(n,e,t=!0){return N(this,null,function*(){let r=mf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield mx(r,e,t,!0),i})}function OB(n,e){return N(this,null,function*(){let t=mf(n);yield mx(t,e,!0,!1)})}function mx(n,e,t,r){return N(this,null,function*(){let i=yield Hs(n.localStore,Pt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Tw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&gf(n.remoteStore,i),a})}function Tw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(A,x,F,$){return N(this,null,function*(){let O=x.view.ma(F);O.ns&&(O=yield $h(A.localStore,x.query,!1).then(({documents:I})=>x.view.ma(I,O)));let W=$&&$.targetChanges.get(x.targetId),X=$&&$.targetMismatches.get(x.targetId)!=null,Q=x.view.applyChanges(O,A.isPrimaryClient,W,X);return V_(A,x.targetId,Q.wa),Q.snapshot})}(n,f,g,y);let o=yield $h(n.localStore,e,!0),s=new ef(e,o.Ts),a=s.ma(o.documents),u=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);V_(n,t,l.wa);let d=new O_(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function FB(n,e,t){return N(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!uc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zs(r.remoteStore,i.targetId),Ws(r,i.targetId)}).catch(li))):(Ws(r,i.targetId),yield qs(r.localStore,i.targetId,!0))})}function LB(n,e){return N(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zs(t.remoteStore,r.targetId))})}function VB(n,e,t){return N(this,null,function*(){let r=Aw(n);try{let i=yield function(s,a){let u=B(s),l=Le.now(),d=a.reduce((y,D)=>y.add(D.key),se()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Bt(),A=se();return u.cs.getEntries(y,d).next(x=>{D=x,D.forEach((F,$)=>{$.isValidDocument()||(A=A.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(x=>{f=x;let F=[];for(let $ of a){let O=Jj($,f.get($.key).overlayedDocument);O!=null&&F.push(new Dn($.key,O,fA(O.value.mapValue),He.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(x=>{g=x;let F=x.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(y,x.batchId,F)})}).then(()=>({batchId:g.batchId,changes:TA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ir(r,i.changes),yield ea(r.remoteStore)}catch(i){let o=na(i,"Failed to persist write");t.reject(o)}})}function yx(n,e){return N(this,null,function*(){let t=B(n);try{let r=yield yB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?G(s.va):i.removedDocuments.size>0&&(G(s.va),s.va=!1))}),yield Ir(t,r,e)}catch(r){yield li(r)}})}function $S(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&Dw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jB(n,e,t){return N(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ke(U.comparator);s=s.insert(o,tt.newNoDocument(o,Z.min()));let a=se().add(o),u=new Ku(Z.min(),new Map,new ke(re),s,a);yield yx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Sw(r)}else yield qs(r.localStore,e,!1).then(()=>Ws(r,e,t)).catch(li)})}function BB(n,e){return N(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield mB(t.localStore,e);bw(t,r,null),Cw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ir(t,i)}catch(i){yield li(i)}})}function UB(n,e,t){return N(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(G(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);bw(r,e,t),Cw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ir(r,i)}catch(i){yield li(i)}})}function $B(n,e){return N(this,null,function*(){let t=B(n);hi(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=na(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Cw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function bw(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ws(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||vx(n,r)})}function vx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(zs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Sw(n))}function V_(n,e,t){for(let r of t)r instanceof Jh?(n.La.addReference(r.key,e),HB(n,r)):r instanceof Xh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||vx(n,r.key)):q()}function HB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Sw(n))}function Sw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new U(ge.fromString(e)),r=n.qa.next();n.Na.set(r,new F_(t)),n.Oa=n.Oa.insert(t,r),gf(n.remoteStore,new Us(Pt(Js(t.path)),r,"TargetPurposeLimboResolution",Yt.oe))}}function Ir(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=m_.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=B(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>S.forEach(l,g=>S.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>S.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!di(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),D=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(g,A)}}})}(r.localStore,o))})}function qB(n,e){return N(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield rx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(M.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ir(t,r.hs)}})}function zB(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function GB(n,e){return N(this,null,function*(){let t=B(n),r=yield $h(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&V_(t,e.targetId,i.wa),i})}function WB(n,e){return N(this,null,function*(){let t=B(n);return ax(t.localStore,e).then(r=>Ir(t,r))})}function KB(n,e,t,r){return N(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),d=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(bw(i,e,r||null),Cw(i,e),function(a,u){B(B(a).mutationQueue).On(u)}(i.localStore,e)):q(),yield Ir(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function QB(n,e){return N(this,null,function*(){let t=B(n);if(mf(t),Aw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield HS(t,r.toArray());t.Qa=!0,yield A_(t.remoteStore,!0);for(let o of i)gf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ws(t,s),qs(t.localStore,s,!0))),zs(t.remoteStore,s)}),yield i,yield HS(t,r),function(s){let a=B(s);a.Na.forEach((u,l)=>{zs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke(U.comparator)}(t),t.Qa=!1,yield A_(t.remoteStore,!1)}})}function HS(n,e,t){return N(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Hs(r.localStore,Pt(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield GB(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield sx(r.localStore,s);a=yield Hs(r.localStore,l),yield Tw(r,_x(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function _x(n){return _A(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YB(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function ZB(n,e,t,r){return N(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield ax(i.localStore,IA(o[0])),a=Ku.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield Ir(i,s,a);break}case"rejected":yield qs(i.localStore,e,!0),Ws(i,e,r);break;default:q()}})}function JB(n,e,t){return N(this,null,function*(){let r=mf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield sx(r.localStore,i),s=yield Hs(r.localStore,o);yield Tw(r,_x(o),s.targetId,!1,s.resumeToken),gf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield qs(r.localStore,i,!1).then(()=>{zs(r.remoteStore,i),Ws(r,i)}).catch(li))}})}function mf(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jB.bind(null,e),e.Ca.d_=NB.bind(null,e.eventManager),e.Ca.$a=PB.bind(null,e.eventManager),e}function Aw(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UB.bind(null,e),e}function XB(n,e,t){let r=B(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let A=B(y),x=Ke(D.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",F=>A.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(x)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(gx(u));let l=new k_(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield Ir(o,f.Ia,void 0),yield function(y,D){let A=B(y);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return In("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var j_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=lc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return nx(this.persistence,new Uh,t.initialUser,this.serializer)}Ga(t){return new jh(Bh.Zr,this.serializer)}Wa(t){return new zh}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var tf=class n extends j_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield ep(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Aw(this.Ja.syncEngine),yield ea(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return nx(this.persistence,new Uh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new e_(r,e.asyncQueue,t)}Ha(e,t){let r=new yv(t,this.persistence);return new mv(e.asyncQueue,r)}Ga(e){let t=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new g_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cx(),ph(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new zh}},B_=class n extends tf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield ep(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Vu&&(this.sharedClientState.syncEngine={no:KB.bind(null,t),ro:ZB.bind(null,t),io:JB.bind(null,t),Qi:YB.bind(null,t),eo:WB.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield QB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=cx();if(!Vu.D(t))throw new P(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},xw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$S(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qB.bind(null,this.syncEngine),yield A_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new M_}()}createDatastore(t){let r=lc(t.databaseInfo.databaseId),i=function(s){return new E_(s)}(t.databaseInfo);return function(s,a,u,l){return new C_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new S_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>$S(this.syncEngine,r,0),function(){return Gh.D()?new Gh:new w_}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new L_(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Xs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function qS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ks=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var U_=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ot,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new P_(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var $_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>Yu(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ge.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=iB(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());G(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ui(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=U.fromPath(r);this.mutations.push(new zu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>Zu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ge.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw q();t=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new P(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var H_=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new tc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new $_(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!sc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kA(t)}return!1}};var q_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=mh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=na(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ov(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield rx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function zS(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Rw(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jS(e.remoteStore,i)),n._onlineComponents=e})}function Rw(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ov(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;In("Error using user provided cache. Falling back to memory cache: "+t),yield ov(n,new j_)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield ov(n,new j_);return n._offlineComponents})}function yf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield zS(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield zS(n,new xw))),n._onlineComponents})}function wx(n){return Rw(n).then(e=>e.persistence)}function Mw(n){return Rw(n).then(e=>e.localStore)}function Ix(n){return yf(n).then(e=>e.remoteStore)}function Nw(n){return yf(n).then(e=>e.syncEngine)}function eU(n){return yf(n).then(e=>e.datastore)}function Qs(n){return N(this,null,function*(){let e=yield yf(n),t=e.eventManager;return t.onListen=kB.bind(null,e.syncEngine),t.onUnlisten=FB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LB.bind(null,e.syncEngine),t})}function tU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield wx(n),t=yield Ix(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),dc(o)}(t)}))}function nU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield wx(n),t=yield Ix(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.L_.add(0),yield Xs(o),o.q_.set("Offline")})}(t)}))}function rU(n,e){let t=new ot;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=na(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Mw(n),e,t)})),t.promise}function Ex(n,e,t={}){let r=new ot;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ks({next:g=>{d.Za(),s.enqueueAndForget(()=>Ew(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new P(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new P(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new nc(Js(a.path),d,{includeMetadataChanges:!0,_a:!0});return Iw(o,f)}(yield Qs(n),n.asyncQueue,e,t,r)})),r.promise}function iU(n,e){let t=new ot;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield $h(i,o,!0),u=new ef(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=na(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Mw(n),e,t)})),t.promise}function Dx(n,e,t={}){let r=new ot;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ks({next:g=>{d.Za(),s.enqueueAndForget(()=>Ew(o,f)),g.fromCache&&u.source==="server"?l.reject(new P(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new nc(a,d,{includeMetadataChanges:!0,_a:!0});return Iw(o,f)}(yield Qs(n),n.asyncQueue,e,t,r)})),r.promise}function oU(n,e){let t=new Ks(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield Qs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield Qs(n),t)}))}}function sU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?FA().encode(s):s,function(d,f){return new U_(d,f)}(function(d,f){if(d instanceof Uint8Array)return qS(d,f);if(d instanceof ArrayBuffer)return qS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,lc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){XB(yield Nw(n),i,r)}))}function aU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Mw(n),e)}))}function Tx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var GS=new Map;function Pw(n,e,t){if(!t)throw new P(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kw(n,e,t,r){if(e===!0&&r===!0)throw new P(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function WS(n){if(!U.isDocumentKey(n))throw new P(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KS(n){if(U.isDocumentKey(n))throw new P(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=vf(n);throw new P(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Cx(n,e){if(e<=0)throw new P(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var nf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ho=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sv;switch(r.type){case"firstParty":return new lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=GS.get(t);r&&(k("ComponentProvider","Removing Datastore"),GS.delete(t),r.terminate())}(this),Promise.resolve()}};function bx(n,e,t,r={}){var i;let o=(n=ye(n,ho))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=et.MOCK_USER;else{a=aE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new et(l)}n._authCredentials=new av(new gh(a,u))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Un=class n extends dt{constructor(e,t,r){super(e,t,Js(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ow(n,e,...t){if(n=Fe(n),Pw("collection","path",e),n instanceof ho){let r=ge.fromString(e,...t);return KS(r),new Un(n,null,r)}{if(!(n instanceof Me||n instanceof Un))throw new P(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return KS(r),new Un(n.firestore,null,r)}}function Sx(n,e){if(n=ye(n,ho),Pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new En(ge.emptyPath(),r)}(e))}function hc(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=mh.newId()),Pw("doc","path",e),n instanceof ho){let r=ge.fromString(e,...t);return WS(r),new Me(n,null,new U(r))}{if(!(n instanceof Me||n instanceof Un))throw new P(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return WS(r),new Me(n.firestore,n instanceof Un?n.converter:null,new U(r))}}function Fw(n,e){return n=Fe(n),e=Fe(e),(n instanceof Me||n instanceof Un)&&(e instanceof Me||e instanceof Un)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Lw(n,e){return n=Fe(n),e=Fe(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&uc(n._query,e._query)&&n.converter===e.converter}var rf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tc(this,"async_queue_retry"),this.Vu=()=>{let r=ph();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=ph();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=ph();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ot;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!di(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=x_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&q()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function z_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var G_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ot,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Ax=-1,Ve=class extends ho{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rf(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xx(n),n._firestoreClient}function xx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new vv(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Tx(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new q_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function Rx(n,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return Nx(n,xw.provider,{build:r=>new tf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function Mx(n){return N(this,null,function*(){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();Nx(n,xw.provider,{build:t=>new B_(t,e.cacheSizeBytes)})})}function Nx(n,e,t){if((n=ye(n,Ve))._firestoreClient||n._terminated)throw new P(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xx(n)}function Px(n){if(n._initialized&&!n._terminated)throw new P(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ot;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!ti.D())return Promise.resolve();let i=r+"main";yield ti.delete(i)})}(yw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function kx(n){return function(t){let r=new ot;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return $B(yield Nw(t),r)})),r.promise}(ht(n=ye(n,Ve)))}function Ox(n){return tU(ht(n=ye(n,Ve)))}function Fx(n){return nU(ht(n=ye(n,Ve)))}function Lx(n,e){let t=ht(n=ye(n,Ve)),r=new G_;return sU(t,n._databaseId,e,r),r}function Vx(n,e){return aU(ht(n=ye(n,Ve)),e).then(t=>t?new dt(n,null,t.query):null)}var zn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Tn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _r=class{constructor(e){this._methodName=e}};var fo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var rc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var uU=/^__.*__$/,W_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ai(e,this.data,t,this.fieldTransforms)}},of=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function jx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var sf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return af(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jx(this.Cu)&&uU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},K_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lc(e)}Qu(e,t,r,i=!1){return new sf({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yo(n){let e=n._freezeSettings(),t=lc(n._databaseId);return new K_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _f(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Bw("Data must be an object, but it was:",s,r);let a=$x(r,s),u,l;if(o.merge)u=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=X_(e,f,t);if(!s.contains(g))throw new P(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);qx(d,g)||d.push(g)}u=new Zt(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new W_(new It(a),u,l)}var ic=class n extends _r{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Bx(n,e,t){return new sf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Q_=class n extends _r{_toFieldTransform(e){return new uo(e.path,new oi)}isEqual(e){return e instanceof n}},Y_=class n extends _r{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Bx(this,e,!0),r=this.Ku.map(o=>vo(o,t)),i=new yr(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&rp(this.Ku,e.Ku)}},Z_=class n extends _r{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Bx(this,e,!0),r=this.Ku.map(o=>vo(o,t)),i=new vr(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&rp(this.Ku,e.Ku)}},J_=class n extends _r{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new si(e.serializer,SA(e.serializer,this.$u));return new uo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Vw(n,e,t,r){let i=n.Qu(1,e,t);Bw("Data must be an object, but it was:",i,r);let o=[],s=It.empty();mo(r,(u,l)=>{let d=Uw(e,u,t);l=Fe(l);let f=i.Nu(d);if(l instanceof ic)o.push(d);else{let g=vo(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Zt(o);return new of(s,a,i.fieldTransforms)}function jw(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[X_(e,r,t)],u=[i];if(o.length%2!=0)throw new P(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(X_(e,o[g])),u.push(o[g+1]);let l=[],d=It.empty();for(let g=a.length-1;g>=0;--g)if(!qx(l,a[g])){let y=a[g],D=u[g];D=Fe(D);let A=s.Nu(y);if(D instanceof ic)l.push(y);else{let x=vo(D,A);x!=null&&(l.push(y),d.set(y,x))}}let f=new Zt(l);return new of(d,f,s.fieldTransforms)}function Ux(n,e,t,r=!1){return vo(t,n.Qu(r?4:3,e))}function vo(n,e){if(Hx(n=Fe(n)))return Bw("Unsupported field value:",e,n),$x(n,e);if(n instanceof _r)return function(r,i){if(!jx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=vo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:Bs(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bs(i.serializer,o)}}if(r instanceof fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:LA(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return fw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vf(r)}`)}(n,e)}function $x(n,e){let t={};return cA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(n,(r,i)=>{let o=vo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Hx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof fo||n instanceof zn||n instanceof Me||n instanceof _r||n instanceof rc)}function Bw(n,e,t){if(!Hx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=vf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function X_(n,e,t){if((e=Fe(e))instanceof Tn)return e._internalPath;if(typeof e=="string")return Uw(n,e);throw af("Field path arguments must be of type string or ",n,!1,void 0,t)}var cU=new RegExp("[~\\*/\\[\\]]");function Uw(n,e,t){if(e.search(cU)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tn(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function af(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(M.INVALID_ARGUMENT,a+n+u)}function qx(n,e){return n.some(t=>t.isEqual(e))}var po=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ew(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(wf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ew=class extends po{data(){return super.data()}};function wf(n,e){return typeof e=="string"?Uw(n,e):e instanceof Tn?e._internalPath:e._delegate._internalPath}function zx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var oc=class{},go=class extends oc{};function Er(n,e,...t){let r=[];e instanceof oc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof tw).length,a=o.filter(u=>u instanceof uf).length;if(s>1||s>0&&a>0)throw new P(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var uf=class n extends go{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tR(e._query,t),new dt(e.firestore,e.converter,Mv(e._query,t))}_parse(e){let t=yo(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new P(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){YS(f,d);let y=[];for(let D of f)y.push(QS(u,o,D));g={arrayValue:{values:y}}}else g=QS(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||YS(f,d),g=Ux(a,s,f,d==="in"||d==="not-in");return he.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Gx(n,e,t){let r=e,i=wf("where",n);return uf._create(i,r,t)}var tw=class n extends oc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)tR(s,u),s=Mv(s,u)}(e._query,t),new dt(e.firestore,e.converter,Mv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var nw=class n extends go{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new so(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new En(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Wx(n,e="asc"){let t=e,r=wf("orderBy",n);return nw._create(r,t)}var cf=class n extends go{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}};function Kx(n){return Cx("limit",n),cf._create("limit",n,"F")}function Qx(n){return Cx("limitToLast",n),cf._create("limitToLast",n,"L")}var lf=class n extends go{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eR(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Yx(...n){return lf._create("startAt",n,!0)}function Zx(...n){return lf._create("startAfter",n,!1)}var df=class n extends go{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eR(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new En(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Jx(...n){return df._create("endBefore",n,!1)}function Xx(...n){return df._create("endAt",n,!0)}function eR(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof po)return function(o,s,a,u,l){if(!u)throw new P(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ns(o))if(f.field.isKeyField())d.push(oo(s,u.key));else{let g=u.data.field(f.field);if(ff(g))throw new P(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new P(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Hn(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=yo(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new P(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let A=d[D];if(g[D].field.isKeyField()){if(typeof A!="string")throw new P(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!dw(s)&&A.indexOf("/")!==-1)throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let x=s.path.child(ge.fromString(A));if(!U.isDocumentKey(x))throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let F=new U(x);y.push(oo(a,F))}else{let x=Ux(u,l,A);y.push(x)}}return new Hn(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QS(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dw(e)&&t.indexOf("/")!==-1)throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ge.fromString(t));if(!U.isDocumentKey(r))throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oo(n,new U(r))}if(t instanceof Me)return oo(n,t._key);throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(t)}.`)}function YS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ys=class{convertValue(e,t="none"){switch(io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return mo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new rc(o)}convertGeoPoint(e){return new fo(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){let t=mr(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ge.fromString(e);G(KA(r));let i=new ri(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function If(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var rw=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var gr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cn=class extends po{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Xr=class extends cn{data(e={}){return super.data(e)}},Cn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xr(this._firestore,this._userDataWriter,r.key,r,new gr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Xr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Xr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:lU(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function lU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function $w(n,e){return n instanceof cn&&e instanceof cn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cn&&e instanceof Cn&&n._firestore===e._firestore&&Lw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nR(n){n=ye(n,Me);let e=ye(n.firestore,Ve);return Ex(ht(e),n._key).then(t=>Gw(e,n,t))}var wr=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function rR(n){n=ye(n,Me);let e=ye(n.firestore,Ve),t=ht(e),r=new wr(e);return rU(t,n._key).then(i=>new cn(e,r,n._key,i,new gr(i!==null&&i.hasLocalMutations,!0),n.converter))}function iR(n){n=ye(n,Me);let e=ye(n.firestore,Ve);return Ex(ht(e),n._key,{source:"server"}).then(t=>Gw(e,n,t))}function oR(n){n=ye(n,dt);let e=ye(n.firestore,Ve),t=ht(e),r=new wr(e);return zx(n._query),Dx(t,n._query).then(i=>new Cn(e,r,n,i))}function sR(n){n=ye(n,dt);let e=ye(n.firestore,Ve),t=ht(e),r=new wr(e);return iU(t,n._query).then(i=>new Cn(e,r,n,i))}function aR(n){n=ye(n,dt);let e=ye(n.firestore,Ve),t=ht(e),r=new wr(e);return Dx(t,n._query,{source:"server"}).then(i=>new Cn(e,r,n,i))}function Hw(n,e,t){n=ye(n,Me);let r=ye(n.firestore,Ve),i=If(n.converter,e,t);return ra(r,[_f(yo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function qw(n,e,t,...r){n=ye(n,Me);let i=ye(n.firestore,Ve),o=yo(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof Tn?jw(o,"updateDoc",n._key,e,t,r):Vw(o,"updateDoc",n._key,e),ra(i,[s.toMutation(n._key,He.exists(!0))])}function uR(n){return ra(ye(n.firestore,Ve),[new ui(n._key,He.none())])}function cR(n,e){let t=ye(n.firestore,Ve),r=hc(n),i=If(n.converter,e);return ra(t,[_f(yo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function zw(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||z_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(z_(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof Me)l=ye(n.firestore,Ve),d=Js(n._key.path),u={next:f=>{e[s]&&e[s](Gw(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ye(n,dt);l=ye(f.firestore,Ve),d=f._query;let g=new wr(l);u={next:y=>{e[s]&&e[s](new Cn(l,g,f,y))},error:e[s+1],complete:e[s+2]},zx(n._query)}return function(g,y,D,A){let x=new Ks(A),F=new nc(y,x,D);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Iw(yield Qs(g),F)})),()=>{x.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Ew(yield Qs(g),F)}))}}(ht(l),d,a,u)}function lR(n,e){return oU(ht(n=ye(n,Ve)),z_(e)?e:{next:e})}function ra(n,e){return function(r,i){let o=new ot;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return VB(yield Nw(r),i,o)})),o.promise}(ht(n),e)}function Gw(n,e,t){let r=t.docs.get(e._key),i=new wr(n);return new cn(n,i,e._key,r,new gr(t.hasPendingWrites,t.fromCache),e.converter)}var dU={maxAttempts:5};var hf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yo(e)}set(e,t,r){this._verifyNotCommitted();let i=Zr(e,this._firestore),o=If(i.converter,t,r),s=_f(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Zr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof Tn?jw(this._dataReader,"WriteBatch.update",o._key,t,r,i):Vw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Zr(e,this._firestore);return this._mutations=this._mutations.concat(new ui(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Zr(n,e){if((n=Fe(n)).firestore!==e)throw new P(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var iw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=yo(t)}get(t){let r=Zr(t,this._firestore),i=new rw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return q();let s=o[0];if(s.isFoundDocument())return new po(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new po(this._firestore,i,r._key,null,r.converter);throw q()})}set(t,r,i){let o=Zr(t,this._firestore),s=If(o.converter,r,i),a=_f(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Zr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof Tn?jw(this._dataReader,"Transaction.update",s._key,r,i,o):Vw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Zr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Zr(e,this._firestore),r=new wr(this._firestore);return super.get(e).then(i=>new cn(this._firestore,r,t._key,i._document,new gr(!1,!1),t.converter))}};function dR(n,e,t){n=ye(n,Ve);let r=Object.assign(Object.assign({},dU),t);return function(o){if(o.maxAttempts<1)throw new P(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new ot;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield eU(o);new H_(o.asyncQueue,l,a,s,u).au()})),u.promise}(ht(n),i=>e(new iw(n,i)),r)}function hR(){return new ic("deleteField")}function fR(){return new Q_("serverTimestamp")}function pR(...n){return new Y_("arrayUnion",n)}function gR(...n){return new Z_("arrayRemove",n)}function mR(n){return new J_("increment",n)}(function(e,t=!0){(function(i){Zs=i})(lE),Sa(new yi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ve(new uv(r.getProvider("auth-internal")),new hv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ri(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Sr(K0,"4.7.3",e),Sr(K0,"4.7.3","esm2017")})();var hU="@firebase/firestore-compat",fU="0.3.38";function Jw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yR(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function vR(){if(!lA())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ef=class n{constructor(e){this._delegate=e}static fromBase64String(e){return vR(),new n(zn.fromBase64String(e))}static fromUint8Array(e){return yR(),new n(zn.fromUint8Array(e))}toBase64(){return vR(),this._delegate.toBase64()}toUint8Array(){return yR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Ww(n){return pU(n,["next","error","complete"])}function pU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var Kw=class{enableIndexedDbPersistence(e,t){return Rx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Mx(e._delegate)}clearIndexedDbPersistence(e){return Px(e._delegate)}},Df=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ri||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&In("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){bx(this._delegate,e,t,r)}enableNetwork(){return Ox(this._delegate)}disableNetwork(){return Fx(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return kx(this._delegate)}onSnapshotsInSync(e){return lR(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sa(this,Ow(this._delegate,e))}catch(t){throw kt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gn(this,hc(this._delegate,e))}catch(t){throw kt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Eo(this,Sx(this._delegate,e))}catch(t){throw kt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return dR(this._delegate,t=>e(new Tf(this,t)))}batch(){return ht(this._delegate),new Cf(new hf(this._delegate,e=>ra(this._delegate,e)))}loadBundle(e){return Lx(this._delegate,e)}namedQuery(e){return Vx(this._delegate,e).then(t=>t?new Eo(this,t):null)}},ia=class extends Ys{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(new zn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Gn.forKey(t,this.firestore,null)}};function gU(n){ZS(n)}var Tf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}get(e){let t=_o(e);return this._delegate.get(t).then(r=>new wo(this._firestore,new cn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=_o(e);return r?(Jw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=_o(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=_o(e);return this._delegate.delete(t),this}},Cf=class{constructor(e){this._delegate=e}set(e,t,r){let i=_o(e);return r?(Jw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=_o(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=_o(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},oa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Xr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Io(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ia(e),t),i.set(t,o)),o}};oa.INSTANCES=new WeakMap;var Gn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new U(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sa(this.firestore,Ow(this._delegate,e))}catch(t){throw kt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Me?Fw(this._delegate,e):!1}set(e,t){t=Jw("DocumentReference.set",t);try{return t?Hw(this._delegate,e,t):Hw(this._delegate,e)}catch(r){throw kt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?qw(this._delegate,e):qw(this._delegate,e,t,...r)}catch(i){throw kt(i,"updateDoc()","DocumentReference.update()")}}delete(){return uR(this._delegate)}onSnapshot(...e){let t=_R(e),r=wR(e,i=>new wo(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zw(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=rR(this._delegate):e?.source==="server"?t=iR(this._delegate):t=nR(this._delegate),t.then(r=>new wo(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function kt(n,e,t){return n.message=n.message.replace(e,t),n}function _R(n){for(let e of n)if(typeof e=="object"&&!Ww(e))return e;return{}}function wR(n,e){var t,r;let i;return Ww(n[0])?i=n[0]:Ww(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var wo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $w(this._delegate,e._delegate)}},Io=class extends wo{data(e){let t=this._delegate.data(e);return this._delegate._converter||JS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Eo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ia(e)}where(e,t,r){try{return new n(this.firestore,Er(this._delegate,Gx(e,t,r)))}catch(i){throw kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Er(this._delegate,Wx(e,t)))}catch(r){throw kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Er(this._delegate,Kx(e)))}catch(t){throw kt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Er(this._delegate,Qx(e)))}catch(t){throw kt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Er(this._delegate,Yx(...e)))}catch(t){throw kt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Er(this._delegate,Zx(...e)))}catch(t){throw kt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Er(this._delegate,Jx(...e)))}catch(t){throw kt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Er(this._delegate,Xx(...e)))}catch(t){throw kt(t,"endAt()","Query.endAt()")}}isEqual(e){return Lw(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=sR(this._delegate):e?.source==="server"?t=aR(this._delegate):t=oR(this._delegate),t.then(r=>new fc(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=_R(e),r=wR(e,i=>new fc(this.firestore,new Cn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zw(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Qw=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Io(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},fc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Io(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Qw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Io(this._firestore,r))})}isEqual(e){return $w(this._delegate,e._delegate)}},sa=class n extends Eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Gn(this.firestore,e):null}doc(e){try{return e===void 0?new Gn(this.firestore,hc(this._delegate)):new Gn(this.firestore,hc(this._delegate,e))}catch(t){throw kt(t,"doc()","CollectionReference.doc()")}}add(e){return cR(this._delegate,e).then(t=>new Gn(this.firestore,t))}isEqual(e){return Fw(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function _o(n){return ye(n,Me)}var Yw=class n{constructor(...e){this._delegate=new Tn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof Tn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Zw=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=fR();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=hR();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=pR(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=gR(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=mR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var mU={Firestore:Df,GeoPoint:fo,Timestamp:Le,Blob:Ef,Transaction:Tf,WriteBatch:Cf,DocumentReference:Gn,DocumentSnapshot:wo,Query:Eo,QueryDocumentSnapshot:Io,QuerySnapshot:fc,CollectionReference:sa,FieldPath:Yw,FieldValue:Zw,setLogLevel:gU,CACHE_SIZE_UNLIMITED:Ax};function yU(n,e){n.INTERNAL.registerComponent(new yi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mU)))}function vU(n){yU(n,(e,t)=>new Df(e,t,new Kw)),n.registerVersion(hU,fU)}vU(Tt);function _U(n,e=Ii){return new de(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function IR(n,e){return _U(n,e)}function wU(n,e){return IR(n,e).pipe(Ti(void 0),Oa(),ee(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function tI(n,e){return IR(n,e).pipe(ee(t=>({payload:t,type:"query"})))}var bf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=bR(r,t);return new Af(i,o,this.afs)}snapshotChanges(){return wU(this.ref,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:t})=>e.idField?Ce(H({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return we(this.ref.get(e)).pipe(jt)}};function Sf(n,e){return tI(n,e).pipe(Ti(void 0),Oa(),ee(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function ER(n,e,t){return Sf(n,t).pipe(Di((r,i)=>IU(r,i.map(o=>o.payload),e),[]),Cp(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function IU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=EU(n,r))}),n}function Xw(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function EU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Xw(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Xw(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Xw(n,e.oldIndex,1);break}return n}function DR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Af=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Sf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ti(void 0),Oa(),lt(([r,i])=>i.length>0||!r),ee(([,r])=>r),jt)}auditTrail(e){return this.stateChanges(e).pipe(Di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=DR(e);return ER(this.query,t,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return tI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.payload.docs.map(r=>e.idField?Ce(H({},r.data()),{[e.idField]:r.id}):r.data())),jt)}get(e){return we(this.query.get(e)).pipe(jt)}add(e){return this.ref.add(e)}doc(e){return new bf(this.ref.doc(e),this.afs)}},eI=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Sf(this.query,this.afs.schedulers.outsideAngular).pipe(jt):Sf(this.query,this.afs.schedulers.outsideAngular).pipe(ee(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),jt)}auditTrail(e){return this.stateChanges(e).pipe(Di((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=DR(e);return ER(this.query,t,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return tI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?H({[e.idField]:i.id},i.data()):i.data())),jt)}get(e){return we(this.query.get(e)).pipe(jt)}},TR=new z("angularfire2.enableFirestorePersistence"),CR=new z("angularfire2.firestore.persistenceSettings"),DU=new z("angularfire2.firestore.settings"),TU=new z("angularfire2.firestore.use-emulator");function bR(n,e=t=>t){return{query:e(n),ref:n}}var CU=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,D,A,x,F,$){this.schedulers=u;let O=Cu(t,a,r),W=d;f&&Wy(O,a,g,D,A,x,y,F),[this.firestore,this.persistenceEnabled$]=nh(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let X=a.runOutsideAngular(()=>O.firestore());if(o&&X.settings(o),W&&X.useEmulator(...W),i&&!Hi(s)){let Q=()=>{try{return we(X.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[X,a.runOutsideAngular(Q)]}else return[X,J(!1)]},[o,W,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=bR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Af(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new eI(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new bf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(vs),L(_s,8),L(TR,8),L(DU,8),L(Lt),L(fe),L(eh),L(CR,8),L(TU,8),L(Ky,8),L(Uy,8),L($y,8),L(Hy,8),L(qy,8),L(zy,8),L(Gy,8),L(Ki,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),z6=(()=>{class n{constructor(){Tt.registerVersion("angularfire",Qi.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:TR,useValue:!0},{provide:CR,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=zt({providers:[CU]})}return n})();export{de as a,Ue as b,we as c,J as d,ee as e,PM as f,kM as g,Xn as h,ka as i,$e as j,Y as k,FD as l,K as m,zt as n,z as o,L as p,ZD as q,Gt as r,ji as s,Wa as t,TG as u,CG as v,em as w,yt as x,fe as y,or as z,Lt as A,YP as B,bG as C,SG as D,qe as E,Ya as F,MG as G,Y1 as H,cO as I,Em as J,DO as K,TO as L,ZC as M,JC as N,Dm as O,NG as P,Tm as Q,PG as R,kG as S,qO as T,zO as U,OG as V,FG as W,KO as X,eb as Y,QO as Z,YO as _,LG as $,ZO as aa,VG as ba,jG as ca,BG as da,UG as ea,Xa as fa,eu as ga,tu as ha,$G as ia,xF as ja,$i as ka,h8 as la,f8 as ma,p8 as na,g8 as oa,Rb as pa,O8 as qa,F8 as ra,Fn as sa,oV as ta,qr as ua,t3 as va,n3 as wa,Qi as xa,Ki as ya,eh as za,f3 as Aa,jt as Ba,vs as Ca,_s as Da,Cu as Ea,E3 as Fa,nh as Ga,Ky as Ha,s6 as Ia,CU as Ja,z6 as Ka};
