import{a as B,b as z,c as Y,d as W,e as X,f as $,j as q,k as H,m as Q,o as ee,p as te,q as oe,r as ne}from"./chunk-HOFSYZ6W.js";import{a as ie}from"./chunk-GJURPMTQ.js";import{a as E}from"./chunk-MMDS54SU.js";import{$ as A,D as c,E as O,Fa as G,I as v,Ia as Z,Ja as K,K as p,Ka as J,M as n,N as r,O as m,P,Q as C,R as l,W as s,Y as N,_ as S,aa as L,e as T,h as V,la as I,m as _,n as b,na as R,p as d,q as x,qa as j,r as w,ra as D,ta as U,u as g,ua as M,v as u,wa as h}from"./chunk-65KWRJAR.js";import{d as a}from"./chunk-U3NIYLHF.js";var F=(()=>{class t{constructor(e,o){this.authService=e,this.router=o}canActivate(){return this.authService.isAuthenticated().pipe(V(1),T(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static{this.\u0275fac=function(o){return new(o||t)(d(E),d(M))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ge(t,k){if(t&1&&(n(0,"div",22),s(1),r()),t&2){let e=l(2);p("ngClass",e.messageType),c(),N(" ",e.message," ")}}function ue(t,k){if(t&1){let e=P();n(0,"div",23)(1,"button",24),C("click",function(){g(e);let i=l(2);return u(i.resendVerification())}),s(2," Resend Verification Email "),r()()}}function fe(t,k){if(t&1){let e=P();n(0,"div")(1,"form",5),C("ngSubmit",function(){g(e);let i=l();return u(i.login())}),n(2,"div",6),m(3,"img",7),n(4,"h1",8),s(5,"Human Resource "),m(6,"br"),s(7," Management Office"),r()(),m(8,"hr",9),v(9,ge,2,2,"div",10),n(10,"div",11)(11,"input",12),L("ngModelChange",function(i){g(e);let f=l();return A(f.email,i)||(f.email=i),u(i)}),r(),n(12,"label",13),s(13,"Email address"),r()(),n(14,"div",14)(15,"input",15),L("ngModelChange",function(i){g(e);let f=l();return A(f.password,i)||(f.password=i),u(i)}),r(),n(16,"label",16),s(17,"Password"),r(),n(18,"i",17),C("click",function(){g(e);let i=l();return u(i.togglePasswordVisibility())}),r()(),v(19,ue,3,0,"div",18),n(20,"div",19)(21,"button",20),s(22,"Login"),r(),m(23,"br"),n(24,"a",21),s(25,"Forgot Password"),r()()()()}if(t&2){let e=l();c(9),p("ngIf",e.message),c(2),S("ngModel",e.email),c(4),p("type",e.passwordFieldType),S("ngModel",e.password),c(3),p("ngClass",e.passwordFieldType==="password"?"fa-eye":"fa-eye-slash"),c(),p("ngIf",e.showResendButton)}}var se=(()=>{class t{constructor(e,o){this.authService=e,this.router=o,this.email="",this.password="",this.passwordFieldType="password",this.isLoginView=!0,this.message="",this.messageType="",this.showResendButton=!1}login(){return a(this,null,function*(){if(this.email=this.email.trim(),this.password=this.password.trim(),!this.email||!this.password){this.message="Email and password must not be empty",this.messageType="error";return}if(!this.isValidEmail(this.email)){this.message="Invalid email format",this.messageType="error";return}try{let e=yield this.authService.login(this.email,this.password);e.success?this.router.navigate(["/home"]):(this.message=e.message,this.messageType="error",this.showResendButton=e.message.includes("verify"))}catch(e){this.message=e.message,this.messageType="error",console.error("Login failed",e)}})}resendVerification(){return a(this,null,function*(){try{let e=yield this.authService.resendVerificationEmail();this.message=e.message,this.messageType=e.success?"success":"error"}catch(e){this.message=e.message,this.messageType="error",console.error("Failed to resend verification email",e)}})}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static{this.\u0275fac=function(o){return new(o||t)(O(E),O(M))}}static{this.\u0275cmp=x({type:t,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"vh-100"],[1,"container","h-100","w-25"],[1,""],[1,"form-col","bg-white","bg-opacity-50"],[4,"ngIf"],[1,"",3,"ngSubmit"],[1,"d-flex","justify-content-center","px-5","mx-2"],["src","hau.ico","alt","Holy Angel University Logo",1,"img-fluid",2,"width","35%"],[1,"text-center","my-auto"],[1,"text-dark"],["class","verification-message",3,"ngClass",4,"ngIf"],[1,"form-group"],["type","email","id","email","placeholder"," ","name","email","required","",3,"ngModelChange","ngModel"],["for","email"],[1,"form-group","password-group"],["id","password","placeholder"," ","name","password","required","",3,"ngModelChange","type","ngModel"],["for","password"],[1,"toggle-password","fas",3,"click","ngClass"],["class","text-center mb-2",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","login-btn","mb-3"],["href","#",1,""],[1,"verification-message",3,"ngClass"],[1,"text-center","mb-2"],["type","button",1,"btn-link",3,"click"]],template:function(o,i){o&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,fe,26,6,"div",4),r()()()()),o&2&&(c(4),p("ngIf",i.isLoginView))},dependencies:[I,R,$,B,z,Y,q,X,W],styles:['.vh-100[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:space-between;background-repeat:no-repeat;background-size:cover;background-image:linear-gradient(#0006,#0006),url(/holy.jpg)}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px;align-items:center}.row[_ngcontent-%COMP%]{display:flex;max-width:2000px;width:200%}.image-col[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}.image-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:100%}.form-col[_ngcontent-%COMP%]{white-space:nowrap;flex:1;padding:50px;border-radius:5%}.lead[_ngcontent-%COMP%]{font-size:1.25rem}.social-signin[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0}.divider[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 10px;font-weight:700;color:#666}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background-color:#eee}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:8px;border:1px solid #ccc;border-radius:4px;outline:none;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#000}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;left:12px;top:18px;font-size:.85rem;color:#000;pointer-events:none;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{top:-8px;left:10px;font-size:.75rem;color:#000}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:15px 0}.forgot-password[_ngcontent-%COMP%]{color:#676767;text-decoration:none}.login-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:maroon;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.login-btn[_ngcontent-%COMP%]:hover{background-color:#b8860b}.register[_ngcontent-%COMP%]{margin-top:15px;text-align:center;display:flex;justify-content:center}.register-link[_ngcontent-%COMP%]{text-decoration:none;background:none;color:#000;cursor:pointer;transition:all .3s ease;font-weight:700}.password-group[_ngcontent-%COMP%]{position:relative}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#000;font-size:1rem}.verification-message[_ngcontent-%COMP%]{padding:10px;margin:10px 0;text-align:center;border-radius:4px;font-size:.9rem}.verification-message.error[_ngcontent-%COMP%]{background-color:#8000201a;color:#800020;border:1px solid rgba(128,0,32,.2)}.verification-message.success[_ngcontent-%COMP%]{background-color:#cca43b1a;color:#cca43b;border:1px solid rgba(204,164,59,.2)}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#800020;text-decoration:underline;cursor:pointer;padding:0;font-size:.9rem}.btn-link[_ngcontent-%COMP%]:hover{color:#cca43b}']})}}return t})();var he=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"",loadChildren:()=>import("./chunk-UUYFCOP2.js").then(t=>t.LayoutModule),canActivate:[F]},{path:"login",component:se},{path:"employyes",component:Q},{path:"offboard",component:oe},{path:"home",component:ie,canActivate:[F]}],ae=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=w({type:t})}static{this.\u0275inj=b({imports:[h.forRoot(he),h]})}}return t})();var ce=(()=>{class t{constructor(){this.title="WebApplicationHR"}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=x({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){o&1&&m(0,"router-outlet")},dependencies:[U]})}}return t})();var le={production:!1,firebase:{apiKey:"AIzaSyD5s2Rkq1NwkXrs-Xjk9AVxP94bcWO6fe8",authDomain:"signuploginapp-e51b2.firebaseapp.com",databaseURL:"https://signuploginapp-e51b2-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"signuploginapp-e51b2",storageBucket:"signuploginapp-e51b2.firebasestorage.app",messagingSenderId:"578364808712",appId:"1:578364808712:web:45701c93a9302601c93bbd",measurementId:"G-ZXMYXSXB97"}};var pe=(()=>{class t{constructor(e,o){this.firestore=e,this.auditLogService=o,this.collectionName="employees"}getEmployees(){return this.firestore.collection(this.collectionName).valueChanges({idField:"id"})}getEmployeeById(e){return this.firestore.collection(this.collectionName).doc(e).valueChanges()}onboardEmployee(e){return a(this,null,function*(){try{let o=yield this.firestore.collection(this.collectionName).add(e);return yield this.auditLogService.logAction("ONBOARD_EMPLOYEE",`New employee added: ${o.id}`,"Successful"),{success:!0,message:"Employee onboarded successfully"}}catch(o){return yield this.auditLogService.logAction("ONBOARD_EMPLOYEE",`Failed to onboard employee: ${o.message}`,"Failed"),{success:!1,message:o.message}}})}updateEmployee(e,o){return a(this,null,function*(){try{return yield this.firestore.collection(this.collectionName).doc(e).update(o),yield this.auditLogService.logAction("UPDATE_EMPLOYEE",`Employee updated: ${e}`,"Successful"),{success:!0,message:"Employee updated successfully"}}catch(i){return yield this.auditLogService.logAction("UPDATE_EMPLOYEE",`Failed to update employee: ${i.message}`,"Failed"),{success:!1,message:i.message}}})}offboardEmployee(e){return a(this,null,function*(){try{return yield this.firestore.collection(this.collectionName).doc(e).update({status:"Offboarded"}),yield this.auditLogService.logAction("OFFBOARD_EMPLOYEE",`Employee offboarded: ${e}`,"Successful"),{success:!0,message:"Employee offboarded successfully"}}catch(o){return yield this.auditLogService.logAction("OFFBOARD_EMPLOYEE",`Failed to offboard employee: ${o.message}`,"Failed"),{success:!1,message:o.message}}})}deleteEmployee(e){return a(this,null,function*(){try{return yield this.firestore.collection(this.collectionName).doc(e).delete(),yield this.auditLogService.logAction("DELETE_EMPLOYEE",`Employee deleted: ${e}`,"Successful"),{success:!0,message:"Employee deleted successfully"}}catch(o){return yield this.auditLogService.logAction("DELETE_EMPLOYEE",`Failed to delete employee: ${o.message}`,"Failed"),{success:!1,message:o.message}}})}static{this.\u0275fac=function(o){return new(o||t)(d(K),d(ne))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var me=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=w({type:t,bootstrap:[ce]})}static{this.\u0275inj=b({providers:[pe,te],imports:[D,ae,H,G.initializeApp(le.firebase),Z,J,ee,h]})}}return t})();j().bootstrapModule(me,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
